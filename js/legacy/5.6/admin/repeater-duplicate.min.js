!function(e){function t(t,a){var n,i,f;n=t.attr("data-type"),i=e.Event("acf_duplicate:"+n),i.destination=a,t.trigger(i),i.isDefaultPrevented()||(c[n]?c[n](t,a):c._default(t,a,n),f=e.Event("acf_duplicated:"+n),f.destination=a,t.trigger(f))}function a(a,n,i){var i=i||"> .acf-field, > .acf-fields > .acf-field",f=a.find(i),c=n.find(i);f.each(function(a,n){return c[a]?e(f[a]).data("type")!==e(c[a]).data("type")?(console.trace("Error: source field type does not match destination field type"),!1):void t(e(f[a]),e(c[a])):(console.trace("Error: source fields do not match destination fields"),!1)})}var n=acf_duplicate_repeater.options,i=e.extend({},acf.fields.repeater),f=e.extend({},acf.fields.flexible_content),c={_default:function(t,a,n){var i=t.find('[type="'+n+'"]');a.find('[type="'+n+'"]').each(function(t,a){e(this).val(e(i[t]).val())})},button_group:function(t,a){var n=a.find('[type="radio"]');t.find('[type="radio"]').each(function(t,a){if(e(a).prop("checked"))return e(n[t]).trigger("click"),!1})},checkbox:function(t,a){var n=a.find('[type="checkbox"]');t.find('[type="checkbox"]').each(function(t,a){e(n[t]).prop("checked",e(a).prop("checked"))})},color_picker:function(e,t){c._default(e,t,"text"),c._default(e,t,"hidden")},date_picker:function(e,t){c._default(e,t,"text"),c._default(e,t,"hidden")},date_time_picker:function(e,t){c._default(e,t,"text"),c._default(e,t,"hidden")},file:function(e,t){var a=e.find(".acf-file-uploader"),n=t.find(".acf-file-uploader");c._default(e,t,"hidden"),a.hasClass("has-value")&&(n.find("div").first().html(a.find("div").first().html()),t.find(".acf-file-uploader").addClass("has-value"))},flexible_content:function(t,n){var i="> .acf-input > .acf-flexible-content > .values > .layout";acf.fields.flexible_content.set("$field",n),t.find(i).each(function(t,f){var c,d=e(f);acf.fields.flexible_content.add(d.data("layout")),c=n.find(i).last(),a(e(f),c,"> .acf-table > tbody > .acf-row > .acf-field, > .acf-fields > .acf-field")})},gallery:function(t,a){var n=t.find(".acf-gallery-attachments"),i=a.find(".acf-gallery-attachments"),f=a.find('input[type="hidden"]'),c=f.attr("name")+"[]";n.children().each(function(t,a){$clone=e(a).clone(),$clone.find('[type="hidden"]').attr("name",c),i.append($clone)})},google_map:function(e,t){c._default(e,t,"hidden")},group:function(e,t){a(e,t,"> .acf-input > .acf-table > tbody > .acf-row > .acf-field, > .acf-input > .acf-fields > .acf-field")},image:function(e,t){c._default(e,t,"hidden"),t.find("img").attr("src",e.find("img").attr("src")),e.find(".acf-image-uploader").hasClass("has-value")&&t.find(".acf-image-uploader").addClass("has-value")},link:function(e,t){var a=e.find(".link-node"),n=t.find(".link-node");n.html(a.html()),n.attr("href",a.attr("href")),n.attr("target",a.attr("target")),n.trigger("change")},oembed:function(e,t){t.find('[data-name="search-input"]').val(e.find('[type="hidden"]').val()).trigger("blur")},post_object:function(e,t){c.select(e,t)},radio:function(e,t){c.button_group(e,t),c._default(e,t,"text")},range:function(e,t){c._default(e,t,"range"),c._default(e,t,"number")},relationship:function(t,a){var n=a.find(".values > .list"),i=a.find(".acf-relationship").children('input[type="hidden"]'),f=i.attr("name")+"[]";t.find(".values > .list").children().each(function(t,a){var i=e(a).clone();i.find('[type="hidden"]').attr("name",f),n.append(i)}),i.trigger("change")},repeater:function(t,n){acf.fields.repeater.set("$field",n),t.find("> .acf-input > .acf-repeater > .acf-table > tbody > .acf-row:not(.acf-clone)").each(function(t,n){var i=acf.fields.repeater.add();a(e(n),i,"> .acf-field, > .acf-fields > .acf-field")})},select:function(t,a,n){n=n||" > .acf-input > select";var i=t.find(n),f=a.find(n);1*i.data("ui")&&(f.html(""),i.find("option").each(function(t,a){f.append(e(a).clone())})),$destOpts=f.find("option"),i.find("option").each(function(t,a){e($destOpts[t]).prop("selected",e(a).prop("selected"))})},taxonomy:function(e,t){c.radio(e,t),c.checkbox(e,t),c.select(e,t,"> .acf-input > .acf-taxonomy-field > select")},textarea:function(e,t){t.find("textarea").val(e.find("textarea").val())},time_picker:function(e,t){c._default(e,t,"text"),c._default(e,t,"hidden")},true_false:function(e,t){t.find('[type="checkbox"]').prop("checked",e.find('[type="checkbox"]').prop("checked")),t.find('[type="checkbox"]').trigger("change")},user:function(e,t){c.select(e,t)},wysiwyg:function(e,t){var a=function(a,n,i,f){if(f.get(0)===t.get(0)){var c=tinymce.get(e.find("textarea").attr("id"));c&&a.setContent(c.getContent())}};acf.add_action("wysiwyg_tinymce_init",a),t.find("textarea").html(e.find("textarea").html())}};acf.fields.flexible_content=acf.fields.flexible_content.extend({events:{'click [data-name="duplicate-layout"]':"_duplicate"},render:function(){var t;return t=f.render.apply(this,arguments),this.$values.children(".layout").each(function(t,a){e(this).find('[data-name="duplicate-layout"]').length||e(this).find(".acf-fc-layout-controlls").prepend(n.duplicate_flexible_btn)}),t},_duplicate:function(e){var t,n,i;n=e.$el.closest(".layout"),t=n.closest(".acf-field"),acf.fields.flexible_content.set("$field",t),acf.fields.flexible_content.add(n.data("layout"),n),i=n.prev(".layout"),a(n,i,"> .acf-table > tbody > .acf-row > .acf-field, > .acf-fields > .acf-field")}}),acf.fields.repeater=acf.fields.repeater.extend({events:{'click a[data-event="duplicate-row"]':"_duplicate"},render:function(){var t;return t=i.render.apply(this,arguments),this.$tbody.children().each(function(t){e(this).find("> td.remove").append(n.duplicate_repeater_btn)}),t},_duplicate:function(e){var t,n;e.$el.hasClass("acf-icon")&&(t=e.$el.closest(".acf-row"),n=this.add(t),a(t,n),this.$input.trigger("change"))}})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcGVhdGVyLWR1cGxpY2F0ZS5qcyJdLCJuYW1lcyI6WyIkIiwiY29weV92YWx1ZSIsIiRzcmMiLCIkZGVzdCIsInR5cGUiLCJjb3B5RXZlbnQiLCJkb25lRXZlbnQiLCJhdHRyIiwiRXZlbnQiLCJkZXN0aW5hdGlvbiIsInRyaWdnZXIiLCJpc0RlZmF1bHRQcmV2ZW50ZWQiLCJjb3B5X3ZhbHVlX2NiIiwiX2RlZmF1bHQiLCJjb3B5X3ZhbHVlcyIsIl9zZWxlY3RvciIsIiRzb3VyY2VzIiwiZmluZCIsIiRkZXN0cyIsImVhY2giLCJpIiwiZWwiLCJkYXRhIiwiY29uc29sZSIsInRyYWNlIiwib3B0aW9ucyIsImFjZl9kdXBsaWNhdGVfcmVwZWF0ZXIiLCJvcmlnX3JlcGVhdGVyIiwiZXh0ZW5kIiwiYWNmIiwiZmllbGRzIiwicmVwZWF0ZXIiLCJvcmlnX2ZsZXhpYmxlX2NvbnRlbnQiLCJmbGV4aWJsZV9jb250ZW50IiwiJHNyY2VzIiwidGhpcyIsInZhbCIsImJ1dHRvbl9ncm91cCIsIiRkZXN0UmFkaW8iLCJwcm9wIiwiY2hlY2tib3giLCIkZGVzdENCIiwiY29sb3JfcGlja2VyIiwiZGF0ZV9waWNrZXIiLCJkYXRlX3RpbWVfcGlja2VyIiwiZmlsZSIsIiRzcmNVcGwiLCIkZGVzdFVwbCIsImhhc0NsYXNzIiwiZmlyc3QiLCJodG1sIiwiYWRkQ2xhc3MiLCJzZWxlY3RvciIsInNldCIsImxheW91dCIsIiRuZXdfbGF5b3V0IiwiJGxheW91dCIsImFkZCIsImxhc3QiLCJnYWxsZXJ5IiwiJHNyY0xpc3QiLCIkZGVzdExpc3QiLCIkaW5wdXQiLCJuYW1lIiwiY2hpbGRyZW4iLCIkY2xvbmUiLCJjbG9uZSIsImFwcGVuZCIsImdvb2dsZV9tYXAiLCJncm91cCIsImltYWdlIiwibGluayIsIiRzcmNOb2RlIiwiJGRlc3ROb2RlIiwib2VtYmVkIiwicG9zdF9vYmplY3QiLCJyYWRpbyIsInJhbmdlIiwicmVsYXRpb25zaGlwIiwicm93IiwiJG5ld19yb3ciLCJzZWxlY3QiLCIkc3JjU2VsZWN0IiwiJGRlc3RTZWxlY3QiLCIkZGVzdE9wdHMiLCJ0YXhvbm9teSIsInRleHRhcmVhIiwidGltZV9waWNrZXIiLCJ0cnVlX2ZhbHNlIiwidXNlciIsInd5c2l3eWciLCJpbml0X2NiIiwiZWQiLCJpZCIsImluaXQiLCIkZmllbGQiLCJnZXQiLCJzcmNFZCIsInRpbnltY2UiLCJzZXRDb250ZW50IiwiZ2V0Q29udGVudCIsImFkZF9hY3Rpb24iLCJldmVudHMiLCJjbGljayBbZGF0YS1uYW1lPVwiZHVwbGljYXRlLWxheW91dFwiXSIsInJlbmRlciIsInJldCIsImFwcGx5IiwiYXJndW1lbnRzIiwiJHZhbHVlcyIsImxlbmd0aCIsInByZXBlbmQiLCJkdXBsaWNhdGVfZmxleGlibGVfYnRuIiwiX2R1cGxpY2F0ZSIsImUiLCIkZWwiLCJjbG9zZXN0IiwicHJldiIsImNsaWNrIGFbZGF0YS1ldmVudD1cImR1cGxpY2F0ZS1yb3dcIl0iLCIkdGJvZHkiLCJkdXBsaWNhdGVfcmVwZWF0ZXJfYnRuIiwiJHNvdXJjZSIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBVUEsR0ErTVQsUUFBU0MsR0FBWUMsRUFBTUMsR0FDMUIsR0FBSUMsR0FDSEMsRUFDQUMsQ0FFREYsR0FBT0YsRUFBS0ssS0FBSyxhQUVqQkYsRUFBWUwsRUFBRVEsTUFBTyxpQkFBbUJKLEdBQ3hDQyxFQUFVSSxZQUFjTixFQUV4QkQsRUFBS1EsUUFBU0wsR0FHVEEsRUFBVU0sdUJBSVJDLEVBQWVSLEdBSXJCUSxFQUFjUixHQUFPRixFQUFNQyxHQUYzQlMsRUFBY0MsU0FBVVgsRUFBTUMsRUFBT0MsR0FLdENFLEVBQVlOLEVBQUVRLE1BQU8sa0JBQW9CSixHQUN6Q0UsRUFBVUcsWUFBY04sRUFFeEJELEVBQUtRLFFBQVNKLElBV2YsUUFBU1EsR0FBYVosRUFBTUMsRUFBT1ksR0FDbEMsR0FDQ0EsR0FBWUEsR0FBYSwyQ0FDekJDLEVBQVdkLEVBQUtlLEtBQU1GLEdBQ3RCRyxFQUFVZixFQUFNYyxL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SXJETixHQUVSTyxXQUFZLFNBQVVDLEdBQ3JCLEdBQ0NsQixHQUNBdkMsRUFDQUQsQ0FHREMsR0FBVXlELEVBQUVDLElBQUlDLFFBQVEsV0FHeEJwQixFQUFTdkMsRUFBUTJELFFBQVEsY0FHekJ0RixJQUFJQyxPQUFPRyxpQkFBaUJvQixJQUFLLFNBQVUwQyxHQUczQ2xFLElBQUlDLE9BQU9HLGlCQUFpQndCLElBQUtELEVBQVFsQyxLQUFLLFVBQVdrQyxHQUd6REQsRUFBY0MsRUFBUTRELEtBQU0sV0FHNUJ0RyxFQUFhMEMsRUFBU0QsRUFBYSwrRUFRckMxQixJQUFJQyxPQUFPQyxTQUFXRixJQUFJQyxPQUFPQyxTQUFTSCxRQUN6QzBFLFFBQ0NlLHNDQUF1QyxjQUV4Q2IsT0FBUSxXQUVQLEdBQUlDLEVBU0osT0FQQUEsR0FBTTlFLEVBQWM2RSxPQUFPRSxNQUFPdkUsS0FBTXdFLFdBR3hDeEUsS0FBS21GLE9BQU90RCxXQUFXN0MsS0FBSyxTQUFTQyxHQUNwQ3BCLEVBQUVtQyxNQUFNbEIsS0FBSyxlQUFla0QsT0FBUTFDLEVBQVE4RiwwQkFHdENkLEdBRVJPLFdBQVksU0FBVUMsR0FFckIsR0FBSU8sR0FBU3JILENBR1Q4RyxHQUFFQyxJQUFJbEUsU0FBUyxjQUNsQndFLEVBQVVQLEVBQUVDLElBQUlDLFFBQVEsWUFLekJoSCxFQUFRZ0MsS0FBS3NCLElBQUsrRCxHQUdsQjFHLEVBQWEwRyxFQUFTckgsR0FFdEJnQyxLQUFLMkIsT0FBT3BELFFBQVEsZUFLcEIrRyIsImZpbGUiOiJyZXBlYXRlci1kdXBsaWNhdGUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCQpe1xuXHR2YXIgb3B0aW9ucyA9IGFjZl9kdXBsaWNhdGVfcmVwZWF0ZXIub3B0aW9ucyxcblxuXHRcdG9yaWdfcmVwZWF0ZXIgPSAkLmV4dGVuZCgge30sIGFjZi5maWVsZHMucmVwZWF0ZXIgKSxcblx0XHRvcmlnX2ZsZXhpYmxlX2NvbnRlbnQgPSAkLmV4dGVuZCgge30sIGFjZi5maWVsZHMuZmxleGlibGVfY29udGVudCApLFxuXG5cdFx0LyoqXG5cdFx0ICpcdHZhbHVlIGNvcHkgY2FsbGJhY2tzXG5cdFx0ICovXG5cdFx0Y29weV92YWx1ZV9jYiA9IHtcblx0XHRfZGVmYXVsdDogZnVuY3Rpb24oICRzcmMsICRkZXN0LCB0eXBlICkgeyAvLyBPS0FZXG5cdFx0XHR2YXIgJHNyY2VzID0gJHNyYy5maW5kKCdbdHlwZT1cIicrdHlwZSsnXCJdJyk7XG5cdFx0XHQkZGVzdC5maW5kKCdbdHlwZT1cIicrdHlwZSsnXCJdJykuZWFjaChmdW5jdGlvbihpLGVsKXtcblx0XHRcdFx0JCh0aGlzKS52YWwoICQoICRzcmNlc1tpXSApLnZhbCgpICk7XG5cdFx0XHR9KTtcblxuXHRcdH0sXG5cdFx0YnV0dG9uX2dyb3VwOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdHZhciAkZGVzdFJhZGlvID0gJGRlc3QuZmluZCgnW3R5cGU9XCJyYWRpb1wiXScpO1xuXHRcdFx0JHNyYy5maW5kKCdbdHlwZT1cInJhZGlvXCJdJykuZWFjaCggZnVuY3Rpb24oaSxlbCkge1xuXHRcdFx0XHRpZiAoICQoZWwpLnByb3AoJ2NoZWNrZWQnKSApIHtcblx0XHRcdFx0XHQkKCAkZGVzdFJhZGlvW2ldICkudHJpZ2dlcignY2xpY2snICk7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGNoZWNrYm94OiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdHZhciAkZGVzdENCID0gJGRlc3QuZmluZCgnW3R5cGU9XCJjaGVja2JveFwiXScpO1xuXHRcdFx0JHNyYy5maW5kKCdbdHlwZT1cImNoZWNrYm94XCJdJykuZWFjaCggZnVuY3Rpb24oaSxlbCkge1xuXHRcdFx0XHQkKCAkZGVzdENCW2ldICkucHJvcCgnY2hlY2tlZCcsICQoZWwpLnByb3AoJ2NoZWNrZWQnKSApO1xuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRjb2xvcl9waWNrZXI6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwgJ3RleHQnICk7XG5cdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCAnaGlkZGVuJyApO1xuXHRcdH0sXG5cdFx0ZGF0ZV9waWNrZXI6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwgJ3RleHQnICk7XG5cdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCAnaGlkZGVuJyApO1xuXHRcdH0sXG5cdFx0ZGF0ZV90aW1lX3BpY2tlcjogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCAndGV4dCcgKTtcblx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsICdoaWRkZW4nICk7XG5cdFx0fSxcblx0XHRmaWxlOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdHZhciAkc3JjVXBsID0gJHNyYy5maW5kKCcuYWNmLWZpbGUtdXBsb2FkZXInKSxcblx0XHRcdFx0JGRlc3RVcGwgPSAkZGVzdC5maW5kKCcuYWNmLWZpbGUtdXBsb2FkZXInKTtcblxuXHRcdFx0Ly8gc2V0IGhpZGRlblxuXHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSggJHNyYywgJGRlc3QsICdoaWRkZW4nICk7XG5cblx0XHRcdGlmICggJHNyY1VwbC5oYXNDbGFzcygnaGFzLXZhbHVlJykgKSB7XG5cdFx0XHRcdCRkZXN0VXBsLmZpbmQoJ2RpdicpLmZpcnN0KCkuaHRtbCggJHNyY1VwbC5maW5kKCdkaXYnKS5maXJzdCgpLmh0bWwoKSApO1xuXHRcdFx0XHQkZGVzdC5maW5kKCcuYWNmLWZpbGUtdXBsb2FkZXInKS5hZGRDbGFzcygnaGFzLXZhbHVlJylcblx0XHRcdH1cblx0XHR9LFxuXHRcdGZsZXhpYmxlX2NvbnRlbnQ6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHtcblx0XHRcdHZhciBzZWxlY3RvciA9ICc+IC5hY2YtaW5wdXQgPiAuYWNmLWZsZXhpYmxlLWNvbnRlbnQgPiAudmFsdWVzID4gLmxheW91dCc7XG5cdFx0XHRhY2YuZmllbGRzLmZsZXhpYmxlX2NvbnRlbnQuc2V0KCAnJGZpZWxkJywgJGRlc3QgKTtcblxuXHRcdFx0JHNyYy5maW5kKCBzZWxlY3RvciApLmVhY2goZnVuY3Rpb24oaSxsYXlvdXQpe1xuXHRcdFx0XHQvLyBlYWNoIHJlcGVhdGVyIGVudHJ5Li4uIGZpbmQgZmllbGRzIGluIHJlcGVhdGVyIGVudHJ5XG5cdFx0XHRcdHZhciAkbGF5b3V0ID0gJChsYXlvdXQpLFxuXHRcdFx0XHRcdCRuZXdfbGF5b3V0O1xuXG5cdFx0XHRcdGFjZi5maWVsZHMuZmxleGlibGVfY29udGVudC5hZGQoICRsYXlvdXQuZGF0YSgnbGF5b3V0JykgKTtcblxuXHRcdFx0XHQkbmV3X2xheW91dCA9ICRkZXN0LmZpbmQoIHNlbGVjdG9yICkubGFzdCgpO1xuXG5cdFx0XHRcdC8vIHRibCArIGJsb2NrICsgcm93XG5cdFx0XHRcdGNvcHlfdmFsdWVzKCAkKGxheW91dCksICRuZXdfbGF5b3V0LCAnPiAuYWNmLXRhYmxlID4gdGJvZHkgPiAuYWNmLXJvdyA+IC5hY2YtZmllbGQsID4gLmFjZi1maWVsZHMgPiAuYWNmLWZpZWxkJyApOyAvLyBleGNsdWRlIGNsb25lcyFcblxuXHRcdFx0fSk7IC8vIHRhYmxlXG5cdFx0fSxcblx0XHRnYWxsZXJ5OiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdC8vIGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsICdoaWRkZW4nICk7XG5cdFx0XHR2YXIgJHNyY0xpc3QgPSAkc3JjLmZpbmQoJy5hY2YtZ2FsbGVyeS1hdHRhY2htZW50cycpLFxuXHRcdFx0XHQkZGVzdExpc3QgPSAkZGVzdC5maW5kKCcuYWNmLWdhbGxlcnktYXR0YWNobWVudHMnKSxcblx0XHRcdFx0JGlucHV0ID0gJGRlc3QuZmluZCgnaW5wdXRbdHlwZT1cImhpZGRlblwiXScpLFxuXHRcdFx0XHRuYW1lID0gJGlucHV0LmF0dHIoJ25hbWUnKSArICdbXSc7XG5cblx0XHRcdCRzcmNMaXN0LmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbihpLGVsKXtcblx0XHRcdFx0JGNsb25lID0gJChlbCkuY2xvbmUoKTtcblx0XHRcdFx0JGNsb25lLmZpbmQoJ1t0eXBlPVwiaGlkZGVuXCJdJykuYXR0ciggJ25hbWUnLCBuYW1lICk7XG5cdFx0XHRcdCRkZXN0TGlzdC5hcHBlbmQoJGNsb25lKTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0Z29vZ2xlX21hcDogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCAnaGlkZGVuJyApO1xuXHRcdH0sXG5cdFx0Z3JvdXA6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHtcblx0XHRcdGNvcHlfdmFsdWVzKCAkc3JjLCAkZGVzdCwgJz4gLmFjZi1pbnB1dCA+IC5hY2YtdGFibGUgPiB0Ym9keSA+IC5hY2Ytcm93ID4gLmFjZi1maWVsZCwgPiAuYWNmLWlucHV0ID4gLmFjZi1maWVsZHMgPiAuYWNmLWZpZWxkJyApOyAvLyBleGNsdWRlIGNsb25lcyFcblx0XHR9LFxuXHRcdGltYWdlOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdC8vIHNldCBoaWRkZW5cblx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oICRzcmMsICRkZXN0LCAnaGlkZGVuJyApO1xuXHRcdFx0JGRlc3QuZmluZCgnaW1nJykuYXR0cignc3JjJywgJHNyYy5maW5kKCdpbWcnKS5hdHRyKCdzcmMnKSApXG5cdFx0XHRpZiAoICRzcmMuZmluZCgnLmFjZi1pbWFnZS11cGxvYWRlcicpLmhhc0NsYXNzKCdoYXMtdmFsdWUnKSApIHtcblx0XHRcdFx0JGRlc3QuZmluZCgnLmFjZi1pbWFnZS11cGxvYWRlcicpLmFkZENsYXNzKCdoYXMtdmFsdWUnKVxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0bGluazogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHR2YXIgJHNyY05vZGUgPSAkc3JjLmZpbmQoJy5saW5rLW5vZGUnKSxcblx0XHRcdFx0JGRlc3ROb2RlID0gJGRlc3QuZmluZCgnLmxpbmstbm9kZScpO1xuXG5cdFx0XHQkZGVzdE5vZGUuaHRtbCggJHNyY05vZGUuaHRtbCgpICk7XG5cdFx0XHQkZGVzdE5vZGUuYXR0ciggJ2hyZWYnLCAkc3JjTm9kZS5hdHRyKCAnaHJlZicgKSApO1xuXHRcdFx0JGRlc3ROb2RlLmF0dHIoICd0YXJnZXQnLCAkc3JjTm9kZS5hdHRyKCAndGFyZ2V0JyApICk7XG5cblx0XHRcdCRkZXN0Tm9kZS50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0XHR9LFxuXHRcdG9lbWJlZDogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHQkZGVzdC5maW5kKCdbZGF0YS1uYW1lPVwic2VhcmNoLWlucHV0XCJdJylcblx0XHRcdFx0LnZhbCggJHNyYy5maW5kKCdbdHlwZT1cImhpZGRlblwiXScpLnZhbCgpIClcblx0XHRcdFx0LnRyaWdnZXIoJ2JsdXInKTtcblx0XHR9LFxuXHRcdHBvc3Rfb2JqZWN0OiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdGNvcHlfdmFsdWVfY2JbJ3NlbGVjdCddKCRzcmMsICRkZXN0ICk7XG5cdFx0fSxcblx0XHRyYWRpbzogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRjb3B5X3ZhbHVlX2NiWydidXR0b25fZ3JvdXAnXSgkc3JjLCAkZGVzdCk7XG5cdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCd0ZXh0Jyk7XG5cdFx0fSxcblx0XHRyYW5nZTogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCdyYW5nZScpO1xuXHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwnbnVtYmVyJyk7XG5cdFx0fSxcblx0XHRyZWxhdGlvbnNoaXA6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0dmFyICRkZXN0TGlzdCA9ICRkZXN0LmZpbmQoJy52YWx1ZXMgPiAubGlzdCcpLFxuXHRcdFx0XHQkaW5wdXQgPSAkZGVzdC5maW5kKCcuYWNmLXJlbGF0aW9uc2hpcCcpLmNoaWxkcmVuKCdpbnB1dFt0eXBlPVwiaGlkZGVuXCJdJyksXG5cdFx0XHRcdG5hbWUgPSAkaW5wdXQuYXR0cignbmFtZScpICsgJ1tdJztcblxuXHRcdFx0JHNyYy5maW5kKCcudmFsdWVzID4gLmxpc3QnKS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oaSxlbCl7XG5cdFx0XHRcdHZhciAkY2xvbmUgPSAkKGVsKS5jbG9uZSgpO1xuXHRcdFx0XHQkY2xvbmUuZmluZCgnW3R5cGU9XCJoaWRkZW5cIl0nKS5hdHRyKCAnbmFtZScsIG5hbWUgKTtcblx0XHRcdFx0JGRlc3RMaXN0LmFwcGVuZCgkY2xvbmUpO1xuXHRcdFx0fSk7XG5cdFx0XHQkaW5wdXQudHJpZ2dlcignY2hhbmdlJyk7XG5cdFx0fSxcblx0XHRyZXBlYXRlcjpmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7XG5cblx0XHRcdGFjZi5maWVsZHMucmVwZWF0ZXIuc2V0KCAnJGZpZWxkJywgJGRlc3QgKTtcblx0XHRcdCRzcmMuZmluZCgnPiAuYWNmLWlucHV0ID4gLmFjZi1yZXBlYXRlciA+IC5hY2YtdGFibGUgPiB0Ym9keSA+IC5hY2Ytcm93Om5vdCguYWNmLWNsb25lKScpLmVhY2goZnVuY3Rpb24oaSxyb3cpe1xuXHRcdFx0XHQvLyBlYWNoIHJlcGVhdGVyIGVudHJ5Li4uIGZpbmQgZmllbGRzIGluIHJlcGVhdGVyIGVudHJ5XG5cdFx0XHRcdHZhciAkbmV3X3JvdyA9IGFjZi5maWVsZHMucmVwZWF0ZXIuYWRkKCk7XG5cblx0XHRcdFx0Y29weV92YWx1ZXMoICQocm93KSwgJG5ld19yb3csICc+IC5hY2YtZmllbGQsID4gLmFjZi1maWVsZHMgPiAuYWNmLWZpZWxkJyApOyAvLyBleGNsdWRlIGNsb25lcyFcblx0XHRcdH0pOyAvLyB0YWJsZVxuXHRcdH0sXG5cdFx0c2VsZWN0OiBmdW5jdGlvbiggJHNyYywgJGRlc3QsIF9zZWxlY3RvciApIHsgLy8gT0tBWVxuXHRcdFx0X3NlbGVjdG9yID0gX3NlbGVjdG9yIHx8ICcgPiAuYWNmLWlucHV0ID4gc2VsZWN0Jztcblx0XHRcdHZhciAkc3JjU2VsZWN0ID0gJHNyYy5maW5kKCBfc2VsZWN0b3IgKSxcblx0XHRcdFx0JGRlc3RTZWxlY3QgPSAkZGVzdC5maW5kKCBfc2VsZWN0b3IgKTtcblxuXHRcdFx0aWYgKCAkc3JjU2VsZWN0LmRhdGEoJ3VpJykgKiAxICkge1xuXHRcdFx0XHQvLyBzb3J0ICRkZXN0IGxpa2UgJHNyY1xuXHRcdFx0XHQkZGVzdFNlbGVjdC5odG1sKCcnKTtcblx0XHRcdFx0JHNyY1NlbGVjdC5maW5kKCdvcHRpb24nKS5lYWNoKGZ1bmN0aW9uKGksZWwpe1xuXHRcdFx0XHRcdCRkZXN0U2VsZWN0LmFwcGVuZCgkKGVsKS5jbG9uZSgpKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHQkZGVzdE9wdHMgPSAkZGVzdFNlbGVjdC5maW5kKCdvcHRpb24nKTtcblx0XHRcdCRzcmNTZWxlY3QuZmluZCgnb3B0aW9uJykuZWFjaChmdW5jdGlvbihpLGVsKSB7XG5cdFx0XHRcdCQoICRkZXN0T3B0c1tpXSApLnByb3AoJ3NlbGVjdGVkJywgJChlbCkucHJvcCgnc2VsZWN0ZWQnKSApO1xuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHR0YXhvbm9teTogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRjb3B5X3ZhbHVlX2NiWydyYWRpbyddKCRzcmMsICRkZXN0KTtcblx0XHRcdGNvcHlfdmFsdWVfY2JbJ2NoZWNrYm94J10oJHNyYywgJGRlc3QpO1xuXHRcdFx0Y29weV92YWx1ZV9jYlsnc2VsZWN0J10oJHNyYywgJGRlc3QsICc+IC5hY2YtaW5wdXQgPiAuYWNmLXRheG9ub215LWZpZWxkID4gc2VsZWN0JyApO1xuXHRcdH0sXG5cdFx0dGV4dGFyZWE6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0JGRlc3QuZmluZCgndGV4dGFyZWEnKS52YWwoICRzcmMuZmluZCgndGV4dGFyZWEnKS52YWwoKSApO1xuXHRcdH0sXG5cdFx0dGltZV9waWNrZXI6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwgJ3RleHQnICk7XG5cdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCAnaGlkZGVuJyApO1xuXHRcdH0sXG5cdFx0dHJ1ZV9mYWxzZTogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHQkZGVzdC5maW5kKCdbdHlwZT1cImNoZWNrYm94XCJdJykucHJvcCgnY2hlY2tlZCcsICRzcmMuZmluZCgnW3R5cGU9XCJjaGVja2JveFwiXScpLnByb3AoJ2NoZWNrZWQnKSApO1xuXHRcdFx0JGRlc3QuZmluZCgnW3R5cGU9XCJjaGVja2JveFwiXScpLnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdH0sXG5cdFx0dXNlcjogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRjb3B5X3ZhbHVlX2NiWydzZWxlY3QnXSggJHNyYywgJGRlc3QgKTtcblx0XHR9LFxuXHRcdHd5c2l3eWc6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gLi4uXG5cdFx0XHR2YXIgaW5pdF9jYiA9IGZ1bmN0aW9uKCBlZCwgaWQsIGluaXQsICRmaWVsZCApIHtcblx0XHRcdFx0aWYgKCAkZmllbGQuZ2V0KDApID09PSAkZGVzdC5nZXQoMCkgKSB7XG5cdFx0XHRcdFx0dmFyIHNyY0VkID0gdGlueW1jZS5nZXQoICRzcmMuZmluZCgndGV4dGFyZWEnKS5hdHRyKCdpZCcpICk7XG5cdFx0XHRcdFx0aWYgKCBzcmNFZCApIHtcblx0XHRcdFx0XHRcdGVkLnNldENvbnRlbnQoIHNyY0VkLmdldENvbnRlbnQoKSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0Ly9cdGFjZi5yZW1vdmVfYWN0aW9uKCd3eXNpd3lnX3RpbnltY2VfaW5pdCcsIGluaXRfY2IgKTsgLy8gbWhtbW1tXG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRhY2YuYWRkX2FjdGlvbignd3lzaXd5Z190aW55bWNlX2luaXQnLCBpbml0X2NiICk7XG5cblx0XHRcdCRkZXN0LmZpbmQoJ3RleHRhcmVhJykuaHRtbCggJHNyYy5maW5kKCd0ZXh0YXJlYScpLmh0bWwoKSApO1xuXHRcdH0sXG5cdH07XG5cblx0LyoqXG5cdCAqXHRDb3B5IHZhbHVlcyBmcm9tIG9uZSBhY2YtZmllbGQgdG8gYW5vdGhlclxuXHQgKlxuXHQgKlx0QHBhcmFtICRzcmMgalF1ZXJ5IG9iamVjdCBob2xkaW5nIHRoZSAuYWNmLWZpZWxkIG9iamVjdCB0byBjb3B5IGZyb21cblx0ICpcdEBwYXJhbSAkZGVzdCBqUXVlcnkgb2JqZWN0IGhvbGRpbmcgdGhlIC5hY2YtZmllbGQgb2JqZWN0IHRvIGNvcHkgdG9cblx0ICovXG5cdGZ1bmN0aW9uIGNvcHlfdmFsdWUoICRzcmMsICRkZXN0ICkge1xuXHRcdHZhciB0eXBlLFxuXHRcdFx0Y29weUV2ZW50LFxuXHRcdFx0ZG9uZUV2ZW50O1xuXG5cdFx0dHlwZSA9ICRzcmMuYXR0cignZGF0YS10eXBlJyk7XG5cblx0XHRjb3B5RXZlbnQgPSAkLkV2ZW50KCAnYWNmX2R1cGxpY2F0ZTonICsgdHlwZSApO1xuXHRcdGNvcHlFdmVudC5kZXN0aW5hdGlvbiA9ICRkZXN0O1xuXG5cdFx0JHNyYy50cmlnZ2VyKCBjb3B5RXZlbnQgKTtcblxuXHRcdC8vIGFsbG93IGNhbmNlbGluZ1xuXHRcdGlmICggY29weUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICggISBjb3B5X3ZhbHVlX2NiWyB0eXBlIF0gKSB7XG5cdFx0XHQvLyBEZWZhbHQgYmVoYXZpb3VyIGZvciB0ZXh0LCByYW5nZSwgdXJsLCBudW1iZXIsXG5cdFx0XHRjb3B5X3ZhbHVlX2NiLl9kZWZhdWx0KCAkc3JjLCAkZGVzdCwgdHlwZSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb3B5X3ZhbHVlX2NiW3R5cGVdKCAkc3JjLCAkZGVzdCApO1xuXHRcdH1cblxuXHRcdGRvbmVFdmVudCA9ICQuRXZlbnQoICdhY2ZfZHVwbGljYXRlZDonICsgdHlwZSApO1xuXHRcdGRvbmVFdmVudC5kZXN0aW5hdGlvbiA9ICRkZXN0O1xuXG5cdFx0JHNyYy50cmlnZ2VyKCBkb25lRXZlbnQgKTtcblx0fVxuXG5cdC8qKlxuXHQgKlx0Q29weSB2YWx1ZXMgZnJvbSBvbmUgc2V0IG9mIGFjZi1maWVsZHMgdG8gYW5vdGhlci5cblx0ICpcdEl0IGlzIGFzc3VtZWQgdGhhdCBib3RoICRzcmMgYWRuICRkZXN0IGhhdmUgYW4gaWRlbnRpY2FsXG5cdCAqXG5cdCAqXHRAcGFyYW0gJHNyYyBqUXVlcnkgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIC5hY2YtZmllbGQgb2JqZWN0cyB0byBjb3B5IGZyb21cblx0ICpcdEBwYXJhbSAkZGVzdCBqUXVlcnkgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIC5hY2YtZmllbGQgb2JqZWN0IHRvIGNvcHkgdG9cblx0ICpcdEBwYXJhbSBfc2VsZWN0b3IgY3NzIHNlbGVjdG9yIHRvIHNlbGVjdCAuYWNmLWZpZWxkcyBpbiBib3RoICRzcmMgYW5kICRkZXN0XG5cdCAqL1xuXHRmdW5jdGlvbiBjb3B5X3ZhbHVlcyggJHNyYywgJGRlc3QsIF9zZWxlY3RvciApIHtcblx0XHR2YXIgZmllbGRfbWFwXHQ9IHt9LFxuXHRcdFx0X3NlbGVjdG9yID0gX3NlbGVjdG9yIHx8ICc+IC5hY2YtZmllbGQsID4gLmFjZi1maWVsZHMgPiAuYWNmLWZpZWxkJyxcblx0XHRcdCRzb3VyY2VzXHQ9ICRzcmMuZmluZCggX3NlbGVjdG9yICksXG5cdFx0XHQkZGVzdHNcdFx0PSAkZGVzdC5maW5kKCBfc2VsZWN0b3IgKTtcblxuXHRcdCRzb3VyY2VzLmVhY2goIGZ1bmN0aW9uKCBpLCBlbCApe1xuXHRcdFx0aWYgKCAhICRkZXN0c1tpXSApIHtcblx0XHRcdFx0Y29uc29sZS50cmFjZSgnRXJyb3I6IHNvdXJjZSBmaWVsZHMgZG8gbm90IG1hdGNoIGRlc3RpbmF0aW9uIGZpZWxkcycpO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRpZiAoICQoICRzb3VyY2VzW2ldICkuZGF0YSgndHlwZScpICE9PSAkKCRkZXN0c1tpXSkuZGF0YSgndHlwZScpICkge1xuXHRcdFx0XHRjb25zb2xlLnRyYWNlKCdFcnJvcjogc291cmNlIGZpZWxkIHR5cGUgZG9lcyBub3QgbWF0Y2ggZGVzdGluYXRpb24gZmllbGQgdHlwZScpO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRjb3B5X3ZhbHVlKCAkKCAkc291cmNlc1tpXSApLCAkKCRkZXN0c1tpXSkgKTtcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKlx0RXh0ZW5kIGFjZiBmbGV4aWJsZSBjb250ZW50IGZpZWxkXG5cdCAqL1xuXHRhY2YuZmllbGRzLmZsZXhpYmxlX2NvbnRlbnQgPSBhY2YuZmllbGRzLmZsZXhpYmxlX2NvbnRlbnQuZXh0ZW5kKHtcblx0XHRldmVudHM6IHtcblx0XHRcdCdjbGljayBbZGF0YS1uYW1lPVwiZHVwbGljYXRlLWxheW91dFwiXSc6ICdfZHVwbGljYXRlJ1xuXHRcdH0sXG5cdFx0cmVuZGVyOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIHJldDtcblxuXHRcdFx0cmV0ID0gb3JpZ19mbGV4aWJsZV9jb250ZW50LnJlbmRlci5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cblx0XHRcdC8vIHVwZGF0ZSBvcmRlciBudW1iZXJzXG5cdFx0XHR0aGlzLiR2YWx1ZXMuY2hpbGRyZW4oJy5sYXlvdXQnKS5lYWNoKGZ1bmN0aW9uKCBpLCBlbCApe1xuXHRcdFx0XHRpZiAoICEgJCh0aGlzKS5maW5kKCdbZGF0YS1uYW1lPVwiZHVwbGljYXRlLWxheW91dFwiXScpLmxlbmd0aCApIHtcblx0XHRcdFx0XHQkKHRoaXMpLmZpbmQoJy5hY2YtZmMtbGF5b3V0LWNvbnRyb2xscycpLnByZXBlbmQoIG9wdGlvbnMuZHVwbGljYXRlX2ZsZXhpYmxlX2J0biApO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIHJldDtcblx0XHR9LFxuXHRcdF9kdXBsaWNhdGU6IGZ1bmN0aW9uKCBlICkge1xuXHRcdFx0dmFyIGxheW91dCxcblx0XHRcdFx0JGZpZWxkLFxuXHRcdFx0XHQkbGF5b3V0LFxuXHRcdFx0XHQkbmV3X2xheW91dDtcblxuXHRcdFx0Ly8gZ2V0IGxheW91dCB3cmFwcGVyXG5cdFx0XHQkbGF5b3V0ID0gZS4kZWwuY2xvc2VzdCgnLmxheW91dCcpO1xuXG5cdFx0XHQvLyBnZXQgZmxleGlibGVfY29udGVudCBmaWVsZFxuXHRcdFx0JGZpZWxkID0gJGxheW91dC5jbG9zZXN0KCcuYWNmLWZpZWxkJyk7XG5cblx0XHRcdC8vIGFjZiBzZXQgZmllbGQgY29udGVueHRcblx0XHRcdGFjZi5maWVsZHMuZmxleGlibGVfY29udGVudC5zZXQoICckZmllbGQnLCAkZmllbGQgKTtcblxuXHRcdFx0Ly8gYWNmIGFkZCB0YXJnZXQgbGF5b3V0IGJlZm9yZSBzb3VyY2UgbGF5b3V0XG5cdFx0XHRhY2YuZmllbGRzLmZsZXhpYmxlX2NvbnRlbnQuYWRkKCAkbGF5b3V0LmRhdGEoJ2xheW91dCcpLCAkbGF5b3V0ICk7XG5cblx0XHRcdC8vIGdldCB0aGUgYWRkZWQgbGF5b3V0XG5cdFx0XHQkbmV3X2xheW91dCA9ICRsYXlvdXQucHJldiggJy5sYXlvdXQnICk7XG5cblx0XHRcdC8vIGNvcHkgdmFsdWVzIGZyb20gc291cmNlIGxheW91dCB0byBkZXN0aW5hdGlvblxuXHRcdFx0Y29weV92YWx1ZXMoICRsYXlvdXQsICRuZXdfbGF5b3V0LCAnPiAuYWNmLXRhYmxlID4gdGJvZHkgPiAuYWNmLXJvdyA+IC5hY2YtZmllbGQsID4gLmFjZi1maWVsZHMgPiAuYWNmLWZpZWxkJyApOyAvLyBleGNsdWRlIGNsb25lcyFcblxuXHRcdH1cblx0fSk7XG5cblx0LyoqXG5cdCAqXHRFeHRlbmQgYWNmIGZsZXhpYmxlIGNvbnRlbnQgZmllbGRcblx0ICovXG5cdGFjZi5maWVsZHMucmVwZWF0ZXIgPSBhY2YuZmllbGRzLnJlcGVhdGVyLmV4dGVuZCh7XG5cdFx0ZXZlbnRzOiB7XG5cdFx0XHQnY2xpY2sgYVtkYXRhLWV2ZW50PVwiZHVwbGljYXRlLXJvd1wiXSc6ICdfZHVwbGljYXRlJ1xuXHRcdH0sXG5cdFx0cmVuZGVyOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIHJldDtcblxuXHRcdFx0cmV0ID0gb3JpZ19yZXBlYXRlci5yZW5kZXIuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXG5cdFx0XHQvLyBhZGQgZHVwbGljYXRlIGJ0blxuXHRcdFx0dGhpcy4kdGJvZHkuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKGkpe1xuXHRcdFx0XHQkKHRoaXMpLmZpbmQoJz4gdGQucmVtb3ZlJykuYXBwZW5kKCBvcHRpb25zLmR1cGxpY2F0ZV9yZXBlYXRlcl9idG4gKTtcblx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH0sXG5cdFx0X2R1cGxpY2F0ZTogZnVuY3Rpb24oIGUgKSB7XG5cblx0XHRcdHZhciAkc291cmNlLCAkZGVzdDtcblxuXHRcdFx0Ly8gZ2V0IHNvdXJjZSByb3dcblx0XHRcdGlmKCBlLiRlbC5oYXNDbGFzcygnYWNmLWljb24nKSApIHtcblx0XHRcdFx0JHNvdXJjZSA9IGUuJGVsLmNsb3Nlc3QoJy5hY2Ytcm93Jyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHQvLyBhZGQgZGVzdGluYXRpb24gcm93XG5cdFx0XHQkZGVzdCA9IHRoaXMuYWRkKCAkc291cmNlICk7IC8vIGFkZCBiZWZvcmUgc291cmNlIVxuXG5cdFx0XHQvLyBjb3B5IHZhbHVlcyBmcm9tIHNvdXJjZSByb3cgdG8gZGVzdGluYXRpb25cblx0XHRcdGNvcHlfdmFsdWVzKCAkc291cmNlLCAkZGVzdCApO1xuXG5cdFx0XHR0aGlzLiRpbnB1dC50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0XHR9LFxuXHR9KTtcblxuXG59KShqUXVlcnkpXG4iXX0=
