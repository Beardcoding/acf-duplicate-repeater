!function(e){function t(e,t){var a;return a=e.attr("data-type"),c[a]?c[a](e,t):c._default(e,t,a)}function a(a,n,i){var i=i||"> .acf-field, > .acf-fields > .acf-field",f=a.find(i),c=n.find(i);f.each(function(a,n){return c[a]?e(f[a]).data("type")!==e(c[a]).data("type")?(console.trace("Error: source field type does not match destination field type"),!1):void t(e(f[a]),e(c[a])):(console.trace("Error: source fields do not match destination fields"),!1)})}var n=acf_duplicate_repeater.options,i=e.extend({},acf.fields.repeater),f=e.extend({},acf.fields.flexible_content),c={_default:function(t,a,n){var i=t.find('[type="'+n+'"]');a.find('[type="'+n+'"]').each(function(t,a){e(this).val(e(i[t]).val())})},button_group:function(t,a){var n=a.find('[type="radio"]');t.find('[type="radio"]').each(function(t,a){if(e(a).prop("checked"))return e(n[t]).trigger("click"),!1})},checkbox:function(t,a){var n=a.find('[type="checkbox"]');t.find('[type="checkbox"]').each(function(t,a){e(n[t]).prop("checked",e(a).prop("checked"))})},color_picker:function(e,t){c._default(e,t,"text"),c._default(e,t,"hidden")},date_picker:function(e,t){c._default(e,t,"text"),c._default(e,t,"hidden")},date_time_picker:function(e,t){c._default(e,t,"text"),c._default(e,t,"hidden")},file:function(e,t){var a=e.find(".acf-file-uploader"),n=t.find(".acf-file-uploader");c._default(e,t,"hidden"),a.hasClass("has-value")&&(n.find("div").first().html(a.find("div").first().html()),t.find(".acf-file-uploader").addClass("has-value"))},flexible_content:function(t,n){var i="> .acf-input > .acf-flexible-content > .values > .layout";acf.fields.flexible_content.set("$field",n),t.find(i).each(function(t,f){var c,d=e(f);acf.fields.flexible_content.add(d.data("layout")),c=n.find(i).last(),a(e(f),c,"> .acf-table > tbody > .acf-row > .acf-field, > .acf-fields > .acf-field")})},gallery:function(t,a){var n=t.find(".acf-gallery-attachments"),i=a.find(".acf-gallery-attachments"),f=a.find('input[type="hidden"]'),c=f.attr("name")+"[]";n.children().each(function(t,a){$clone=e(a).clone(),$clone.find('[type="hidden"]').attr("name",c),i.append($clone)})},google_map:function(e,t){c._default(e,t,"hidden")},group:function(e,t){a(e,t,"> .acf-input > .acf-table > tbody > .acf-row > .acf-field, > .acf-input > .acf-fields > .acf-field")},image:function(e,t){c._default(e,t,"hidden"),t.find("img").attr("src",e.find("img").attr("src")),e.find(".acf-image-uploader").hasClass("has-value")&&t.find(".acf-image-uploader").addClass("has-value")},link:function(e,t){var a=e.find(".link-node"),n=t.find(".link-node");n.html(a.html()),n.attr("href",a.attr("href")),n.attr("target",a.attr("target")),n.trigger("change")},oembed:function(e,t){t.find('[data-name="search-input"]').val(e.find('[type="hidden"]').val()).trigger("blur")},post_object:function(e,t){c.select(e,t)},radio:function(e,t){c.button_group(e,t),c._default(e,t,"text")},range:function(e,t){c._default(e,t,"range"),c._default(e,t,"number")},relationship:function(t,a){var n=a.find(".values > .list"),i=a.find(".acf-relationship").children('input[type="hidden"]'),f=i.attr("name")+"[]";t.find(".values > .list").children().each(function(t,a){var i=e(a).clone();i.find('[type="hidden"]').attr("name",f),n.append(i)}),i.trigger("change")},repeater:function(t,n){acf.fields.repeater.set("$field",n),t.find("> .acf-input > .acf-repeater > .acf-table > tbody > .acf-row:not(.acf-clone)").each(function(t,n){var i=acf.fields.repeater.add();a(e(n),i,"> .acf-field, > .acf-fields > .acf-field")})},select:function(t,a,n){n=n||" > .acf-input > select";var i=t.find(n),f=a.find(n);1*i.data("ui")&&(f.html(""),i.find("option").each(function(t,a){f.append(e(a).clone())})),$destOpts=f.find("option"),i.find("option").each(function(t,a){e($destOpts[t]).prop("selected",e(a).prop("selected"))})},taxonomy:function(e,t){c.radio(e,t),c.checkbox(e,t),c.select(e,t,"> .acf-input > .acf-taxonomy-field > select")},textarea:function(e,t){t.find("textarea").val(e.find("textarea").val())},time_picker:function(e,t){c._default(e,t,"text"),c._default(e,t,"hidden")},true_false:function(e,t){t.find('[type="checkbox"]').prop("checked",e.find('[type="checkbox"]').prop("checked")),t.find('[type="checkbox"]').trigger("change")},user:function(e,t){c.select(e,t)},wysiwyg:function(e,t){var a=function(a,n,i,f){if(f.get(0)===t.get(0)){var c=tinymce.get(e.find("textarea").attr("id"));c&&a.setContent(c.getContent())}};acf.add_action("wysiwyg_tinymce_init",a),t.find("textarea").html(e.find("textarea").html())}};acf.fields.flexible_content=acf.fields.flexible_content.extend({events:{'click [data-name="duplicate-layout"]':"_duplicate"},render:function(){var t;return t=f.render.apply(this,arguments),this.$values.children(".layout").each(function(t,a){e(this).find('[data-name="duplicate-layout"]').length||e(this).find(".acf-fc-layout-controlls").prepend(n.duplicate_flexible_btn)}),t},_duplicate:function(e){var t,n,i;n=e.$el.closest(".layout"),t=n.closest(".acf-field"),acf.fields.flexible_content.set("$field",t),acf.fields.flexible_content.add(n.data("layout"),n),i=n.prev(".layout"),a(n,i,"> .acf-table > tbody > .acf-row > .acf-field, > .acf-fields > .acf-field")}}),acf.fields.repeater=acf.fields.repeater.extend({events:{'click a[data-event="duplicate-row"]':"_duplicate"},render:function(){var t;return t=i.render.apply(this,arguments),this.$tbody.children().each(function(t){e(this).find("> td.remove").append(n.duplicate_repeater_btn)}),t},_duplicate:function(e){var t,n;e.$el.hasClass("acf-icon")&&(t=e.$el.closest(".acf-row"),n=this.add(t),a(t,n),this.$input.trigger("change"))}})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcGVhdGVyLWR1cGxpY2F0ZS5qcyJdLCJuYW1lcyI6WyIkIiwiY29weV92YWx1ZSIsIiRzcmMiLCIkZGVzdCIsInR5cGUiLCJhdHRyIiwiY29weV92YWx1ZV9jYiIsIl9kZWZhdWx0IiwiY29weV92YWx1ZXMiLCJfc2VsZWN0b3IiLCIkc291cmNlcyIsImZpbmQiLCIkZGVzdHMiLCJlYWNoIiwiaSIsImVsIiwiZGF0YSIsImNvbnNvbGUiLCJ0cmFjZSIsIm9wdGlvbnMiLCJhY2ZfZHVwbGljYXRlX3JlcGVhdGVyIiwib3JpZ19yZXBlYXRlciIsImV4dGVuZCIsImFjZiIsImZpZWxkcyIsInJlcGVhdGVyIiwib3JpZ19mbGV4aWJsZV9jb250ZW50IiwiZmxleGlibGVfY29udGVudCIsIiRzcmNlcyIsInRoaXMiLCJ2YWwiLCJidXR0b25fZ3JvdXAiLCIkZGVzdFJhZGlvIiwicHJvcCIsInRyaWdnZXIiLCJjaGVja2JveCIsIiRkZXN0Q0IiLCJjb2xvcl9waWNrZXIiLCJkYXRlX3BpY2tlciIsImRhdGVfdGltZV9waWNrZXIiLCJmaWxlIiwiJHNyY1VwbCIsIiRkZXN0VXBsIiwiaGFzQ2xhc3MiLCJmaXJzdCIsImh0bWwiLCJhZGRDbGFzcyIsInNlbGVjdG9yIiwic2V0IiwibGF5b3V0IiwiJG5ld19sYXlvdXQiLCIkbGF5b3V0IiwiYWRkIiwibGFzdCIsImdhbGxlcnkiLCIkc3JjTGlzdCIsIiRkZXN0TGlzdCIsIiRpbnB1dCIsIm5hbWUiLCJjaGlsZHJlbiIsIiRjbG9uZSIsImNsb25lIiwiYXBwZW5kIiwiZ29vZ2xlX21hcCIsImdyb3VwIiwiaW1hZ2UiLCJsaW5rIiwiJHNyY05vZGUiLCIkZGVzdE5vZGUiLCJvZW1iZWQiLCJwb3N0X29iamVjdCIsInJhZGlvIiwicmFuZ2UiLCJyZWxhdGlvbnNoaXAiLCJyb3ciLCIkbmV3X3JvdyIsInNlbGVjdCIsIiRzcmNTZWxlY3QiLCIkZGVzdFNlbGVjdCIsIiRkZXN0T3B0cyIsInRheG9ub215IiwidGV4dGFyZWEiLCJ0aW1lX3BpY2tlciIsInRydWVfZmFsc2UiLCJ1c2VyIiwid3lzaXd5ZyIsImluaXRfY2IiLCJlZCIsImlkIiwiaW5pdCIsIiRmaWVsZCIsImdldCIsInNyY0VkIiwidGlueW1jZSIsInNldENvbnRlbnQiLCJnZXRDb250ZW50IiwiYWRkX2FjdGlvbiIsImV2ZW50cyIsImNsaWNrIFtkYXRhLW5hbWU9XCJkdXBsaWNhdGUtbGF5b3V0XCJdIiwicmVuZGVyIiwicmV0IiwiYXBwbHkiLCJhcmd1bWVudHMiLCIkdmFsdWVzIiwibGVuZ3RoIiwicHJlcGVuZCIsImR1cGxpY2F0ZV9mbGV4aWJsZV9idG4iLCJfZHVwbGljYXRlIiwiZSIsIiRlbCIsImNsb3Nlc3QiLCJwcmV2IiwiY2xpY2sgYVtkYXRhLWV2ZW50PVwiZHVwbGljYXRlLXJvd1wiXSIsIiR0Ym9keSIsImR1cGxpY2F0ZV9yZXBlYXRlcl9idG4iLCIkc291cmNlIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFVQSxHQStNVCxRQUFTQyxHQUFZQyxFQUFNQyxHQUMxQixHQUEyQkMsRUFJM0IsT0FGQUEsR0FBT0YsRUFBS0csS0FBSyxhQUVWQyxFQUFlRixHQUtmRSxFQUFjRixHQUFPRixFQUFNQyxHQUgxQkcsRUFBY0MsU0FBVUwsRUFBTUMsRUFBT0MsR0FjOUMsUUFBU0ksR0FBYU4sRUFBTUMsRUFBT00sR0FDbEMsR0FDQ0EsR0FBWUEsR0FBYSwyQ0FDekJDLEVBQVdSLEVBQUtTLEtBQU1GLEdBQ3RCRyxFQUFVVCxFQUFNUSxLQUFNRixFQUV2QkMsR0FBU0csS0FBTSxTQUFVQyxFQUFHQyxHQUMzQixNQUFPSCxHQUFPRSxHQUlUZCxFQUFHVSxFQUFTSSxJQUFLRSxLQUFLLFVBQVloQixFQUFFWSxFQUFPRSxJQUFJRSxLQUFLLFNBQ3hEQyxRQUFRQyxNQUFNLG1FQUNQLE9BRVJqQixHQUFZRCxFQUFHVSxFQUFTSSxJQUFNZCxFQUFFWSxFQUFPRSxNQVB0Q0csUUFBUUMsTUFBTSx5REFDUCxLQTVPVixHQUFJQyxHQUFVQyx1QkFB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U0QsRUFBYSwrRUFRckMzQixJQUFJQyxPQUFPQyxTQUFXRixJQUFJQyxPQUFPQyxTQUFTSCxRQUN6QzJFLFFBQ0NlLHNDQUF1QyxjQUV4Q2IsT0FBUSxXQUVQLEdBQUlDLEVBU0osT0FQQUEsR0FBTS9FLEVBQWM4RSxPQUFPRSxNQUFPeEUsS0FBTXlFLFdBR3hDekUsS0FBS29GLE9BQU90RCxXQUFXOUMsS0FBSyxTQUFTQyxHQUNwQ2QsRUFBRTZCLE1BQU1sQixLQUFLLGVBQWVtRCxPQUFRM0MsRUFBUStGLDBCQUd0Q2QsR0FFUk8sV0FBWSxTQUFVQyxHQUVyQixHQUFJTyxHQUFTaEgsQ0FHVHlHLEdBQUVDLElBQUlsRSxTQUFTLGNBQ2xCd0UsRUFBVVAsRUFBRUMsSUFBSUMsUUFBUSxZQUt6QjNHLEVBQVEwQixLQUFLdUIsSUFBSytELEdBR2xCM0csRUFBYTJHLEVBQVNoSCxHQUV0QjBCLEtBQUs0QixPQUFPdkIsUUFBUSxlQUtwQmtGIiwiZmlsZSI6InJlcGVhdGVyLWR1cGxpY2F0ZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oJCl7XG5cdHZhciBvcHRpb25zID0gYWNmX2R1cGxpY2F0ZV9yZXBlYXRlci5vcHRpb25zLFxuXG5cdFx0b3JpZ19yZXBlYXRlciA9ICQuZXh0ZW5kKCB7fSwgYWNmLmZpZWxkcy5yZXBlYXRlciApLFxuXHRcdG9yaWdfZmxleGlibGVfY29udGVudCA9ICQuZXh0ZW5kKCB7fSwgYWNmLmZpZWxkcy5mbGV4aWJsZV9jb250ZW50ICksXG5cblx0XHQvKipcblx0XHQgKlx0dmFsdWUgY29weSBjYWxsYmFja3Ncblx0XHQgKi9cblx0XHRjb3B5X3ZhbHVlX2NiID0ge1xuXHRcdF9kZWZhdWx0OiBmdW5jdGlvbiggJHNyYywgJGRlc3QsIHR5cGUgKSB7IC8vIE9LQVlcblx0XHRcdHZhciAkc3JjZXMgPSAkc3JjLmZpbmQoJ1t0eXBlPVwiJyt0eXBlKydcIl0nKTtcblx0XHRcdCRkZXN0LmZpbmQoJ1t0eXBlPVwiJyt0eXBlKydcIl0nKS5lYWNoKGZ1bmN0aW9uKGksZWwpe1xuXHRcdFx0XHQkKHRoaXMpLnZhbCggJCggJHNyY2VzW2ldICkudmFsKCkgKTtcblx0XHRcdH0pO1xuXG5cdFx0fSxcblx0XHRidXR0b25fZ3JvdXA6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0dmFyICRkZXN0UmFkaW8gPSAkZGVzdC5maW5kKCdbdHlwZT1cInJhZGlvXCJdJyk7XG5cdFx0XHQkc3JjLmZpbmQoJ1t0eXBlPVwicmFkaW9cIl0nKS5lYWNoKCBmdW5jdGlvbihpLGVsKSB7XG5cdFx0XHRcdGlmICggJChlbCkucHJvcCgnY2hlY2tlZCcpICkge1xuXHRcdFx0XHRcdCQoICRkZXN0UmFkaW9baV0gKS50cmlnZ2VyKCdjbGljaycgKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0Y2hlY2tib3g6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0dmFyICRkZXN0Q0IgPSAkZGVzdC5maW5kKCdbdHlwZT1cImNoZWNrYm94XCJdJyk7XG5cdFx0XHQkc3JjLmZpbmQoJ1t0eXBlPVwiY2hlY2tib3hcIl0nKS5lYWNoKCBmdW5jdGlvbihpLGVsKSB7XG5cdFx0XHRcdCQoICRkZXN0Q0JbaV0gKS5wcm9wKCdjaGVja2VkJywgJChlbCkucHJvcCgnY2hlY2tlZCcpICk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGNvbG9yX3BpY2tlcjogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCAndGV4dCcgKTtcblx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsICdoaWRkZW4nICk7XG5cdFx0fSxcblx0XHRkYXRlX3BpY2tlcjogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCAndGV4dCcgKTtcblx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsICdoaWRkZW4nICk7XG5cdFx0fSxcblx0XHRkYXRlX3RpbWVfcGlja2VyOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsICd0ZXh0JyApO1xuXHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwgJ2hpZGRlbicgKTtcblx0XHR9LFxuXHRcdGZpbGU6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0dmFyICRzcmNVcGwgPSAkc3JjLmZpbmQoJy5hY2YtZmlsZS11cGxvYWRlcicpLFxuXHRcdFx0XHQkZGVzdFVwbCA9ICRkZXN0LmZpbmQoJy5hY2YtZmlsZS11cGxvYWRlcicpO1xuXG5cdFx0XHQvLyBzZXQgaGlkZGVuXG5cdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCAkc3JjLCAkZGVzdCwgJ2hpZGRlbicgKTtcblxuXHRcdFx0aWYgKCAkc3JjVXBsLmhhc0NsYXNzKCdoYXMtdmFsdWUnKSApIHtcblx0XHRcdFx0JGRlc3RVcGwuZmluZCgnZGl2JykuZmlyc3QoKS5odG1sKCAkc3JjVXBsLmZpbmQoJ2RpdicpLmZpcnN0KCkuaHRtbCgpICk7XG5cdFx0XHRcdCRkZXN0LmZpbmQoJy5hY2YtZmlsZS11cGxvYWRlcicpLmFkZENsYXNzKCdoYXMtdmFsdWUnKVxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0ZmxleGlibGVfY29udGVudDogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkge1xuXHRcdFx0dmFyIHNlbGVjdG9yID0gJz4gLmFjZi1pbnB1dCA+IC5hY2YtZmxleGlibGUtY29udGVudCA+IC52YWx1ZXMgPiAubGF5b3V0Jztcblx0XHRcdGFjZi5maWVsZHMuZmxleGlibGVfY29udGVudC5zZXQoICckZmllbGQnLCAkZGVzdCApO1xuXG5cdFx0XHQkc3JjLmZpbmQoIHNlbGVjdG9yICkuZWFjaChmdW5jdGlvbihpLGxheW91dCl7XG5cdFx0XHRcdC8vIGVhY2ggcmVwZWF0ZXIgZW50cnkuLi4gZmluZCBmaWVsZHMgaW4gcmVwZWF0ZXIgZW50cnlcblx0XHRcdFx0dmFyICRsYXlvdXQgPSAkKGxheW91dCksXG5cdFx0XHRcdFx0JG5ld19sYXlvdXQ7XG5cblx0XHRcdFx0YWNmLmZpZWxkcy5mbGV4aWJsZV9jb250ZW50LmFkZCggJGxheW91dC5kYXRhKCdsYXlvdXQnKSApO1xuXG5cdFx0XHRcdCRuZXdfbGF5b3V0ID0gJGRlc3QuZmluZCggc2VsZWN0b3IgKS5sYXN0KCk7XG5cblx0XHRcdFx0Ly8gdGJsICsgYmxvY2sgKyByb3dcblx0XHRcdFx0Y29weV92YWx1ZXMoICQobGF5b3V0KSwgJG5ld19sYXlvdXQsICc+IC5hY2YtdGFibGUgPiB0Ym9keSA+IC5hY2Ytcm93ID4gLmFjZi1maWVsZCwgPiAuYWNmLWZpZWxkcyA+IC5hY2YtZmllbGQnICk7IC8vIGV4Y2x1ZGUgY2xvbmVzIVxuXG5cdFx0XHR9KTsgLy8gdGFibGVcblx0XHR9LFxuXHRcdGdhbGxlcnk6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0Ly8gY29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwgJ2hpZGRlbicgKTtcblx0XHRcdHZhciAkc3JjTGlzdCA9ICRzcmMuZmluZCgnLmFjZi1nYWxsZXJ5LWF0dGFjaG1lbnRzJyksXG5cdFx0XHRcdCRkZXN0TGlzdCA9ICRkZXN0LmZpbmQoJy5hY2YtZ2FsbGVyeS1hdHRhY2htZW50cycpLFxuXHRcdFx0XHQkaW5wdXQgPSAkZGVzdC5maW5kKCdpbnB1dFt0eXBlPVwiaGlkZGVuXCJdJyksXG5cdFx0XHRcdG5hbWUgPSAkaW5wdXQuYXR0cignbmFtZScpICsgJ1tdJztcblxuXHRcdFx0JHNyY0xpc3QuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKGksZWwpe1xuXHRcdFx0XHQkY2xvbmUgPSAkKGVsKS5jbG9uZSgpO1xuXHRcdFx0XHQkY2xvbmUuZmluZCgnW3R5cGU9XCJoaWRkZW5cIl0nKS5hdHRyKCAnbmFtZScsIG5hbWUgKTtcblx0XHRcdFx0JGRlc3RMaXN0LmFwcGVuZCgkY2xvbmUpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRnb29nbGVfbWFwOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsICdoaWRkZW4nICk7XG5cdFx0fSxcblx0XHRncm91cDogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkge1xuXHRcdFx0Y29weV92YWx1ZXMoICRzcmMsICRkZXN0LCAnPiAuYWNmLWlucHV0ID4gLmFjZi10YWJsZSA+IHRib2R5ID4gLmFjZi1yb3cgPiAuYWNmLWZpZWxkLCA+IC5hY2YtaW5wdXQgPiAuYWNmLWZpZWxkcyA+IC5hY2YtZmllbGQnICk7IC8vIGV4Y2x1ZGUgY2xvbmVzIVxuXHRcdH0sXG5cdFx0aW1hZ2U6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0Ly8gc2V0IGhpZGRlblxuXHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSggJHNyYywgJGRlc3QsICdoaWRkZW4nICk7XG5cdFx0XHQkZGVzdC5maW5kKCdpbWcnKS5hdHRyKCdzcmMnLCAkc3JjLmZpbmQoJ2ltZycpLmF0dHIoJ3NyYycpIClcblx0XHRcdGlmICggJHNyYy5maW5kKCcuYWNmLWltYWdlLXVwbG9hZGVyJykuaGFzQ2xhc3MoJ2hhcy12YWx1ZScpICkge1xuXHRcdFx0XHQkZGVzdC5maW5kKCcuYWNmLWltYWdlLXVwbG9hZGVyJykuYWRkQ2xhc3MoJ2hhcy12YWx1ZScpXG5cdFx0XHR9XG5cdFx0fSxcblx0XHRsaW5rOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdHZhciAkc3JjTm9kZSA9ICRzcmMuZmluZCgnLmxpbmstbm9kZScpLFxuXHRcdFx0XHQkZGVzdE5vZGUgPSAkZGVzdC5maW5kKCcubGluay1ub2RlJyk7XG5cblx0XHRcdCRkZXN0Tm9kZS5odG1sKCAkc3JjTm9kZS5odG1sKCkgKTtcblx0XHRcdCRkZXN0Tm9kZS5hdHRyKCAnaHJlZicsICRzcmNOb2RlLmF0dHIoICdocmVmJyApICk7XG5cdFx0XHQkZGVzdE5vZGUuYXR0ciggJ3RhcmdldCcsICRzcmNOb2RlLmF0dHIoICd0YXJnZXQnICkgKTtcblxuXHRcdFx0JGRlc3ROb2RlLnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdH0sXG5cdFx0b2VtYmVkOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdCRkZXN0LmZpbmQoJ1tkYXRhLW5hbWU9XCJzZWFyY2gtaW5wdXRcIl0nKVxuXHRcdFx0XHQudmFsKCAkc3JjLmZpbmQoJ1t0eXBlPVwiaGlkZGVuXCJdJykudmFsKCkgKVxuXHRcdFx0XHQudHJpZ2dlcignYmx1cicpO1xuXHRcdH0sXG5cdFx0cG9zdF9vYmplY3Q6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0Y29weV92YWx1ZV9jYlsnc2VsZWN0J10oJHNyYywgJGRlc3QgKTtcblx0XHR9LFxuXHRcdHJhZGlvOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdGNvcHlfdmFsdWVfY2JbJ2J1dHRvbl9ncm91cCddKCRzcmMsICRkZXN0KTtcblx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsJ3RleHQnKTtcblx0XHR9LFxuXHRcdHJhbmdlOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsJ3JhbmdlJyk7XG5cdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCdudW1iZXInKTtcblx0XHR9LFxuXHRcdHJlbGF0aW9uc2hpcDogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHR2YXIgJGRlc3RMaXN0ID0gJGRlc3QuZmluZCgnLnZhbHVlcyA+IC5saXN0JyksXG5cdFx0XHRcdCRpbnB1dCA9ICRkZXN0LmZpbmQoJy5hY2YtcmVsYXRpb25zaGlwJykuY2hpbGRyZW4oJ2lucHV0W3R5cGU9XCJoaWRkZW5cIl0nKSxcblx0XHRcdFx0bmFtZSA9ICRpbnB1dC5hdHRyKCduYW1lJykgKyAnW10nO1xuXG5cdFx0XHQkc3JjLmZpbmQoJy52YWx1ZXMgPiAubGlzdCcpLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbihpLGVsKXtcblx0XHRcdFx0dmFyICRjbG9uZSA9ICQoZWwpLmNsb25lKCk7XG5cdFx0XHRcdCRjbG9uZS5maW5kKCdbdHlwZT1cImhpZGRlblwiXScpLmF0dHIoICduYW1lJywgbmFtZSApO1xuXHRcdFx0XHQkZGVzdExpc3QuYXBwZW5kKCRjbG9uZSk7XG5cdFx0XHR9KTtcblx0XHRcdCRpbnB1dC50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0XHR9LFxuXHRcdHJlcGVhdGVyOmZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHtcblxuXHRcdFx0YWNmLmZpZWxkcy5yZXBlYXRlci5zZXQoICckZmllbGQnLCAkZGVzdCApO1xuXHRcdFx0JHNyYy5maW5kKCc+IC5hY2YtaW5wdXQgPiAuYWNmLXJlcGVhdGVyID4gLmFjZi10YWJsZSA+IHRib2R5ID4gLmFjZi1yb3c6bm90KC5hY2YtY2xvbmUpJykuZWFjaChmdW5jdGlvbihpLHJvdyl7XG5cdFx0XHRcdC8vIGVhY2ggcmVwZWF0ZXIgZW50cnkuLi4gZmluZCBmaWVsZHMgaW4gcmVwZWF0ZXIgZW50cnlcblx0XHRcdFx0dmFyICRuZXdfcm93ID0gYWNmLmZpZWxkcy5yZXBlYXRlci5hZGQoKTtcblxuXHRcdFx0XHRjb3B5X3ZhbHVlcyggJChyb3cpLCAkbmV3X3JvdywgJz4gLmFjZi1maWVsZCwgPiAuYWNmLWZpZWxkcyA+IC5hY2YtZmllbGQnICk7IC8vIGV4Y2x1ZGUgY2xvbmVzIVxuXHRcdFx0fSk7IC8vIHRhYmxlXG5cdFx0fSxcblx0XHRzZWxlY3Q6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCwgX3NlbGVjdG9yICkgeyAvLyBPS0FZXG5cdFx0XHRfc2VsZWN0b3IgPSBfc2VsZWN0b3IgfHwgJyA+IC5hY2YtaW5wdXQgPiBzZWxlY3QnO1xuXHRcdFx0dmFyICRzcmNTZWxlY3QgPSAkc3JjLmZpbmQoIF9zZWxlY3RvciApLFxuXHRcdFx0XHQkZGVzdFNlbGVjdCA9ICRkZXN0LmZpbmQoIF9zZWxlY3RvciApO1xuXG5cdFx0XHRpZiAoICRzcmNTZWxlY3QuZGF0YSgndWknKSAqIDEgKSB7XG5cdFx0XHRcdC8vIHNvcnQgJGRlc3QgbGlrZSAkc3JjXG5cdFx0XHRcdCRkZXN0U2VsZWN0Lmh0bWwoJycpO1xuXHRcdFx0XHQkc3JjU2VsZWN0LmZpbmQoJ29wdGlvbicpLmVhY2goZnVuY3Rpb24oaSxlbCl7XG5cdFx0XHRcdFx0JGRlc3RTZWxlY3QuYXBwZW5kKCQoZWwpLmNsb25lKCkpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdCRkZXN0T3B0cyA9ICRkZXN0U2VsZWN0LmZpbmQoJ29wdGlvbicpO1xuXHRcdFx0JHNyY1NlbGVjdC5maW5kKCdvcHRpb24nKS5lYWNoKGZ1bmN0aW9uKGksZWwpIHtcblx0XHRcdFx0JCggJGRlc3RPcHRzW2ldICkucHJvcCgnc2VsZWN0ZWQnLCAkKGVsKS5wcm9wKCdzZWxlY3RlZCcpICk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdHRheG9ub215OiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdGNvcHlfdmFsdWVfY2JbJ3JhZGlvJ10oJHNyYywgJGRlc3QpO1xuXHRcdFx0Y29weV92YWx1ZV9jYlsnY2hlY2tib3gnXSgkc3JjLCAkZGVzdCk7XG5cdFx0XHRjb3B5X3ZhbHVlX2NiWydzZWxlY3QnXSgkc3JjLCAkZGVzdCwgJz4gLmFjZi1pbnB1dCA+IC5hY2YtdGF4b25vbXktZmllbGQgPiBzZWxlY3QnICk7XG5cdFx0fSxcblx0XHR0ZXh0YXJlYTogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHQkZGVzdC5maW5kKCd0ZXh0YXJlYScpLnZhbCggJHNyYy5maW5kKCd0ZXh0YXJlYScpLnZhbCgpICk7XG5cdFx0fSxcblx0XHR0aW1lX3BpY2tlcjogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCAndGV4dCcgKTtcblx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsICdoaWRkZW4nICk7XG5cdFx0fSxcblx0XHR0cnVlX2ZhbHNlOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdCRkZXN0LmZpbmQoJ1t0eXBlPVwiY2hlY2tib3hcIl0nKS5wcm9wKCdjaGVja2VkJywgJHNyYy5maW5kKCdbdHlwZT1cImNoZWNrYm94XCJdJykucHJvcCgnY2hlY2tlZCcpICk7XG5cdFx0XHQkZGVzdC5maW5kKCdbdHlwZT1cImNoZWNrYm94XCJdJykudHJpZ2dlcignY2hhbmdlJyk7XG5cdFx0fSxcblx0XHR1c2VyOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdGNvcHlfdmFsdWVfY2JbJ3NlbGVjdCddKCAkc3JjLCAkZGVzdCApO1xuXHRcdH0sXG5cdFx0d3lzaXd5ZzogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyAuLi5cblx0XHRcdHZhciBpbml0X2NiID0gZnVuY3Rpb24oIGVkLCBpZCwgaW5pdCwgJGZpZWxkICkge1xuXHRcdFx0XHRpZiAoICRmaWVsZC5nZXQoMCkgPT09ICRkZXN0LmdldCgwKSApIHtcblx0XHRcdFx0XHR2YXIgc3JjRWQgPSB0aW55bWNlLmdldCggJHNyYy5maW5kKCd0ZXh0YXJlYScpLmF0dHIoJ2lkJykgKTtcblx0XHRcdFx0XHRpZiAoIHNyY0VkICkge1xuXHRcdFx0XHRcdFx0ZWQuc2V0Q29udGVudCggc3JjRWQuZ2V0Q29udGVudCgpICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHQvL1x0YWNmLnJlbW92ZV9hY3Rpb24oJ3d5c2l3eWdfdGlueW1jZV9pbml0JywgaW5pdF9jYiApOyAvLyBtaG1tbW1cblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdGFjZi5hZGRfYWN0aW9uKCd3eXNpd3lnX3RpbnltY2VfaW5pdCcsIGluaXRfY2IgKTtcblxuXHRcdFx0JGRlc3QuZmluZCgndGV4dGFyZWEnKS5odG1sKCAkc3JjLmZpbmQoJ3RleHRhcmVhJykuaHRtbCgpICk7XG5cdFx0fSxcblx0fTtcblxuXHQvKipcblx0ICpcdENvcHkgdmFsdWVzIGZyb20gb25lIGFjZi1maWVsZCB0byBhbm90aGVyXG5cdCAqXG5cdCAqXHRAcGFyYW0gJHNyYyBqUXVlcnkgb2JqZWN0IGhvbGRpbmcgdGhlIC5hY2YtZmllbGQgb2JqZWN0IHRvIGNvcHkgZnJvbVxuXHQgKlx0QHBhcmFtICRkZXN0IGpRdWVyeSBvYmplY3QgaG9sZGluZyB0aGUgLmFjZi1maWVsZCBvYmplY3QgdG8gY29weSB0b1xuXHQgKi9cblx0ZnVuY3Rpb24gY29weV92YWx1ZSggJHNyYywgJGRlc3QgKSB7XG5cdFx0dmFyICRzcmNJbnB1dCwgJGRlc3RJbnB1dCwgdHlwZTtcblxuXHRcdHR5cGUgPSAkc3JjLmF0dHIoJ2RhdGEtdHlwZScpO1xuXG5cdFx0aWYgKCAhIGNvcHlfdmFsdWVfY2JbIHR5cGUgXSApIHtcblx0XHRcdC8vIHRldCwgcmFuZ2UsIHVybCwgbnVtYmVyLFxuXHRcdFx0cmV0dXJuIGNvcHlfdmFsdWVfY2IuX2RlZmF1bHQoICRzcmMsICRkZXN0LCB0eXBlICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNvcHlfdmFsdWVfY2JbdHlwZV0oICRzcmMsICRkZXN0ICk7XG5cdH1cblxuXHQvKipcblx0ICpcdENvcHkgdmFsdWVzIGZyb20gb25lIHNldCBvZiBhY2YtZmllbGRzIHRvIGFub3RoZXIuXG5cdCAqXHRJdCBpcyBhc3N1bWVkIHRoYXQgYm90aCAkc3JjIGFkbiAkZGVzdCBoYXZlIGFuIGlkZW50aWNhbFxuXHQgKlxuXHQgKlx0QHBhcmFtICRzcmMgalF1ZXJ5IG9iamVjdCBjb250YWluaW5nIHRoZSAuYWNmLWZpZWxkIG9iamVjdHMgdG8gY29weSBmcm9tXG5cdCAqXHRAcGFyYW0gJGRlc3QgalF1ZXJ5IG9iamVjdCBjb250YWluaW5nIHRoZSAuYWNmLWZpZWxkIG9iamVjdCB0byBjb3B5IHRvXG5cdCAqXHRAcGFyYW0gX3NlbGVjdG9yIGNzcyBzZWxlY3RvciB0byBzZWxlY3QgLmFjZi1maWVsZHMgaW4gYm90aCAkc3JjIGFuZCAkZGVzdFxuXHQgKi9cblx0ZnVuY3Rpb24gY29weV92YWx1ZXMoICRzcmMsICRkZXN0LCBfc2VsZWN0b3IgKSB7XG5cdFx0dmFyIGZpZWxkX21hcFx0PSB7fSxcblx0XHRcdF9zZWxlY3RvciA9IF9zZWxlY3RvciB8fCAnPiAuYWNmLWZpZWxkLCA+IC5hY2YtZmllbGRzID4gLmFjZi1maWVsZCcsXG5cdFx0XHQkc291cmNlc1x0PSAkc3JjLmZpbmQoIF9zZWxlY3RvciApLFxuXHRcdFx0JGRlc3RzXHRcdD0gJGRlc3QuZmluZCggX3NlbGVjdG9yICk7XG5cblx0XHQkc291cmNlcy5lYWNoKCBmdW5jdGlvbiggaSwgZWwgKXtcblx0XHRcdGlmICggISAkZGVzdHNbaV0gKSB7XG5cdFx0XHRcdGNvbnNvbGUudHJhY2UoJ0Vycm9yOiBzb3VyY2UgZmllbGRzIGRvIG5vdCBtYXRjaCBkZXN0aW5hdGlvbiBmaWVsZHMnKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCAkKCAkc291cmNlc1tpXSApLmRhdGEoJ3R5cGUnKSAhPT0gJCgkZGVzdHNbaV0pLmRhdGEoJ3R5cGUnKSApIHtcblx0XHRcdFx0Y29uc29sZS50cmFjZSgnRXJyb3I6IHNvdXJjZSBmaWVsZCB0eXBlIGRvZXMgbm90IG1hdGNoIGRlc3RpbmF0aW9uIGZpZWxkIHR5cGUnKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0Y29weV92YWx1ZSggJCggJHNvdXJjZXNbaV0gKSwgJCgkZGVzdHNbaV0pICk7XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICpcdEV4dGVuZCBhY2YgZmxleGlibGUgY29udGVudCBmaWVsZFxuXHQgKi9cblx0YWNmLmZpZWxkcy5mbGV4aWJsZV9jb250ZW50ID0gYWNmLmZpZWxkcy5mbGV4aWJsZV9jb250ZW50LmV4dGVuZCh7XG5cdFx0ZXZlbnRzOiB7XG5cdFx0XHQnY2xpY2sgW2RhdGEtbmFtZT1cImR1cGxpY2F0ZS1sYXlvdXRcIl0nOiAnX2R1cGxpY2F0ZSdcblx0XHR9LFxuXHRcdHJlbmRlcjogZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciByZXQ7XG5cblx0XHRcdHJldCA9IG9yaWdfZmxleGlibGVfY29udGVudC5yZW5kZXIuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXG5cdFx0XHQvLyB1cGRhdGUgb3JkZXIgbnVtYmVyc1xuXHRcdFx0dGhpcy4kdmFsdWVzLmNoaWxkcmVuKCcubGF5b3V0JykuZWFjaChmdW5jdGlvbiggaSwgZWwgKXtcblx0XHRcdFx0aWYgKCAhICQodGhpcykuZmluZCgnW2RhdGEtbmFtZT1cImR1cGxpY2F0ZS1sYXlvdXRcIl0nKS5sZW5ndGggKSB7XG5cdFx0XHRcdFx0JCh0aGlzKS5maW5kKCcuYWNmLWZjLWxheW91dC1jb250cm9sbHMnKS5wcmVwZW5kKCBvcHRpb25zLmR1cGxpY2F0ZV9mbGV4aWJsZV9idG4gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fSxcblx0XHRfZHVwbGljYXRlOiBmdW5jdGlvbiggZSApIHtcblx0XHRcdHZhciBsYXlvdXQsXG5cdFx0XHRcdCRmaWVsZCxcblx0XHRcdFx0JGxheW91dCxcblx0XHRcdFx0JG5ld19sYXlvdXQ7XG5cblx0XHRcdC8vIGdldCBsYXlvdXQgd3JhcHBlclxuXHRcdFx0JGxheW91dCA9IGUuJGVsLmNsb3Nlc3QoJy5sYXlvdXQnKTtcblxuXHRcdFx0Ly8gZ2V0IGZsZXhpYmxlX2NvbnRlbnQgZmllbGRcblx0XHRcdCRmaWVsZCA9ICRsYXlvdXQuY2xvc2VzdCgnLmFjZi1maWVsZCcpO1xuXG5cdFx0XHQvLyBhY2Ygc2V0IGZpZWxkIGNvbnRlbnh0XG5cdFx0XHRhY2YuZmllbGRzLmZsZXhpYmxlX2NvbnRlbnQuc2V0KCAnJGZpZWxkJywgJGZpZWxkICk7XG5cblx0XHRcdC8vIGFjZiBhZGQgdGFyZ2V0IGxheW91dCBiZWZvcmUgc291cmNlIGxheW91dFxuXHRcdFx0YWNmLmZpZWxkcy5mbGV4aWJsZV9jb250ZW50LmFkZCggJGxheW91dC5kYXRhKCdsYXlvdXQnKSwgJGxheW91dCApO1xuXG5cdFx0XHQvLyBnZXQgdGhlIGFkZGVkIGxheW91dFxuXHRcdFx0JG5ld19sYXlvdXQgPSAkbGF5b3V0LnByZXYoICcubGF5b3V0JyApO1xuXG5cdFx0XHQvLyBjb3B5IHZhbHVlcyBmcm9tIHNvdXJjZSBsYXlvdXQgdG8gZGVzdGluYXRpb25cblx0XHRcdGNvcHlfdmFsdWVzKCAkbGF5b3V0LCAkbmV3X2xheW91dCwgJz4gLmFjZi10YWJsZSA+IHRib2R5ID4gLmFjZi1yb3cgPiAuYWNmLWZpZWxkLCA+IC5hY2YtZmllbGRzID4gLmFjZi1maWVsZCcgKTsgLy8gZXhjbHVkZSBjbG9uZXMhXG5cblx0XHR9XG5cdH0pO1xuXG5cdC8qKlxuXHQgKlx0RXh0ZW5kIGFjZiBmbGV4aWJsZSBjb250ZW50IGZpZWxkXG5cdCAqL1xuXHRhY2YuZmllbGRzLnJlcGVhdGVyID0gYWNmLmZpZWxkcy5yZXBlYXRlci5leHRlbmQoe1xuXHRcdGV2ZW50czoge1xuXHRcdFx0J2NsaWNrIGFbZGF0YS1ldmVudD1cImR1cGxpY2F0ZS1yb3dcIl0nOiAnX2R1cGxpY2F0ZSdcblx0XHR9LFxuXHRcdHJlbmRlcjogZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciByZXQ7XG5cblx0XHRcdHJldCA9IG9yaWdfcmVwZWF0ZXIucmVuZGVyLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblxuXHRcdFx0Ly8gYWRkIGR1cGxpY2F0ZSBidG5cblx0XHRcdHRoaXMuJHRib2R5LmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbihpKXtcblx0XHRcdFx0JCh0aGlzKS5maW5kKCc+IHRkLnJlbW92ZScpLmFwcGVuZCggb3B0aW9ucy5kdXBsaWNhdGVfcmVwZWF0ZXJfYnRuICk7XG5cdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIHJldDtcblx0XHR9LFxuXHRcdF9kdXBsaWNhdGU6IGZ1bmN0aW9uKCBlICkge1xuXG5cdFx0XHR2YXIgJHNvdXJjZSwgJGRlc3Q7XG5cblx0XHRcdC8vIGdldCBzb3VyY2Ugcm93XG5cdFx0XHRpZiggZS4kZWwuaGFzQ2xhc3MoJ2FjZi1pY29uJykgKSB7XG5cdFx0XHRcdCRzb3VyY2UgPSBlLiRlbC5jbG9zZXN0KCcuYWNmLXJvdycpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0Ly8gYWRkIGRlc3RpbmF0aW9uIHJvd1xuXHRcdFx0JGRlc3QgPSB0aGlzLmFkZCggJHNvdXJjZSApOyAvLyBhZGQgYmVmb3JlIHNvdXJjZSFcblxuXHRcdFx0Ly8gY29weSB2YWx1ZXMgZnJvbSBzb3VyY2Ugcm93IHRvIGRlc3RpbmF0aW9uXG5cdFx0XHRjb3B5X3ZhbHVlcyggJHNvdXJjZSwgJGRlc3QgKTtcblxuXHRcdFx0dGhpcy4kaW5wdXQudHJpZ2dlcignY2hhbmdlJyk7XG5cdFx0fSxcblx0fSk7XG5cblxufSkoalF1ZXJ5KVxuIl19
