!function(e){function t(e,t){var a;return a=e.attr("data-type"),i[a]?i[a](e,t):i._default(e,t,a)}function a(a,n,i){var i=i||"> .acf-field, > .acf-fields > .acf-field",f=a.find(i),c=n.find(i);f.each(function(a,n){return c[a]?e(f[a]).data("type")!==e(c[a]).data("type")?(console.trace("Error: source field type does not match destination field type"),!1):void t(e(f[a]),e(c[a])):(console.trace("Error: source fields do not match destination fields"),!1)})}var n=acf_duplicate_repeater.options,i={_default:function(t,a,n){var i=t.find('[type="'+n+'"]');a.find('[type="'+n+'"]').each(function(t,a){e(this).val(e(i[t]).val())})},button_group:function(t,a){var n=a.find('[type="radio"]');t.find('[type="radio"]').each(function(t,a){if(e(a).prop("checked"))return e(n[t]).trigger("click"),!1})},checkbox:function(t,a){var n=a.find('[type="checkbox"]');t.find('[type="checkbox"]').each(function(t,a){e(n[t]).prop("checked",e(a).prop("checked"))})},color_picker:function(e,t){i._default(e,t,"text"),i._default(e,t,"hidden")},date_picker:function(e,t){i._default(e,t,"text"),i._default(e,t,"hidden")},date_time_picker:function(e,t){i._default(e,t,"text"),i._default(e,t,"hidden")},file:function(e,t){var a=e.find(".acf-file-uploader"),n=t.find(".acf-file-uploader");i._default(e,t,"hidden"),a.hasClass("has-value")&&(n.find("div").first().html(a.find("div").first().html()),t.find(".acf-file-uploader").addClass("has-value"))},flexible_content:function(t,n){var i="> .acf-input > .acf-flexible-content > .values > .layout";acf.fields.flexible_content.set("$field",n),t.find(i).each(function(t,f){var c,d=e(f);acf.fields.flexible_content.add(d.data("layout")),c=n.find(i).last(),a(e(f),c,"> .acf-table > tbody > .acf-row > .acf-field, > .acf-fields > .acf-field")})},gallery:function(t,a){var n=t.find(".acf-gallery-attachments"),i=a.find(".acf-gallery-attachments"),f=a.find('input[type="hidden"]'),c=f.attr("name")+"[]";n.children().each(function(t,a){$clone=e(a).clone(),$clone.find('[type="hidden"]').attr("name",c),i.append($clone)})},google_map:function(e,t){i._default(e,t,"hidden")},group:function(e,t){a(e,t,"> .acf-input > .acf-table > tbody > .acf-row > .acf-field, > .acf-input > .acf-fields > .acf-field")},image:function(e,t){i._default(e,t,"hidden"),t.find("img").attr("src",e.find("img").attr("src")),e.find(".acf-image-uploader").hasClass("has-value")&&t.find(".acf-image-uploader").addClass("has-value")},link:function(e,t){var a=e.find(".link-node"),n=t.find(".link-node");n.html(a.html()),n.attr("href",a.attr("href")),n.attr("target",a.attr("target")),n.trigger("change")},oembed:function(e,t){t.find('[data-name="search-input"]').val(e.find('[type="hidden"]').val()).trigger("blur")},post_object:function(e,t){i.select(e,t)},radio:function(e,t){i.button_group(e,t),i._default(e,t,"text")},range:function(e,t){i._default(e,t,"range"),i._default(e,t,"number")},relationship:function(t,a){var n=a.find(".values > .list"),i=a.find(".acf-relationship").children('input[type="hidden"]'),f=i.attr("name")+"[]";t.find(".values > .list").children().each(function(t,a){var i=e(a).clone();i.find('[type="hidden"]').attr("name",f),n.append(i)}),i.trigger("change")},repeater:function(t,n){acf.fields.repeater.set("$field",n),t.find("> .acf-input > .acf-repeater > .acf-table > tbody > .acf-row:not(.acf-clone)").each(function(t,n){var i=acf.fields.repeater.add();a(e(n),i,"> .acf-field, > .acf-fields > .acf-field")})},select:function(t,a,n){n=n||" > .acf-input > select";var i=t.find(n),f=a.find(n);1*i.data("ui")&&(f.html(""),i.find("option").each(function(t,a){f.append(e(a).clone())})),$destOpts=f.find("option"),i.find("option").each(function(t,a){e($destOpts[t]).prop("selected",e(a).prop("selected"))})},taxonomy:function(e,t){i.radio(e,t),i.checkbox(e,t),i.select(e,t,"> .acf-input > .acf-taxonomy-field > select")},textarea:function(e,t){t.find("textarea").val(e.find("textarea").val())},time_picker:function(e,t){i._default(e,t,"text"),i._default(e,t,"hidden")},true_false:function(e,t){t.find('[type="checkbox"]').prop("checked",e.find('[type="checkbox"]').prop("checked")),t.find('[type="checkbox"]').trigger("change")},user:function(e,t){i.select(e,t)},wysiwyg:function(e,t){var a=function(a,n,i,f){if(f.get(0)===t.get(0)){var c=tinymce.get(e.find("textarea").attr("id"));c&&a.setContent(c.getContent())}};acf.add_action("wysiwyg_tinymce_init",a),t.find("textarea").html(e.find("textarea").html())}},f=function(t,a){var n=e.extend({},t);return e.each(a,function(a,i){if(console.log(a,t.hasOwnProperty(a)),void 0!==t[a]){if("events"===a)return void(t.events=e.extend(t.events,i));"function"==typeof i&&(n[a]=t[a])}t[a]=i}),t.parent=n,t};f(acf.models.FlexibleContentField.prototype,{events:{'click [data-name="duplicate-layout"]':"_duplicate"},render:function(){var t;return t=this.parent.render.apply(this,arguments),this.$el.find(".values [data-layout]").each(function(t,a){e(this).find('[data-name="duplicate-layout"]').length||e(this).find(".acf-fc-layout-controls").prepend(n.duplicate_flexible_btn)}),t},_duplicate:function(t){var n,i;n=e(t.target).closest(".layout"),console.log(this),n.closest(".acf-field"),this.add({layout:n.data("layout"),before:n}),i=n.prev(".layout"),a(n,i,"> .acf-table > tbody > .acf-row > .acf-field, > .acf-fields > .acf-field")}}),f(acf.models.RepeaterField.prototype,{events:{'click a[data-event="duplicate-row"]':"_duplicate"},render:function(){var t;return t=this.parent.render.apply(this,arguments),this.$tbody.children().each(function(t){e(this).find("> td.remove").append(n.duplicate_repeater_btn)}),t},_duplicate:function(e){var t,n;e.$el.hasClass("acf-icon")&&(t=e.$el.closest(".acf-row"),n=this.add(t),a(t,n),this.$input.trigger("change"))}})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcGVhdGVyLWR1cGxpY2F0ZS5qcyJdLCJuYW1lcyI6WyIkIiwiY29weV92YWx1ZSIsIiRzcmMiLCIkZGVzdCIsInR5cGUiLCJhdHRyIiwiY29weV92YWx1ZV9jYiIsIl9kZWZhdWx0IiwiY29weV92YWx1ZXMiLCJfc2VsZWN0b3IiLCIkc291cmNlcyIsImZpbmQiLCIkZGVzdHMiLCJlYWNoIiwiaSIsImVsIiwiZGF0YSIsImNvbnNvbGUiLCJ0cmFjZSIsIm9wdGlvbnMiLCJhY2ZfZHVwbGljYXRlX3JlcGVhdGVyIiwiJHNyY2VzIiwidGhpcyIsInZhbCIsImJ1dHRvbl9ncm91cCIsIiRkZXN0UmFkaW8iLCJwcm9wIiwidHJpZ2dlciIsImNoZWNrYm94IiwiJGRlc3RDQiIsImNvbG9yX3BpY2tlciIsImRhdGVfcGlja2VyIiwiZGF0ZV90aW1lX3BpY2tlciIsImZpbGUiLCIkc3JjVXBsIiwiJGRlc3RVcGwiLCJoYXNDbGFzcyIsImZpcnN0IiwiaHRtbCIsImFkZENsYXNzIiwiZmxleGlibGVfY29udGVudCIsInNlbGVjdG9yIiwiYWNmIiwiZmllbGRzIiwic2V0IiwibGF5b3V0IiwiJG5ld19sYXlvdXQiLCIkbGF5b3V0IiwiYWRkIiwibGFzdCIsImdhbGxlcnkiLCIkc3JjTGlzdCIsIiRkZXN0TGlzdCIsIiRpbnB1dCIsIm5hbWUiLCJjaGlsZHJlbiIsIiRjbG9uZSIsImNsb25lIiwiYXBwZW5kIiwiZ29vZ2xlX21hcCIsImdyb3VwIiwiaW1hZ2UiLCJsaW5rIiwiJHNyY05vZGUiLCIkZGVzdE5vZGUiLCJvZW1iZWQiLCJwb3N0X29iamVjdCIsInJhZGlvIiwicmFuZ2UiLCJyZWxhdGlvbnNoaXAiLCJyZXBlYXRlciIsInJvdyIsIiRuZXdfcm93Iiwic2VsZWN0IiwiJHNyY1NlbGVjdCIsIiRkZXN0U2VsZWN0IiwiJGRlc3RPcHRzIiwidGF4b25vbXkiLCJ0ZXh0YXJlYSIsInRpbWVfcGlja2VyIiwidHJ1ZV9mYWxzZSIsInVzZXIiLCJ3eXNpd3lnIiwiaW5pdF9jYiIsImVkIiwiaWQiLCJpbml0IiwiJGZpZWxkIiwiZ2V0Iiwic3JjRWQiLCJ0aW55bWNlIiwic2V0Q29udGVudCIsImdldENvbnRlbnQiLCJhZGRfYWN0aW9uIiwiX2V4dGVuZCIsIm9iaiIsImV4dGVuZCIsInBhcmVudCIsImsiLCJ2IiwibG9nIiwiaGFzT3duUHJvcGVydHkiLCJldmVudHMiLCJtb2RlbHMiLCJGbGV4aWJsZUNvbnRlbnRGaWVsZCIsInByb3RvdHlwZSIsImNsaWNrIFtkYXRhLW5hbWU9XCJkdXBsaWNhdGUtbGF5b3V0XCJdIiwicmVuZGVyIiwicmV0IiwiYXBwbHkiLCJhcmd1bWVudHMiLCIkZWwiLCJsZW5ndGgiLCJwcmVwZW5kIiwiZHVwbGljYXRlX2ZsZXhpYmxlX2J0biIsIl9kdXBsaWNhdGUiLCJlIiwidGFyZ2V0IiwiY2xvc2VzdCIsImJlZm9yZSIsInByZXYiLCJSZXBlYXRlckZpZWxkIiwiY2xpY2sgYVtkYXRhLWV2ZW50PVwiZHVwbGljYXRlLXJvd1wiXSIsIiR0Ym9keSIsImR1cGxpY2F0ZV9yZXBlYXRlcl9idG4iLCIkc291cmNlIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFVQSxHQTZNVCxRQUFTQyxHQUFZQyxFQUFNQyxHQUMxQixHQUEyQkMsRUFJM0IsT0FGQUEsR0FBT0YsRUFBS0csS0FBSyxhQUVWQyxFQUFlRixHQUtmRSxFQUFjRixHQUFPRixFQUFNQyxHQUgxQkcsRUFBY0MsU0FBVUwsRUFBTUMsRUFBT0MsR0FjOUMsUUFBU0ksR0FBYU4sRUFBTUMsRUFBT00sR0FDbEMsR0FDQ0EsR0FBWUEsR0FBYSwyQ0FDekJDLEVBQVdSLEVBQUtTLEtBQU1GLEdBQ3RCRyxFQUFVVCxFQUFNUSxLQUFNRixFQUV2QkMsR0FBU0csS0FBTSxTQUFVQyxFQUFHQyxHQUMzQixNQUFPSCxHQUFPRSxHQUlUZCxFQUFHVSxFQUFTSSxJQUFLRSxLQUFLLFVBQVloQixFQUFFWSxFQUFPRSxJQUFJRSxLQUFLLFNBQ3hEQyxRQUFRQyxNQUFNLG1FQUNQLE9BRVJq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RGhILEVBQUVzQixNQUFNWCxLQUFLLDJCQUEyQnNHLFFBQVM5RixFQUFRK0YsMEJBSXBETixHQUVSTyxXQUFZLFNBQVVDLEdBQ3JCLEdBRUNyRSxHQUNBRCxDQUdEQyxHQUFVL0MsRUFBRW9ILEVBQUVDLFFBQVFDLFFBQVEsV0FDakNyRyxRQUFRbUYsSUFBSTlFLE1BRUF5QixFQUFRdUUsUUFBUSxjQU16QmhHLEtBQUswQixLQUNKSCxPQUFVRSxFQUFRL0IsS0FBSyxVQUN2QnVHLE9BQVV4RSxJQUlYRCxFQUFjQyxFQUFReUUsS0FBTSxXQUc1QmhILEVBQWF1QyxFQUFTRCxFQUFhLCtFQVVwQ2dELEVBQVNwRCxJQUFJNkQsT0FBT2tCLGNBQWNoQixXQUNsQ0gsUUFDQ29CLHNDQUF1QyxjQUV4Q2YsT0FBUSxXQUVQLEdBQUlDLEVBU0osT0FQQUEsR0FBTXRGLEtBQUsyRSxPQUFPVSxPQUFPRSxNQUFPdkYsS0FBTXdGLFdBR3RDeEYsS0FBS3FHLE9BQU9wRSxXQUFXMUMsS0FBSyxTQUFTQyxHQUNwQ2QsRUFBRXNCLE1BQU1YLEtBQUssZUFBZStDLE9BQVF2QyxFQUFReUcsMEJBR3RDaEIsR0FFUk8sV0FBWSxTQUFVQyxHQUVyQixHQUFJUyxHQUFTMUgsQ0FHVGlILEdBQUVMLElBQUkzRSxTQUFTLGNBQ2xCeUYsRUFBVVQsRUFBRUwsSUFBSU8sUUFBUSxZQUt6Qm5ILEVBQVFtQixLQUFLMEIsSUFBSzZFLEdBR2xCckgsRUFBYXFILEVBQVMxSCxHQUV0Qm1CLEtBQUsrQixPQUFPMUIsUUFBUSxlQUtwQm1HIiwiZmlsZSI6InJlcGVhdGVyLWR1cGxpY2F0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigkKXtcblx0dmFyIG9wdGlvbnMgPSBhY2ZfZHVwbGljYXRlX3JlcGVhdGVyLm9wdGlvbnMsXG5cblxuXHRcdC8qKlxuXHRcdCAqXHR2YWx1ZSBjb3B5IGNhbGxiYWNrc1xuXHRcdCAqL1xuXHRcdGNvcHlfdmFsdWVfY2IgPSB7XG5cdFx0XHRfZGVmYXVsdDogZnVuY3Rpb24oICRzcmMsICRkZXN0LCB0eXBlICkgeyAvLyBPS0FZXG5cdFx0XHRcdHZhciAkc3JjZXMgPSAkc3JjLmZpbmQoJ1t0eXBlPVwiJyt0eXBlKydcIl0nKTtcblx0XHRcdFx0JGRlc3QuZmluZCgnW3R5cGU9XCInK3R5cGUrJ1wiXScpLmVhY2goZnVuY3Rpb24oaSxlbCl7XG5cdFx0XHRcdFx0JCh0aGlzKS52YWwoICQoICRzcmNlc1tpXSApLnZhbCgpICk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHR9LFxuXHRcdFx0YnV0dG9uX2dyb3VwOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdFx0dmFyICRkZXN0UmFkaW8gPSAkZGVzdC5maW5kKCdbdHlwZT1cInJhZGlvXCJdJyk7XG5cdFx0XHRcdCRzcmMuZmluZCgnW3R5cGU9XCJyYWRpb1wiXScpLmVhY2goIGZ1bmN0aW9uKGksZWwpIHtcblx0XHRcdFx0XHRpZiAoICQoZWwpLnByb3AoJ2NoZWNrZWQnKSApIHtcblx0XHRcdFx0XHRcdCQoICRkZXN0UmFkaW9baV0gKS50cmlnZ2VyKCdjbGljaycgKTtcblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSxcblx0XHRcdGNoZWNrYm94OiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdFx0dmFyICRkZXN0Q0IgPSAkZGVzdC5maW5kKCdbdHlwZT1cImNoZWNrYm94XCJdJyk7XG5cdFx0XHRcdCRzcmMuZmluZCgnW3R5cGU9XCJjaGVja2JveFwiXScpLmVhY2goIGZ1bmN0aW9uKGksZWwpIHtcblx0XHRcdFx0XHQkKCAkZGVzdENCW2ldICkucHJvcCgnY2hlY2tlZCcsICQoZWwpLnByb3AoJ2NoZWNrZWQnKSApO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0sXG5cdFx0XHRjb2xvcl9waWNrZXI6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCAndGV4dCcgKTtcblx0XHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwgJ2hpZGRlbicgKTtcblx0XHRcdH0sXG5cdFx0XHRkYXRlX3BpY2tlcjogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsICd0ZXh0JyApO1xuXHRcdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCAnaGlkZGVuJyApO1xuXHRcdFx0fSxcblx0XHRcdGRhdGVfdGltZV9waWNrZXI6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCAndGV4dCcgKTtcblx0XHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwgJ2hpZGRlbicgKTtcblx0XHRcdH0sXG5cdFx0XHRmaWxlOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdFx0dmFyICRzcmNVcGwgPSAkc3JjLmZpbmQoJy5hY2YtZmlsZS11cGxvYWRlcicpLFxuXHRcdFx0XHRcdCRkZXN0VXBsID0gJGRlc3QuZmluZCgnLmFjZi1maWxlLXVwbG9hZGVyJyk7XG5cblx0XHRcdFx0Ly8gc2V0IGhpZGRlblxuXHRcdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCAkc3JjLCAkZGVzdCwgJ2hpZGRlbicgKTtcblxuXHRcdFx0XHRpZiAoICRzcmNVcGwuaGFzQ2xhc3MoJ2hhcy12YWx1ZScpICkge1xuXHRcdFx0XHRcdCRkZXN0VXBsLmZpbmQoJ2RpdicpLmZpcnN0KCkuaHRtbCggJHNyY1VwbC5maW5kKCdkaXYnKS5maXJzdCgpLmh0bWwoKSApO1xuXHRcdFx0XHRcdCRkZXN0LmZpbmQoJy5hY2YtZmlsZS11cGxvYWRlcicpLmFkZENsYXNzKCdoYXMtdmFsdWUnKVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0ZmxleGlibGVfY29udGVudDogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkge1xuXHRcdFx0XHR2YXIgc2VsZWN0b3IgPSAnPiAuYWNmLWlucHV0ID4gLmFjZi1mbGV4aWJsZS1jb250ZW50ID4gLnZhbHVlcyA+IC5sYXlvdXQnO1xuXHRcdFx0XHRhY2YuZmllbGRzLmZsZXhpYmxlX2NvbnRlbnQuc2V0KCAnJGZpZWxkJywgJGRlc3QgKTtcblxuXHRcdFx0XHQkc3JjLmZpbmQoIHNlbGVjdG9yICkuZWFjaChmdW5jdGlvbihpLGxheW91dCl7XG5cdFx0XHRcdFx0Ly8gZWFjaCByZXBlYXRlciBlbnRyeS4uLiBmaW5kIGZpZWxkcyBpbiByZXBlYXRlciBlbnRyeVxuXHRcdFx0XHRcdHZhciAkbGF5b3V0ID0gJChsYXlvdXQpLFxuXHRcdFx0XHRcdFx0JG5ld19sYXlvdXQ7XG5cblx0XHRcdFx0XHRhY2YuZmllbGRzLmZsZXhpYmxlX2NvbnRlbnQuYWRkKCAkbGF5b3V0LmRhdGEoJ2xheW91dCcpICk7XG5cblx0XHRcdFx0XHQkbmV3X2xheW91dCA9ICRkZXN0LmZpbmQoIHNlbGVjdG9yICkubGFzdCgpO1xuXG5cdFx0XHRcdFx0Ly8gdGJsICsgYmxvY2sgKyByb3dcblx0XHRcdFx0XHRjb3B5X3ZhbHVlcyggJChsYXlvdXQpLCAkbmV3X2xheW91dCwgJz4gLmFjZi10YWJsZSA+IHRib2R5ID4gLmFjZi1yb3cgPiAuYWNmLWZpZWxkLCA+IC5hY2YtZmllbGRzID4gLmFjZi1maWVsZCcgKTsgLy8gZXhjbHVkZSBjbG9uZXMhXG5cblx0XHRcdFx0fSk7IC8vIHRhYmxlXG5cdFx0XHR9LFxuXHRcdFx0Z2FsbGVyeTogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRcdC8vIGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsICdoaWRkZW4nICk7XG5cdFx0XHRcdHZhciAkc3JjTGlzdCA9ICRzcmMuZmluZCgnLmFjZi1nYWxsZXJ5LWF0dGFjaG1lbnRzJyksXG5cdFx0XHRcdFx0JGRlc3RMaXN0ID0gJGRlc3QuZmluZCgnLmFjZi1nYWxsZXJ5LWF0dGFjaG1lbnRzJyksXG5cdFx0XHRcdFx0JGlucHV0ID0gJGRlc3QuZmluZCgnaW5wdXRbdHlwZT1cImhpZGRlblwiXScpLFxuXHRcdFx0XHRcdG5hbWUgPSAkaW5wdXQuYXR0cignbmFtZScpICsgJ1tdJztcblxuXHRcdFx0XHQkc3JjTGlzdC5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oaSxlbCl7XG5cdFx0XHRcdFx0JGNsb25lID0gJChlbCkuY2xvbmUoKTtcblx0XHRcdFx0XHQkY2xvbmUuZmluZCgnW3R5cGU9XCJoaWRkZW5cIl0nKS5hdHRyKCAnbmFtZScsIG5hbWUgKTtcblx0XHRcdFx0XHQkZGVzdExpc3QuYXBwZW5kKCRjbG9uZSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSxcblx0XHRcdGdvb2dsZV9tYXA6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCAnaGlkZGVuJyApO1xuXHRcdFx0fSxcblx0XHRcdGdyb3VwOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7XG5cdFx0XHRcdGNvcHlfdmFsdWVzKCAkc3JjLCAkZGVzdCwgJz4gLmFjZi1pbnB1dCA+IC5hY2YtdGFibGUgPiB0Ym9keSA+IC5hY2Ytcm93ID4gLmFjZi1maWVsZCwgPiAuYWNmLWlucHV0ID4gLmFjZi1maWVsZHMgPiAuYWNmLWZpZWxkJyApOyAvLyBleGNsdWRlIGNsb25lcyFcblx0XHRcdH0sXG5cdFx0XHRpbWFnZTogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRcdC8vIHNldCBoaWRkZW5cblx0XHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSggJHNyYywgJGRlc3QsICdoaWRkZW4nICk7XG5cdFx0XHRcdCRkZXN0LmZpbmQoJ2ltZycpLmF0dHIoJ3NyYycsICRzcmMuZmluZCgnaW1nJykuYXR0cignc3JjJykgKVxuXHRcdFx0XHRpZiAoICRzcmMuZmluZCgnLmFjZi1pbWFnZS11cGxvYWRlcicpLmhhc0NsYXNzKCdoYXMtdmFsdWUnKSApIHtcblx0XHRcdFx0XHQkZGVzdC5maW5kKCcuYWNmLWltYWdlLXVwbG9hZGVyJykuYWRkQ2xhc3MoJ2hhcy12YWx1ZScpXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRsaW5rOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdFx0dmFyICRzcmNOb2RlID0gJHNyYy5maW5kKCcubGluay1ub2RlJyksXG5cdFx0XHRcdFx0JGRlc3ROb2RlID0gJGRlc3QuZmluZCgnLmxpbmstbm9kZScpO1xuXG5cdFx0XHRcdCRkZXN0Tm9kZS5odG1sKCAkc3JjTm9kZS5odG1sKCkgKTtcblx0XHRcdFx0JGRlc3ROb2RlLmF0dHIoICdocmVmJywgJHNyY05vZGUuYXR0ciggJ2hyZWYnICkgKTtcblx0XHRcdFx0JGRlc3ROb2RlLmF0dHIoICd0YXJnZXQnLCAkc3JjTm9kZS5hdHRyKCAndGFyZ2V0JyApICk7XG5cblx0XHRcdFx0JGRlc3ROb2RlLnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdFx0fSxcblx0XHRcdG9lbWJlZDogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRcdCRkZXN0LmZpbmQoJ1tkYXRhLW5hbWU9XCJzZWFyY2gtaW5wdXRcIl0nKVxuXHRcdFx0XHRcdC52YWwoICRzcmMuZmluZCgnW3R5cGU9XCJoaWRkZW5cIl0nKS52YWwoKSApXG5cdFx0XHRcdFx0LnRyaWdnZXIoJ2JsdXInKTtcblx0XHRcdH0sXG5cdFx0XHRwb3N0X29iamVjdDogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRcdGNvcHlfdmFsdWVfY2JbJ3NlbGVjdCddKCRzcmMsICRkZXN0ICk7XG5cdFx0XHR9LFxuXHRcdFx0cmFkaW86IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0XHRjb3B5X3ZhbHVlX2NiWydidXR0b25fZ3JvdXAnXSgkc3JjLCAkZGVzdCk7XG5cdFx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsJ3RleHQnKTtcblx0XHRcdH0sXG5cdFx0XHRyYW5nZTogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsJ3JhbmdlJyk7XG5cdFx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsJ251bWJlcicpO1xuXHRcdFx0fSxcblx0XHRcdHJlbGF0aW9uc2hpcDogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRcdHZhciAkZGVzdExpc3QgPSAkZGVzdC5maW5kKCcudmFsdWVzID4gLmxpc3QnKSxcblx0XHRcdFx0XHQkaW5wdXQgPSAkZGVzdC5maW5kKCcuYWNmLXJlbGF0aW9uc2hpcCcpLmNoaWxkcmVuKCdpbnB1dFt0eXBlPVwiaGlkZGVuXCJdJyksXG5cdFx0XHRcdFx0bmFtZSA9ICRpbnB1dC5hdHRyKCduYW1lJykgKyAnW10nO1xuXG5cdFx0XHRcdCRzcmMuZmluZCgnLnZhbHVlcyA+IC5saXN0JykuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKGksZWwpe1xuXHRcdFx0XHRcdHZhciAkY2xvbmUgPSAkKGVsKS5jbG9uZSgpO1xuXHRcdFx0XHRcdCRjbG9uZS5maW5kKCdbdHlwZT1cImhpZGRlblwiXScpLmF0dHIoICduYW1lJywgbmFtZSApO1xuXHRcdFx0XHRcdCRkZXN0TGlzdC5hcHBlbmQoJGNsb25lKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdCRpbnB1dC50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0XHRcdH0sXG5cdFx0XHRyZXBlYXRlcjpmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7XG5cblx0XHRcdFx0YWNmLmZpZWxkcy5yZXBlYXRlci5zZXQoICckZmllbGQnLCAkZGVzdCApO1xuXHRcdFx0XHQkc3JjLmZpbmQoJz4gLmFjZi1pbnB1dCA+IC5hY2YtcmVwZWF0ZXIgPiAuYWNmLXRhYmxlID4gdGJvZHkgPiAuYWNmLXJvdzpub3QoLmFjZi1jbG9uZSknKS5lYWNoKGZ1bmN0aW9uKGkscm93KXtcblx0XHRcdFx0XHQvLyBlYWNoIHJlcGVhdGVyIGVudHJ5Li4uIGZpbmQgZmllbGRzIGluIHJlcGVhdGVyIGVudHJ5XG5cdFx0XHRcdFx0dmFyICRuZXdfcm93ID0gYWNmLmZpZWxkcy5yZXBlYXRlci5hZGQoKTtcblxuXHRcdFx0XHRcdGNvcHlfdmFsdWVzKCAkKHJvdyksICRuZXdfcm93LCAnPiAuYWNmLWZpZWxkLCA+IC5hY2YtZmllbGRzID4gLmFjZi1maWVsZCcgKTsgLy8gZXhjbHVkZSBjbG9uZXMhXG5cdFx0XHRcdH0pOyAvLyB0YWJsZVxuXHRcdFx0fSxcblx0XHRcdHNlbGVjdDogZnVuY3Rpb24oICRzcmMsICRkZXN0LCBfc2VsZWN0b3IgKSB7IC8vIE9LQVlcblx0XHRcdFx0X3NlbGVjdG9yID0gX3NlbGVjdG9yIHx8ICcgPiAuYWNmLWlucHV0ID4gc2VsZWN0Jztcblx0XHRcdFx0dmFyICRzcmNTZWxlY3QgPSAkc3JjLmZpbmQoIF9zZWxlY3RvciApLFxuXHRcdFx0XHRcdCRkZXN0U2VsZWN0ID0gJGRlc3QuZmluZCggX3NlbGVjdG9yICk7XG5cblx0XHRcdFx0aWYgKCAkc3JjU2VsZWN0LmRhdGEoJ3VpJykgKiAxICkge1xuXHRcdFx0XHRcdC8vIHNvcnQgJGRlc3QgbGlrZSAkc3JjXG5cdFx0XHRcdFx0JGRlc3RTZWxlY3QuaHRtbCgnJyk7XG5cdFx0XHRcdFx0JHNyY1NlbGVjdC5maW5kKCdvcHRpb24nKS5lYWNoKGZ1bmN0aW9uKGksZWwpe1xuXHRcdFx0XHRcdFx0JGRlc3RTZWxlY3QuYXBwZW5kKCQoZWwpLmNsb25lKCkpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCRkZXN0T3B0cyA9ICRkZXN0U2VsZWN0LmZpbmQoJ29wdGlvbicpO1xuXHRcdFx0XHQkc3JjU2VsZWN0LmZpbmQoJ29wdGlvbicpLmVhY2goZnVuY3Rpb24oaSxlbCkge1xuXHRcdFx0XHRcdCQoICRkZXN0T3B0c1tpXSApLnByb3AoJ3NlbGVjdGVkJywgJChlbCkucHJvcCgnc2VsZWN0ZWQnKSApO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0sXG5cdFx0XHR0YXhvbm9teTogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRcdGNvcHlfdmFsdWVfY2JbJ3JhZGlvJ10oJHNyYywgJGRlc3QpO1xuXHRcdFx0XHRjb3B5X3ZhbHVlX2NiWydjaGVja2JveCddKCRzcmMsICRkZXN0KTtcblx0XHRcdFx0Y29weV92YWx1ZV9jYlsnc2VsZWN0J10oJHNyYywgJGRlc3QsICc+IC5hY2YtaW5wdXQgPiAuYWNmLXRheG9ub215LWZpZWxkID4gc2VsZWN0JyApO1xuXHRcdFx0fSxcblx0XHRcdHRleHRhcmVhOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdFx0JGRlc3QuZmluZCgndGV4dGFyZWEnKS52YWwoICRzcmMuZmluZCgndGV4dGFyZWEnKS52YWwoKSApO1xuXHRcdFx0fSxcblx0XHRcdHRpbWVfcGlja2VyOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwgJ3RleHQnICk7XG5cdFx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsICdoaWRkZW4nICk7XG5cdFx0XHR9LFxuXHRcdFx0dHJ1ZV9mYWxzZTogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRcdCRkZXN0LmZpbmQoJ1t0eXBlPVwiY2hlY2tib3hcIl0nKS5wcm9wKCdjaGVja2VkJywgJHNyYy5maW5kKCdbdHlwZT1cImNoZWNrYm94XCJdJykucHJvcCgnY2hlY2tlZCcpICk7XG5cdFx0XHRcdCRkZXN0LmZpbmQoJ1t0eXBlPVwiY2hlY2tib3hcIl0nKS50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0XHRcdH0sXG5cdFx0XHR1c2VyOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdFx0Y29weV92YWx1ZV9jYlsnc2VsZWN0J10oICRzcmMsICRkZXN0ICk7XG5cdFx0XHR9LFxuXHRcdFx0d3lzaXd5ZzogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyAuLi5cblx0XHRcdFx0dmFyIGluaXRfY2IgPSBmdW5jdGlvbiggZWQsIGlkLCBpbml0LCAkZmllbGQgKSB7XG5cdFx0XHRcdFx0aWYgKCAkZmllbGQuZ2V0KDApID09PSAkZGVzdC5nZXQoMCkgKSB7XG5cdFx0XHRcdFx0XHR2YXIgc3JjRWQgPSB0aW55bWNlLmdldCggJHNyYy5maW5kKCd0ZXh0YXJlYScpLmF0dHIoJ2lkJykgKTtcblx0XHRcdFx0XHRcdGlmICggc3JjRWQgKSB7XG5cdFx0XHRcdFx0XHRcdGVkLnNldENvbnRlbnQoIHNyY0VkLmdldENvbnRlbnQoKSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vXHRhY2YucmVtb3ZlX2FjdGlvbignd3lzaXd5Z190aW55bWNlX2luaXQnLCBpbml0X2NiICk7IC8vIG1obW1tbVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdFx0YWNmLmFkZF9hY3Rpb24oJ3d5c2l3eWdfdGlueW1jZV9pbml0JywgaW5pdF9jYiApO1xuXG5cdFx0XHRcdCRkZXN0LmZpbmQoJ3RleHRhcmVhJykuaHRtbCggJHNyYy5maW5kKCd0ZXh0YXJlYScpLmh0bWwoKSApO1xuXHRcdFx0fSxcblx0XHR9O1xuXG5cdC8qKlxuXHQgKlx0Q29weSB2YWx1ZXMgZnJvbSBvbmUgYWNmLWZpZWxkIHRvIGFub3RoZXJcblx0ICpcblx0ICpcdEBwYXJhbSAkc3JjIGpRdWVyeSBvYmplY3QgaG9sZGluZyB0aGUgLmFjZi1maWVsZCBvYmplY3QgdG8gY29weSBmcm9tXG5cdCAqXHRAcGFyYW0gJGRlc3QgalF1ZXJ5IG9iamVjdCBob2xkaW5nIHRoZSAuYWNmLWZpZWxkIG9iamVjdCB0byBjb3B5IHRvXG5cdCAqL1xuXHRmdW5jdGlvbiBjb3B5X3ZhbHVlKCAkc3JjLCAkZGVzdCApIHtcblx0XHR2YXIgJHNyY0lucHV0LCAkZGVzdElucHV0LCB0eXBlO1xuXG5cdFx0dHlwZSA9ICRzcmMuYXR0cignZGF0YS10eXBlJyk7XG5cblx0XHRpZiAoICEgY29weV92YWx1ZV9jYlsgdHlwZSBdICkge1xuXHRcdFx0Ly8gdGV0LCByYW5nZSwgdXJsLCBudW1iZXIsXG5cdFx0XHRyZXR1cm4gY29weV92YWx1ZV9jYi5fZGVmYXVsdCggJHNyYywgJGRlc3QsIHR5cGUgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gY29weV92YWx1ZV9jYlt0eXBlXSggJHNyYywgJGRlc3QgKTtcblx0fVxuXG5cdC8qKlxuXHQgKlx0Q29weSB2YWx1ZXMgZnJvbSBvbmUgc2V0IG9mIGFjZi1maWVsZHMgdG8gYW5vdGhlci5cblx0ICpcdEl0IGlzIGFzc3VtZWQgdGhhdCBib3RoICRzcmMgYWRuICRkZXN0IGhhdmUgYW4gaWRlbnRpY2FsXG5cdCAqXG5cdCAqXHRAcGFyYW0gJHNyYyBqUXVlcnkgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIC5hY2YtZmllbGQgb2JqZWN0cyB0byBjb3B5IGZyb21cblx0ICpcdEBwYXJhbSAkZGVzdCBqUXVlcnkgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIC5hY2YtZmllbGQgb2JqZWN0IHRvIGNvcHkgdG9cblx0ICpcdEBwYXJhbSBfc2VsZWN0b3IgY3NzIHNlbGVjdG9yIHRvIHNlbGVjdCAuYWNmLWZpZWxkcyBpbiBib3RoICRzcmMgYW5kICRkZXN0XG5cdCAqL1xuXHRmdW5jdGlvbiBjb3B5X3ZhbHVlcyggJHNyYywgJGRlc3QsIF9zZWxlY3RvciApIHtcblx0XHR2YXIgZmllbGRfbWFwXHQ9IHt9LFxuXHRcdFx0X3NlbGVjdG9yID0gX3NlbGVjdG9yIHx8ICc+IC5hY2YtZmllbGQsID4gLmFjZi1maWVsZHMgPiAuYWNmLWZpZWxkJyxcblx0XHRcdCRzb3VyY2VzXHQ9ICRzcmMuZmluZCggX3NlbGVjdG9yICksXG5cdFx0XHQkZGVzdHNcdFx0PSAkZGVzdC5maW5kKCBfc2VsZWN0b3IgKTtcblxuXHRcdCRzb3VyY2VzLmVhY2goIGZ1bmN0aW9uKCBpLCBlbCApe1xuXHRcdFx0aWYgKCAhICRkZXN0c1tpXSApIHtcblx0XHRcdFx0Y29uc29sZS50cmFjZSgnRXJyb3I6IHNvdXJjZSBmaWVsZHMgZG8gbm90IG1hdGNoIGRlc3RpbmF0aW9uIGZpZWxkcycpO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRpZiAoICQoICRzb3VyY2VzW2ldICkuZGF0YSgndHlwZScpICE9PSAkKCRkZXN0c1tpXSkuZGF0YSgndHlwZScpICkge1xuXHRcdFx0XHRjb25zb2xlLnRyYWNlKCdFcnJvcjogc291cmNlIGZpZWxkIHR5cGUgZG9lcyBub3QgbWF0Y2ggZGVzdGluYXRpb24gZmllbGQgdHlwZScpO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRjb3B5X3ZhbHVlKCAkKCAkc291cmNlc1tpXSApLCAkKCRkZXN0c1tpXSkgKTtcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKlx0RXh0ZW5kIGFjZiBmbGV4aWJsZSBjb250ZW50IGZpZWxkXG5cdCAqL1xuXG5cdHZhciBfZXh0ZW5kID0gZnVuY3Rpb24ob2JqLGV4dGVuZCkge1xuXHRcdHZhciBwYXJlbnQgPSAkLmV4dGVuZCh7fSxvYmopO1xuXHRcdCQuZWFjaChleHRlbmQsZnVuY3Rpb24oayx2KSB7XG5cdFx0XHRjb25zb2xlLmxvZyhrLG9iai5oYXNPd25Qcm9wZXJ0eShrKSlcblx0XHRcdGlmICggJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBvYmpba10gKSB7XG5cdFx0XHRcdGlmICggJ2V2ZW50cycgPT09IGsgKSB7XG5cdFx0XHRcdFx0b2JqLmV2ZW50cyA9ICQuZXh0ZW5kKCBvYmouZXZlbnRzLCB2ICk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9IGVsc2UgaWYgKCAnZnVuY3Rpb24nID09PSB0eXBlb2YgdiApIHtcblx0XHRcdFx0XHRwYXJlbnRba10gPSBvYmpba107IC8vXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdG9ialtrXSA9IHY7XG5cdFx0fSk7XG5cdFx0b2JqLnBhcmVudCA9IHBhcmVudDtcblx0XHRyZXR1cm4gb2JqO1xuXHR9XG5cblx0X2V4dGVuZCggYWNmLm1vZGVscy5GbGV4aWJsZUNvbnRlbnRGaWVsZC5wcm90b3R5cGUsIHtcblx0XHRldmVudHM6IHtcblx0XHRcdCdjbGljayBbZGF0YS1uYW1lPVwiZHVwbGljYXRlLWxheW91dFwiXSc6ICdfZHVwbGljYXRlJ1xuXHRcdH0sXG5cdFx0cmVuZGVyOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIHJldDtcblxuXHRcdFx0cmV0ID0gdGhpcy5wYXJlbnQucmVuZGVyLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblxuXHRcdFx0Ly8gYWRkIGR1cGxpY2F0ZSBidG5cblx0XHRcdHRoaXMuJGVsLmZpbmQoJy52YWx1ZXMgW2RhdGEtbGF5b3V0XScpLmVhY2goZnVuY3Rpb24oIGksIGVsICl7XG5cdFx0XHRcdGlmICggISAkKHRoaXMpLmZpbmQoJ1tkYXRhLW5hbWU9XCJkdXBsaWNhdGUtbGF5b3V0XCJdJykubGVuZ3RoICkge1xuXHRcdFx0XHRcdCQodGhpcykuZmluZCgnLmFjZi1mYy1sYXlvdXQtY29udHJvbHMnKS5wcmVwZW5kKCBvcHRpb25zLmR1cGxpY2F0ZV9mbGV4aWJsZV9idG4gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fSxcblx0XHRfZHVwbGljYXRlOiBmdW5jdGlvbiggZSApIHtcblx0XHRcdHZhciBsYXlvdXQsXG5cdFx0XHRcdCRmaWVsZCxcblx0XHRcdFx0JGxheW91dCxcblx0XHRcdFx0JG5ld19sYXlvdXQ7XG5cblx0XHRcdC8vIGdldCBsYXlvdXQgd3JhcHBlclxuXHRcdFx0JGxheW91dCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5sYXlvdXQnKTtcbmNvbnNvbGUubG9nKHRoaXMpXG5cdFx0XHQvLyBnZXQgZmxleGlibGVfY29udGVudCBmaWVsZFxuXHRcdFx0JGZpZWxkID0gJGxheW91dC5jbG9zZXN0KCcuYWNmLWZpZWxkJyk7XG5cblx0XHRcdC8vIGFjZiBzZXQgZmllbGQgY29udGVueHRcblx0XHRcdC8vYWNmLmZpZWxkcy5mbGV4aWJsZV9jb250ZW50LnNldCggJyRmaWVsZCcsICRmaWVsZCApO1xuXG5cdFx0XHQvLyBhY2YgYWRkIHRhcmdldCBsYXlvdXQgYmVmb3JlIHNvdXJjZSBsYXlvdXRcblx0XHRcdHRoaXMuYWRkKCB7XG5cdFx0XHRcdCdsYXlvdXQnOiAkbGF5b3V0LmRhdGEoJ2xheW91dCcpLFxuXHRcdFx0XHQnYmVmb3JlJzogJGxheW91dCxcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBnZXQgdGhlIGFkZGVkIGxheW91dFxuXHRcdFx0JG5ld19sYXlvdXQgPSAkbGF5b3V0LnByZXYoICcubGF5b3V0JyApO1xuXG5cdFx0XHQvLyBjb3B5IHZhbHVlcyBmcm9tIHNvdXJjZSBsYXlvdXQgdG8gZGVzdGluYXRpb25cblx0XHRcdGNvcHlfdmFsdWVzKCAkbGF5b3V0LCAkbmV3X2xheW91dCwgJz4gLmFjZi10YWJsZSA+IHRib2R5ID4gLmFjZi1yb3cgPiAuYWNmLWZpZWxkLCA+IC5hY2YtZmllbGRzID4gLmFjZi1maWVsZCcgKTsgLy8gZXhjbHVkZSBjbG9uZXMhXG5cblx0XHR9XG5cdH0pO1xuXG5cdC8vYWNmLmZpZWxkcy5mbGV4aWJsZV9jb250ZW50ID0gYWNmLmZpZWxkcy5mbGV4aWJsZV9jb250ZW50LmV4dGVuZCgpO1xuXG5cdC8qKlxuXHQgKlx0RXh0ZW5kIGFjZiBmbGV4aWJsZSBjb250ZW50IGZpZWxkXG5cdCAqL1xuXHQgX2V4dGVuZCggYWNmLm1vZGVscy5SZXBlYXRlckZpZWxkLnByb3RvdHlwZSwge1xuXHRcdGV2ZW50czoge1xuXHRcdFx0J2NsaWNrIGFbZGF0YS1ldmVudD1cImR1cGxpY2F0ZS1yb3dcIl0nOiAnX2R1cGxpY2F0ZSdcblx0XHR9LFxuXHRcdHJlbmRlcjogZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciByZXQ7XG5cblx0XHRcdHJldCA9IHRoaXMucGFyZW50LnJlbmRlci5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cblx0XHRcdC8vIGFkZCBkdXBsaWNhdGUgYnRuXG5cdFx0XHR0aGlzLiR0Ym9keS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oaSl7XG5cdFx0XHRcdCQodGhpcykuZmluZCgnPiB0ZC5yZW1vdmUnKS5hcHBlbmQoIG9wdGlvbnMuZHVwbGljYXRlX3JlcGVhdGVyX2J0biApO1xuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fSxcblx0XHRfZHVwbGljYXRlOiBmdW5jdGlvbiggZSApIHtcblxuXHRcdFx0dmFyICRzb3VyY2UsICRkZXN0O1xuXG5cdFx0XHQvLyBnZXQgc291cmNlIHJvd1xuXHRcdFx0aWYoIGUuJGVsLmhhc0NsYXNzKCdhY2YtaWNvbicpICkge1xuXHRcdFx0XHQkc291cmNlID0gZS4kZWwuY2xvc2VzdCgnLmFjZi1yb3cnKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdC8vIGFkZCBkZXN0aW5hdGlvbiByb3dcblx0XHRcdCRkZXN0ID0gdGhpcy5hZGQoICRzb3VyY2UgKTsgLy8gYWRkIGJlZm9yZSBzb3VyY2UhXG5cblx0XHRcdC8vIGNvcHkgdmFsdWVzIGZyb20gc291cmNlIHJvdyB0byBkZXN0aW5hdGlvblxuXHRcdFx0Y29weV92YWx1ZXMoICRzb3VyY2UsICRkZXN0ICk7XG5cblx0XHRcdHRoaXMuJGlucHV0LnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdH0sXG5cdH0pO1xuXG5cbn0pKGpRdWVyeSlcbiJdfQ==
