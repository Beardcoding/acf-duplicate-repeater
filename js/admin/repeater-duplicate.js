!function(e){function t(e,t){var a;return a=e.attr("data-type"),c[a]?c[a](e,t):c._default(e,t,a)}function a(a,n,i){var i=i||"> .acf-field, > .acf-fields > .acf-field",f=a.find(i),c=n.find(i);f.each(function(a,n){return c[a]?e(f[a]).data("type")!==e(c[a]).data("type")?(console.trace("Error: source field type does not match destination field type"),!1):void t(e(f[a]),e(c[a])):(console.trace("Error: source fields do not match destination fields"),!1)})}var n=acf_duplicate_repeater.options,i=e.extend({},acf.fields.repeater),f=e.extend({},acf.fields.flexible_content),c={_default:function(t,a,n){var i=t.find('[type="'+n+'"]');a.find('[type="'+n+'"]').each(function(t,a){e(this).val(e(i[t]).val())})},button_group:function(t,a){var n=a.find('[type="radio"]');t.find('[type="radio"]').each(function(t,a){if(e(a).prop("checked"))return e(n[t]).trigger("click"),!1})},checkbox:function(t,a){var n=a.find('[type="checkbox"]');t.find('[type="checkbox"]').each(function(t,a){e(n[t]).prop("checked",e(a).prop("checked"))})},color_picker:function(e,t){c._default(e,t,"text"),c._default(e,t,"hidden")},date_picker:function(e,t){c._default(e,t,"text"),c._default(e,t,"hidden")},date_time_picker:function(e,t){c._default(e,t,"text"),c._default(e,t,"hidden")},file:function(e,t){var a=e.find(".acf-file-uploader"),n=t.find(".acf-file-uploader");c._default(e,t,"hidden"),a.hasClass("has-value")&&(n.find("div").first().html(a.find("div").first().html()),t.find(".acf-file-uploader").addClass("has-value"))},flexible_content:function(t,n){var i="> .acf-input > .acf-flexible-content > .values > .layout";acf.fields.flexible_content.set("$field",n),t.find(i).each(function(t,f){var c,d=e(f);acf.fields.flexible_content.add(d.data("layout")),c=n.find(i).last(),a(e(f),c,"> .acf-table > tbody > .acf-row > .acf-field, > .acf-fields > .acf-field")})},gallery:function(t,a){var n=t.find(".acf-gallery-attachments"),i=a.find(".acf-gallery-attachments"),f=a.find('input[type="hidden"]'),c=f.attr("name")+"[]";n.children().each(function(t,a){$clone=e(a).clone(),$clone.find('[type="hidden"]').attr("name",c),i.append($clone)})},google_map:function(e,t){c._default(e,t,"hidden")},group:function(e,t){a(e,t,"> .acf-input > .acf-table > tbody > .acf-row > .acf-field, > .acf-input > .acf-fields > .acf-field")},image:function(e,t){c._default(e,t,"hidden"),t.find("img").attr("src",e.find("img").attr("src")),e.find(".acf-image-uploader").hasClass("has-value")&&t.find(".acf-image-uploader").addClass("has-value")},link:function(e,t){var a=e.find(".link-node"),n=t.find(".link-node");n.html(a.html()),n.attr("href",a.attr("href")),n.attr("target",a.attr("target")),n.trigger("change")},oembed:function(e,t){t.find('[data-name="search-input"]').val(e.find('[type="hidden"]').val()).trigger("blur")},post_object:function(e,t){c.select(e,t)},radio:function(e,t){c.button_group(e,t),c._default(e,t,"text")},range:function(e,t){c._default(e,t,"range"),c._default(e,t,"number")},relationship:function(t,a){var n=a.find(".values > .list"),i=a.find(".acf-relationship").children('input[type="hidden"]'),f=i.attr("name")+"[]";t.find(".values > .list").children().each(function(t,a){var i=e(a).clone();i.find('[type="hidden"]').attr("name",f),n.append(i)}),i.trigger("change")},repeater:function(t,n){acf.fields.repeater.set("$field",n),t.find("> .acf-input > .acf-repeater > .acf-table > tbody > .acf-row:not(.acf-clone)").each(function(t,n){var i=acf.fields.repeater.add();a(e(n),i,"> .acf-field, > .acf-fields > .acf-field")})},select:function(t,a,n){n=n||" > .acf-input > select";var i=t.find(n),f=a.find(n);1*i.data("ui")&&(f.html(""),i.find("option").each(function(t,a){f.append(e(a).clone())})),$destOpts=f.find("option"),i.find("option").each(function(t,a){e($destOpts[t]).prop("selected",e(a).prop("selected"))})},taxonomy:function(e,t){c.radio(e,t),c.checkbox(e,t),c.select(e,t,"> .acf-input > .acf-taxonomy-field > select")},textarea:function(e,t){t.find("textarea").val(e.find("textarea").val())},time_picker:function(e,t){c._default(e,t,"text"),c._default(e,t,"hidden")},true_false:function(e,t){t.find('[type="checkbox"]').prop("checked",e.find('[type="checkbox"]').prop("checked")),t.find('[type="checkbox"]').trigger("change")},user:function(e,t){c.select(e,t)},wysiwyg:function(e,t){var a=function(a,n,i,f){if(f.get(0)===t.get(0)){var c=tinymce.get(e.find("textarea").attr("id"));c&&a.setContent(c.getContent())}};acf.add_action("wysiwyg_tinymce_init",a),t.find("textarea").html(e.find("textarea").html())}};acf.fields.flexible_content=acf.fields.flexible_content.extend({events:{'click [data-name="duplicate-layout"]':"_duplicate"},render:function(){var t;return t=f.render.apply(this,arguments),this.$values.children(".layout").each(function(t,a){e(this).find('[data-name="duplicate-layout"]').length||e(this).find(".acf-fc-layout-controlls").prepend(n.duplicate_flexible_btn)}),t},_duplicate:function(e){var t,n,i;n=e.$el.closest(".layout"),t=n.closest(".acf-field"),acf.fields.flexible_content.set("$field",t),acf.fields.flexible_content.add(n.data("layout"),n),i=n.prev(".layout"),a(n,i,"> .acf-table > tbody > .acf-row > .acf-field, > .acf-fields > .acf-field")}}),acf.fields.repeater=acf.fields.repeater.extend({events:{'click a[data-event="duplicate-row"]':"_duplicate"},render:function(){var t;return t=i.render.apply(this,arguments),this.$tbody.children().each(function(t){e(this).find("> td.remove").append(n.duplicate_repeater_btn)}),t},_duplicate:function(e){var t,n;e.$el.hasClass("acf-icon")&&(t=e.$el.closest(".acf-row"),n=this.add(t),a(t,n))}})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcGVhdGVyLWR1cGxpY2F0ZS5qcyJdLCJuYW1lcyI6WyIkIiwiY29weV92YWx1ZSIsIiRzcmMiLCIkZGVzdCIsInR5cGUiLCJhdHRyIiwiY29weV92YWx1ZV9jYiIsIl9kZWZhdWx0IiwiY29weV92YWx1ZXMiLCJfc2VsZWN0b3IiLCIkc291cmNlcyIsImZpbmQiLCIkZGVzdHMiLCJlYWNoIiwiaSIsImVsIiwiZGF0YSIsImNvbnNvbGUiLCJ0cmFjZSIsIm9wdGlvbnMiLCJhY2ZfZHVwbGljYXRlX3JlcGVhdGVyIiwib3JpZ19yZXBlYXRlciIsImV4dGVuZCIsImFjZiIsImZpZWxkcyIsInJlcGVhdGVyIiwib3JpZ19mbGV4aWJsZV9jb250ZW50IiwiZmxleGlibGVfY29udGVudCIsIiRzcmNlcyIsInRoaXMiLCJ2YWwiLCJidXR0b25fZ3JvdXAiLCIkZGVzdFJhZGlvIiwicHJvcCIsInRyaWdnZXIiLCJjaGVja2JveCIsIiRkZXN0Q0IiLCJjb2xvcl9waWNrZXIiLCJkYXRlX3BpY2tlciIsImRhdGVfdGltZV9waWNrZXIiLCJmaWxlIiwiJHNyY1VwbCIsIiRkZXN0VXBsIiwiaGFzQ2xhc3MiLCJmaXJzdCIsImh0bWwiLCJhZGRDbGFzcyIsInNlbGVjdG9yIiwic2V0IiwibGF5b3V0IiwiJG5ld19sYXlvdXQiLCIkbGF5b3V0IiwiYWRkIiwibGFzdCIsImdhbGxlcnkiLCIkc3JjTGlzdCIsIiRkZXN0TGlzdCIsIiRpbnB1dCIsIm5hbWUiLCJjaGlsZHJlbiIsIiRjbG9uZSIsImNsb25lIiwiYXBwZW5kIiwiZ29vZ2xlX21hcCIsImdyb3VwIiwiaW1hZ2UiLCJsaW5rIiwiJHNyY05vZGUiLCIkZGVzdE5vZGUiLCJvZW1iZWQiLCJwb3N0X29iamVjdCIsInJhZGlvIiwicmFuZ2UiLCJyZWxhdGlvbnNoaXAiLCJyb3ciLCIkbmV3X3JvdyIsInNlbGVjdCIsIiRzcmNTZWxlY3QiLCIkZGVzdFNlbGVjdCIsIiRkZXN0T3B0cyIsInRheG9ub215IiwidGV4dGFyZWEiLCJ0aW1lX3BpY2tlciIsInRydWVfZmFsc2UiLCJ1c2VyIiwid3lzaXd5ZyIsImluaXRfY2IiLCJlZCIsImlkIiwiaW5pdCIsIiRmaWVsZCIsImdldCIsInNyY0VkIiwidGlueW1jZSIsInNldENvbnRlbnQiLCJnZXRDb250ZW50IiwiYWRkX2FjdGlvbiIsImV2ZW50cyIsImNsaWNrIFtkYXRhLW5hbWU9XCJkdXBsaWNhdGUtbGF5b3V0XCJdIiwicmVuZGVyIiwicmV0IiwiYXBwbHkiLCJhcmd1bWVudHMiLCIkdmFsdWVzIiwibGVuZ3RoIiwicHJlcGVuZCIsImR1cGxpY2F0ZV9mbGV4aWJsZV9idG4iLCJfZHVwbGljYXRlIiwiZSIsIiRlbCIsImNsb3Nlc3QiLCJwcmV2IiwiY2xpY2sgYVtkYXRhLWV2ZW50PVwiZHVwbGljYXRlLXJvd1wiXSIsIiR0Ym9keSIsImR1cGxpY2F0ZV9yZXBlYXRlcl9idG4iLCIkc291cmNlIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFVQSxHQStNVCxRQUFTQyxHQUFZQyxFQUFNQyxHQUMxQixHQUEyQkMsRUFJM0IsT0FGQUEsR0FBT0YsRUFBS0csS0FBSyxhQUVWQyxFQUFlRixHQUtmRSxFQUFjRixHQUFPRixFQUFNQyxHQUgxQkcsRUFBY0MsU0FBVUwsRUFBTUMsRUFBT0MsR0FjOUMsUUFBU0ksR0FBYU4sRUFBTUMsRUFBT00sR0FDbEMsR0FDQ0EsR0FBWUEsR0FBYSwyQ0FDekJDLEVBQVdSLEVBQUtTLEtBQU1GLEdBQ3RCRyxFQUFVVCxFQUFNUSxLQUFNRixFQUV2QkMsR0FBU0csS0FBTSxTQUFVQyxFQUFHQyxHQUMzQixNQUFPSCxHQUFPRSxHQUlUZCxFQUFHVSxFQUFTSSxJQUFLRSxLQUFLLFVBQVloQixFQUFFWSxFQUFPRSxJQUFJRSxLQUFLLFNBQ3hEQyxRQUFRQyxNQUFNLG1FQUNQLE9BRVJqQixHQUFZRCxFQUFHVSxFQUFTSSxJQUFNZCxFQUFFWSxFQUFPRSxNQVB0Q0csUUFBUUMsTUFBTSx5REFDUCxLQTVPVixHQUFJQyxHQUFVQyx1QkFB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U0QsRUFBYSwrRUFRckMzQixJQUFJQyxPQUFPQyxTQUFXRixJQUFJQyxPQUFPQyxTQUFTSCxRQUN6QzJFLFFBQ0NlLHNDQUF1QyxjQUV4Q2IsT0FBUSxXQUVQLEdBQUlDLEVBU0osT0FQQUEsR0FBTS9FLEVBQWM4RSxPQUFPRSxNQUFPeEUsS0FBTXlFLFdBR3hDekUsS0FBS29GLE9BQU90RCxXQUFXOUMsS0FBSyxTQUFTQyxHQUNwQ2QsRUFBRTZCLE1BQU1sQixLQUFLLGVBQWVtRCxPQUFRM0MsRUFBUStGLDBCQUd0Q2QsR0FFUk8sV0FBWSxTQUFVQyxHQUVyQixHQUFJTyxHQUFTaEgsQ0FHVHlHLEdBQUVDLElBQUlsRSxTQUFTLGNBQ2xCd0UsRUFBVVAsRUFBRUMsSUFBSUMsUUFBUSxZQUt6QjNHLEVBQVEwQixLQUFLdUIsSUFBSytELEdBR2xCM0csRUFBYTJHLEVBQVNoSCxRQU10QmlIIiwiZmlsZSI6InJlcGVhdGVyLWR1cGxpY2F0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigkKXtcblx0dmFyIG9wdGlvbnMgPSBhY2ZfZHVwbGljYXRlX3JlcGVhdGVyLm9wdGlvbnMsXG5cblx0XHRvcmlnX3JlcGVhdGVyID0gJC5leHRlbmQoIHt9LCBhY2YuZmllbGRzLnJlcGVhdGVyICksXG5cdFx0b3JpZ19mbGV4aWJsZV9jb250ZW50ID0gJC5leHRlbmQoIHt9LCBhY2YuZmllbGRzLmZsZXhpYmxlX2NvbnRlbnQgKSxcblxuXHRcdC8qKlxuXHRcdCAqXHR2YWx1ZSBjb3B5IGNhbGxiYWNrc1xuXHRcdCAqL1xuXHRcdGNvcHlfdmFsdWVfY2IgPSB7XG5cdFx0X2RlZmF1bHQ6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCwgdHlwZSApIHsgLy8gT0tBWVxuXHRcdFx0dmFyICRzcmNlcyA9ICRzcmMuZmluZCgnW3R5cGU9XCInK3R5cGUrJ1wiXScpO1xuXHRcdFx0JGRlc3QuZmluZCgnW3R5cGU9XCInK3R5cGUrJ1wiXScpLmVhY2goZnVuY3Rpb24oaSxlbCl7XG5cdFx0XHRcdCQodGhpcykudmFsKCAkKCAkc3JjZXNbaV0gKS52YWwoKSApO1xuXHRcdFx0fSk7XG5cblx0XHR9LFxuXHRcdGJ1dHRvbl9ncm91cDogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHR2YXIgJGRlc3RSYWRpbyA9ICRkZXN0LmZpbmQoJ1t0eXBlPVwicmFkaW9cIl0nKTtcblx0XHRcdCRzcmMuZmluZCgnW3R5cGU9XCJyYWRpb1wiXScpLmVhY2goIGZ1bmN0aW9uKGksZWwpIHtcblx0XHRcdFx0aWYgKCAkKGVsKS5wcm9wKCdjaGVja2VkJykgKSB7XG5cdFx0XHRcdFx0JCggJGRlc3RSYWRpb1tpXSApLnRyaWdnZXIoJ2NsaWNrJyApO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRjaGVja2JveDogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHR2YXIgJGRlc3RDQiA9ICRkZXN0LmZpbmQoJ1t0eXBlPVwiY2hlY2tib3hcIl0nKTtcblx0XHRcdCRzcmMuZmluZCgnW3R5cGU9XCJjaGVja2JveFwiXScpLmVhY2goIGZ1bmN0aW9uKGksZWwpIHtcblx0XHRcdFx0JCggJGRlc3RDQltpXSApLnByb3AoJ2NoZWNrZWQnLCAkKGVsKS5wcm9wKCdjaGVja2VkJykgKTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0Y29sb3JfcGlja2VyOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsICd0ZXh0JyApO1xuXHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwgJ2hpZGRlbicgKTtcblx0XHR9LFxuXHRcdGRhdGVfcGlja2VyOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsICd0ZXh0JyApO1xuXHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwgJ2hpZGRlbicgKTtcblx0XHR9LFxuXHRcdGRhdGVfdGltZV9waWNrZXI6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwgJ3RleHQnICk7XG5cdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCAnaGlkZGVuJyApO1xuXHRcdH0sXG5cdFx0ZmlsZTogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHR2YXIgJHNyY1VwbCA9ICRzcmMuZmluZCgnLmFjZi1maWxlLXVwbG9hZGVyJyksXG5cdFx0XHRcdCRkZXN0VXBsID0gJGRlc3QuZmluZCgnLmFjZi1maWxlLXVwbG9hZGVyJyk7XG5cblx0XHRcdC8vIHNldCBoaWRkZW5cblx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oICRzcmMsICRkZXN0LCAnaGlkZGVuJyApO1xuXG5cdFx0XHRpZiAoICRzcmNVcGwuaGFzQ2xhc3MoJ2hhcy12YWx1ZScpICkge1xuXHRcdFx0XHQkZGVzdFVwbC5maW5kKCdkaXYnKS5maXJzdCgpLmh0bWwoICRzcmNVcGwuZmluZCgnZGl2JykuZmlyc3QoKS5odG1sKCkgKTtcblx0XHRcdFx0JGRlc3QuZmluZCgnLmFjZi1maWxlLXVwbG9hZGVyJykuYWRkQ2xhc3MoJ2hhcy12YWx1ZScpXG5cdFx0XHR9XG5cdFx0fSxcblx0XHRmbGV4aWJsZV9jb250ZW50OiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7XG5cdFx0XHR2YXIgc2VsZWN0b3IgPSAnPiAuYWNmLWlucHV0ID4gLmFjZi1mbGV4aWJsZS1jb250ZW50ID4gLnZhbHVlcyA+IC5sYXlvdXQnO1xuXHRcdFx0YWNmLmZpZWxkcy5mbGV4aWJsZV9jb250ZW50LnNldCggJyRmaWVsZCcsICRkZXN0ICk7XG5cblx0XHRcdCRzcmMuZmluZCggc2VsZWN0b3IgKS5lYWNoKGZ1bmN0aW9uKGksbGF5b3V0KXtcblx0XHRcdFx0Ly8gZWFjaCByZXBlYXRlciBlbnRyeS4uLiBmaW5kIGZpZWxkcyBpbiByZXBlYXRlciBlbnRyeVxuXHRcdFx0XHR2YXIgJGxheW91dCA9ICQobGF5b3V0KSxcblx0XHRcdFx0XHQkbmV3X2xheW91dDtcblxuXHRcdFx0XHRhY2YuZmllbGRzLmZsZXhpYmxlX2NvbnRlbnQuYWRkKCAkbGF5b3V0LmRhdGEoJ2xheW91dCcpICk7XG5cblx0XHRcdFx0JG5ld19sYXlvdXQgPSAkZGVzdC5maW5kKCBzZWxlY3RvciApLmxhc3QoKTtcblxuXHRcdFx0XHQvLyB0YmwgKyBibG9jayArIHJvd1xuXHRcdFx0XHRjb3B5X3ZhbHVlcyggJChsYXlvdXQpLCAkbmV3X2xheW91dCwgJz4gLmFjZi10YWJsZSA+IHRib2R5ID4gLmFjZi1yb3cgPiAuYWNmLWZpZWxkLCA+IC5hY2YtZmllbGRzID4gLmFjZi1maWVsZCcgKTsgLy8gZXhjbHVkZSBjbG9uZXMhXG5cblx0XHRcdH0pOyAvLyB0YWJsZVxuXHRcdH0sXG5cdFx0Z2FsbGVyeTogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHQvLyBjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCAnaGlkZGVuJyApO1xuXHRcdFx0dmFyICRzcmNMaXN0ID0gJHNyYy5maW5kKCcuYWNmLWdhbGxlcnktYXR0YWNobWVudHMnKSxcblx0XHRcdFx0JGRlc3RMaXN0ID0gJGRlc3QuZmluZCgnLmFjZi1nYWxsZXJ5LWF0dGFjaG1lbnRzJyksXG5cdFx0XHRcdCRpbnB1dCA9ICRkZXN0LmZpbmQoJ2lucHV0W3R5cGU9XCJoaWRkZW5cIl0nKSxcblx0XHRcdFx0bmFtZSA9ICRpbnB1dC5hdHRyKCduYW1lJykgKyAnW10nO1xuXG5cdFx0XHQkc3JjTGlzdC5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oaSxlbCl7XG5cdFx0XHRcdCRjbG9uZSA9ICQoZWwpLmNsb25lKCk7XG5cdFx0XHRcdCRjbG9uZS5maW5kKCdbdHlwZT1cImhpZGRlblwiXScpLmF0dHIoICduYW1lJywgbmFtZSApO1xuXHRcdFx0XHQkZGVzdExpc3QuYXBwZW5kKCRjbG9uZSk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGdvb2dsZV9tYXA6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwgJ2hpZGRlbicgKTtcblx0XHR9LFxuXHRcdGdyb3VwOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7XG5cdFx0XHRjb3B5X3ZhbHVlcyggJHNyYywgJGRlc3QsICc+IC5hY2YtaW5wdXQgPiAuYWNmLXRhYmxlID4gdGJvZHkgPiAuYWNmLXJvdyA+IC5hY2YtZmllbGQsID4gLmFjZi1pbnB1dCA+IC5hY2YtZmllbGRzID4gLmFjZi1maWVsZCcgKTsgLy8gZXhjbHVkZSBjbG9uZXMhXG5cdFx0fSxcblx0XHRpbWFnZTogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHQvLyBzZXQgaGlkZGVuXG5cdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCAkc3JjLCAkZGVzdCwgJ2hpZGRlbicgKTtcblx0XHRcdCRkZXN0LmZpbmQoJ2ltZycpLmF0dHIoJ3NyYycsICRzcmMuZmluZCgnaW1nJykuYXR0cignc3JjJykgKVxuXHRcdFx0aWYgKCAkc3JjLmZpbmQoJy5hY2YtaW1hZ2UtdXBsb2FkZXInKS5oYXNDbGFzcygnaGFzLXZhbHVlJykgKSB7XG5cdFx0XHRcdCRkZXN0LmZpbmQoJy5hY2YtaW1hZ2UtdXBsb2FkZXInKS5hZGRDbGFzcygnaGFzLXZhbHVlJylcblx0XHRcdH1cblx0XHR9LFxuXHRcdGxpbms6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0dmFyICRzcmNOb2RlID0gJHNyYy5maW5kKCcubGluay1ub2RlJyksXG5cdFx0XHRcdCRkZXN0Tm9kZSA9ICRkZXN0LmZpbmQoJy5saW5rLW5vZGUnKTtcblxuXHRcdFx0JGRlc3ROb2RlLmh0bWwoICRzcmNOb2RlLmh0bWwoKSApO1xuXHRcdFx0JGRlc3ROb2RlLmF0dHIoICdocmVmJywgJHNyY05vZGUuYXR0ciggJ2hyZWYnICkgKTtcblx0XHRcdCRkZXN0Tm9kZS5hdHRyKCAndGFyZ2V0JywgJHNyY05vZGUuYXR0ciggJ3RhcmdldCcgKSApO1xuXG5cdFx0XHQkZGVzdE5vZGUudHJpZ2dlcignY2hhbmdlJyk7XG5cdFx0fSxcblx0XHRvZW1iZWQ6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0JGRlc3QuZmluZCgnW2RhdGEtbmFtZT1cInNlYXJjaC1pbnB1dFwiXScpXG5cdFx0XHRcdC52YWwoICRzcmMuZmluZCgnW3R5cGU9XCJoaWRkZW5cIl0nKS52YWwoKSApXG5cdFx0XHRcdC50cmlnZ2VyKCdibHVyJyk7XG5cdFx0fSxcblx0XHRwb3N0X29iamVjdDogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRjb3B5X3ZhbHVlX2NiWydzZWxlY3QnXSgkc3JjLCAkZGVzdCApO1xuXHRcdH0sXG5cdFx0cmFkaW86IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0Y29weV92YWx1ZV9jYlsnYnV0dG9uX2dyb3VwJ10oJHNyYywgJGRlc3QpO1xuXHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwndGV4dCcpO1xuXHRcdH0sXG5cdFx0cmFuZ2U6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwncmFuZ2UnKTtcblx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsJ251bWJlcicpO1xuXHRcdH0sXG5cdFx0cmVsYXRpb25zaGlwOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdHZhciAkZGVzdExpc3QgPSAkZGVzdC5maW5kKCcudmFsdWVzID4gLmxpc3QnKSxcblx0XHRcdFx0JGlucHV0ID0gJGRlc3QuZmluZCgnLmFjZi1yZWxhdGlvbnNoaXAnKS5jaGlsZHJlbignaW5wdXRbdHlwZT1cImhpZGRlblwiXScpLFxuXHRcdFx0XHRuYW1lID0gJGlucHV0LmF0dHIoJ25hbWUnKSArICdbXSc7XG5cblx0XHRcdCRzcmMuZmluZCgnLnZhbHVlcyA+IC5saXN0JykuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKGksZWwpe1xuXHRcdFx0XHR2YXIgJGNsb25lID0gJChlbCkuY2xvbmUoKTtcblx0XHRcdFx0JGNsb25lLmZpbmQoJ1t0eXBlPVwiaGlkZGVuXCJdJykuYXR0ciggJ25hbWUnLCBuYW1lICk7XG5cdFx0XHRcdCRkZXN0TGlzdC5hcHBlbmQoJGNsb25lKTtcblx0XHRcdH0pO1xuXHRcdFx0JGlucHV0LnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdH0sXG5cdFx0cmVwZWF0ZXI6ZnVuY3Rpb24oICRzcmMsICRkZXN0ICkge1xuXG5cdFx0XHRhY2YuZmllbGRzLnJlcGVhdGVyLnNldCggJyRmaWVsZCcsICRkZXN0ICk7XG5cdFx0XHQkc3JjLmZpbmQoJz4gLmFjZi1pbnB1dCA+IC5hY2YtcmVwZWF0ZXIgPiAuYWNmLXRhYmxlID4gdGJvZHkgPiAuYWNmLXJvdzpub3QoLmFjZi1jbG9uZSknKS5lYWNoKGZ1bmN0aW9uKGkscm93KXtcblx0XHRcdFx0Ly8gZWFjaCByZXBlYXRlciBlbnRyeS4uLiBmaW5kIGZpZWxkcyBpbiByZXBlYXRlciBlbnRyeVxuXHRcdFx0XHR2YXIgJG5ld19yb3cgPSBhY2YuZmllbGRzLnJlcGVhdGVyLmFkZCgpO1xuXG5cdFx0XHRcdGNvcHlfdmFsdWVzKCAkKHJvdyksICRuZXdfcm93LCAnPiAuYWNmLWZpZWxkLCA+IC5hY2YtZmllbGRzID4gLmFjZi1maWVsZCcgKTsgLy8gZXhjbHVkZSBjbG9uZXMhXG5cdFx0XHR9KTsgLy8gdGFibGVcblx0XHR9LFxuXHRcdHNlbGVjdDogZnVuY3Rpb24oICRzcmMsICRkZXN0LCBfc2VsZWN0b3IgKSB7IC8vIE9LQVlcblx0XHRcdF9zZWxlY3RvciA9IF9zZWxlY3RvciB8fCAnID4gLmFjZi1pbnB1dCA+IHNlbGVjdCc7XG5cdFx0XHR2YXIgJHNyY1NlbGVjdCA9ICRzcmMuZmluZCggX3NlbGVjdG9yICksXG5cdFx0XHRcdCRkZXN0U2VsZWN0ID0gJGRlc3QuZmluZCggX3NlbGVjdG9yICk7XG5cblx0XHRcdGlmICggJHNyY1NlbGVjdC5kYXRhKCd1aScpICogMSApIHtcblx0XHRcdFx0Ly8gc29ydCAkZGVzdCBsaWtlICRzcmNcblx0XHRcdFx0JGRlc3RTZWxlY3QuaHRtbCgnJyk7XG5cdFx0XHRcdCRzcmNTZWxlY3QuZmluZCgnb3B0aW9uJykuZWFjaChmdW5jdGlvbihpLGVsKXtcblx0XHRcdFx0XHQkZGVzdFNlbGVjdC5hcHBlbmQoJChlbCkuY2xvbmUoKSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0JGRlc3RPcHRzID0gJGRlc3RTZWxlY3QuZmluZCgnb3B0aW9uJyk7XG5cdFx0XHQkc3JjU2VsZWN0LmZpbmQoJ29wdGlvbicpLmVhY2goZnVuY3Rpb24oaSxlbCkge1xuXHRcdFx0XHQkKCAkZGVzdE9wdHNbaV0gKS5wcm9wKCdzZWxlY3RlZCcsICQoZWwpLnByb3AoJ3NlbGVjdGVkJykgKTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0dGF4b25vbXk6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0Y29weV92YWx1ZV9jYlsncmFkaW8nXSgkc3JjLCAkZGVzdCk7XG5cdFx0XHRjb3B5X3ZhbHVlX2NiWydjaGVja2JveCddKCRzcmMsICRkZXN0KTtcblx0XHRcdGNvcHlfdmFsdWVfY2JbJ3NlbGVjdCddKCRzcmMsICRkZXN0LCAnPiAuYWNmLWlucHV0ID4gLmFjZi10YXhvbm9teS1maWVsZCA+IHNlbGVjdCcgKTtcblx0XHR9LFxuXHRcdHRleHRhcmVhOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdCRkZXN0LmZpbmQoJ3RleHRhcmVhJykudmFsKCAkc3JjLmZpbmQoJ3RleHRhcmVhJykudmFsKCkgKTtcblx0XHR9LFxuXHRcdHRpbWVfcGlja2VyOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsICd0ZXh0JyApO1xuXHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwgJ2hpZGRlbicgKTtcblx0XHR9LFxuXHRcdHRydWVfZmFsc2U6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0JGRlc3QuZmluZCgnW3R5cGU9XCJjaGVja2JveFwiXScpLnByb3AoJ2NoZWNrZWQnLCAkc3JjLmZpbmQoJ1t0eXBlPVwiY2hlY2tib3hcIl0nKS5wcm9wKCdjaGVja2VkJykgKTtcblx0XHRcdCRkZXN0LmZpbmQoJ1t0eXBlPVwiY2hlY2tib3hcIl0nKS50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0XHR9LFxuXHRcdHVzZXI6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0Y29weV92YWx1ZV9jYlsnc2VsZWN0J10oICRzcmMsICRkZXN0ICk7XG5cdFx0fSxcblx0XHR3eXNpd3lnOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIC4uLlxuXHRcdFx0dmFyIGluaXRfY2IgPSBmdW5jdGlvbiggZWQsIGlkLCBpbml0LCAkZmllbGQgKSB7XG5cdFx0XHRcdGlmICggJGZpZWxkLmdldCgwKSA9PT0gJGRlc3QuZ2V0KDApICkge1xuXHRcdFx0XHRcdHZhciBzcmNFZCA9IHRpbnltY2UuZ2V0KCAkc3JjLmZpbmQoJ3RleHRhcmVhJykuYXR0cignaWQnKSApO1xuXHRcdFx0XHRcdGlmICggc3JjRWQgKSB7XG5cdFx0XHRcdFx0XHRlZC5zZXRDb250ZW50KCBzcmNFZC5nZXRDb250ZW50KCkgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdC8vXHRhY2YucmVtb3ZlX2FjdGlvbignd3lzaXd5Z190aW55bWNlX2luaXQnLCBpbml0X2NiICk7IC8vIG1obW1tbVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0YWNmLmFkZF9hY3Rpb24oJ3d5c2l3eWdfdGlueW1jZV9pbml0JywgaW5pdF9jYiApO1xuXG5cdFx0XHQkZGVzdC5maW5kKCd0ZXh0YXJlYScpLmh0bWwoICRzcmMuZmluZCgndGV4dGFyZWEnKS5odG1sKCkgKTtcblx0XHR9LFxuXHR9O1xuXG5cdC8qKlxuXHQgKlx0Q29weSB2YWx1ZXMgZnJvbSBvbmUgYWNmLWZpZWxkIHRvIGFub3RoZXJcblx0ICpcblx0ICpcdEBwYXJhbSAkc3JjIGpRdWVyeSBvYmplY3QgaG9sZGluZyB0aGUgLmFjZi1maWVsZCBvYmplY3QgdG8gY29weSBmcm9tXG5cdCAqXHRAcGFyYW0gJGRlc3QgalF1ZXJ5IG9iamVjdCBob2xkaW5nIHRoZSAuYWNmLWZpZWxkIG9iamVjdCB0byBjb3B5IHRvXG5cdCAqL1xuXHRmdW5jdGlvbiBjb3B5X3ZhbHVlKCAkc3JjLCAkZGVzdCApIHtcblx0XHR2YXIgJHNyY0lucHV0LCAkZGVzdElucHV0LCB0eXBlO1xuXG5cdFx0dHlwZSA9ICRzcmMuYXR0cignZGF0YS10eXBlJyk7XG5cblx0XHRpZiAoICEgY29weV92YWx1ZV9jYlsgdHlwZSBdICkge1xuXHRcdFx0Ly8gdGV0LCByYW5nZSwgdXJsLCBudW1iZXIsXG5cdFx0XHRyZXR1cm4gY29weV92YWx1ZV9jYi5fZGVmYXVsdCggJHNyYywgJGRlc3QsIHR5cGUgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gY29weV92YWx1ZV9jYlt0eXBlXSggJHNyYywgJGRlc3QgKTtcblx0fVxuXG5cdC8qKlxuXHQgKlx0Q29weSB2YWx1ZXMgZnJvbSBvbmUgc2V0IG9mIGFjZi1maWVsZHMgdG8gYW5vdGhlci5cblx0ICpcdEl0IGlzIGFzc3VtZWQgdGhhdCBib3RoICRzcmMgYWRuICRkZXN0IGhhdmUgYW4gaWRlbnRpY2FsXG5cdCAqXG5cdCAqXHRAcGFyYW0gJHNyYyBqUXVlcnkgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIC5hY2YtZmllbGQgb2JqZWN0cyB0byBjb3B5IGZyb21cblx0ICpcdEBwYXJhbSAkZGVzdCBqUXVlcnkgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIC5hY2YtZmllbGQgb2JqZWN0IHRvIGNvcHkgdG9cblx0ICpcdEBwYXJhbSBfc2VsZWN0b3IgY3NzIHNlbGVjdG9yIHRvIHNlbGVjdCAuYWNmLWZpZWxkcyBpbiBib3RoICRzcmMgYW5kICRkZXN0XG5cdCAqL1xuXHRmdW5jdGlvbiBjb3B5X3ZhbHVlcyggJHNyYywgJGRlc3QsIF9zZWxlY3RvciApIHtcblx0XHR2YXIgZmllbGRfbWFwXHQ9IHt9LFxuXHRcdFx0X3NlbGVjdG9yID0gX3NlbGVjdG9yIHx8ICc+IC5hY2YtZmllbGQsID4gLmFjZi1maWVsZHMgPiAuYWNmLWZpZWxkJyxcblx0XHRcdCRzb3VyY2VzXHQ9ICRzcmMuZmluZCggX3NlbGVjdG9yICksXG5cdFx0XHQkZGVzdHNcdFx0PSAkZGVzdC5maW5kKCBfc2VsZWN0b3IgKTtcblxuXHRcdCRzb3VyY2VzLmVhY2goIGZ1bmN0aW9uKCBpLCBlbCApe1xuXHRcdFx0aWYgKCAhICRkZXN0c1tpXSApIHtcblx0XHRcdFx0Y29uc29sZS50cmFjZSgnRXJyb3I6IHNvdXJjZSBmaWVsZHMgZG8gbm90IG1hdGNoIGRlc3RpbmF0aW9uIGZpZWxkcycpO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRpZiAoICQoICRzb3VyY2VzW2ldICkuZGF0YSgndHlwZScpICE9PSAkKCRkZXN0c1tpXSkuZGF0YSgndHlwZScpICkge1xuXHRcdFx0XHRjb25zb2xlLnRyYWNlKCdFcnJvcjogc291cmNlIGZpZWxkIHR5cGUgZG9lcyBub3QgbWF0Y2ggZGVzdGluYXRpb24gZmllbGQgdHlwZScpO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRjb3B5X3ZhbHVlKCAkKCAkc291cmNlc1tpXSApLCAkKCRkZXN0c1tpXSkgKTtcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKlx0RXh0ZW5kIGFjZiBmbGV4aWJsZSBjb250ZW50IGZpZWxkXG5cdCAqL1xuXHRhY2YuZmllbGRzLmZsZXhpYmxlX2NvbnRlbnQgPSBhY2YuZmllbGRzLmZsZXhpYmxlX2NvbnRlbnQuZXh0ZW5kKHtcblx0XHRldmVudHM6IHtcblx0XHRcdCdjbGljayBbZGF0YS1uYW1lPVwiZHVwbGljYXRlLWxheW91dFwiXSc6ICdfZHVwbGljYXRlJ1xuXHRcdH0sXG5cdFx0cmVuZGVyOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIHJldDtcblxuXHRcdFx0cmV0ID0gb3JpZ19mbGV4aWJsZV9jb250ZW50LnJlbmRlci5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cblx0XHRcdC8vIHVwZGF0ZSBvcmRlciBudW1iZXJzXG5cdFx0XHR0aGlzLiR2YWx1ZXMuY2hpbGRyZW4oJy5sYXlvdXQnKS5lYWNoKGZ1bmN0aW9uKCBpLCBlbCApe1xuXHRcdFx0XHRpZiAoICEgJCh0aGlzKS5maW5kKCdbZGF0YS1uYW1lPVwiZHVwbGljYXRlLWxheW91dFwiXScpLmxlbmd0aCApIHtcblx0XHRcdFx0XHQkKHRoaXMpLmZpbmQoJy5hY2YtZmMtbGF5b3V0LWNvbnRyb2xscycpLnByZXBlbmQoIG9wdGlvbnMuZHVwbGljYXRlX2ZsZXhpYmxlX2J0biApO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIHJldDtcblx0XHR9LFxuXHRcdF9kdXBsaWNhdGU6IGZ1bmN0aW9uKCBlICkge1xuXHRcdFx0dmFyIGxheW91dCxcblx0XHRcdFx0JGZpZWxkLFxuXHRcdFx0XHQkbGF5b3V0LFxuXHRcdFx0XHQkbmV3X2xheW91dDtcblxuXHRcdFx0Ly8gZ2V0IGxheW91dCB3cmFwcGVyXG5cdFx0XHQkbGF5b3V0ID0gZS4kZWwuY2xvc2VzdCgnLmxheW91dCcpO1xuXG5cdFx0XHQvLyBnZXQgZmxleGlibGVfY29udGVudCBmaWVsZFxuXHRcdFx0JGZpZWxkID0gJGxheW91dC5jbG9zZXN0KCcuYWNmLWZpZWxkJyk7XG5cblx0XHRcdC8vIGFjZiBzZXQgZmllbGQgY29udGVueHRcblx0XHRcdGFjZi5maWVsZHMuZmxleGlibGVfY29udGVudC5zZXQoICckZmllbGQnLCAkZmllbGQgKTtcblxuXHRcdFx0Ly8gYWNmIGFkZCB0YXJnZXQgbGF5b3V0IGJlZm9yZSBzb3VyY2UgbGF5b3V0XG5cdFx0XHRhY2YuZmllbGRzLmZsZXhpYmxlX2NvbnRlbnQuYWRkKCAkbGF5b3V0LmRhdGEoJ2xheW91dCcpLCAkbGF5b3V0ICk7XG5cblx0XHRcdC8vIGdldCB0aGUgYWRkZWQgbGF5b3V0XG5cdFx0XHQkbmV3X2xheW91dCA9ICRsYXlvdXQucHJldiggJy5sYXlvdXQnICk7XG5cblx0XHRcdC8vIGNvcHkgdmFsdWVzIGZyb20gc291cmNlIGxheW91dCB0byBkZXN0aW5hdGlvblxuXHRcdFx0Y29weV92YWx1ZXMoICRsYXlvdXQsICRuZXdfbGF5b3V0LCAnPiAuYWNmLXRhYmxlID4gdGJvZHkgPiAuYWNmLXJvdyA+IC5hY2YtZmllbGQsID4gLmFjZi1maWVsZHMgPiAuYWNmLWZpZWxkJyApOyAvLyBleGNsdWRlIGNsb25lcyFcblxuXHRcdH1cblx0fSk7XG5cblx0LyoqXG5cdCAqXHRFeHRlbmQgYWNmIGZsZXhpYmxlIGNvbnRlbnQgZmllbGRcblx0ICovXG5cdGFjZi5maWVsZHMucmVwZWF0ZXIgPSBhY2YuZmllbGRzLnJlcGVhdGVyLmV4dGVuZCh7XG5cdFx0ZXZlbnRzOiB7XG5cdFx0XHQnY2xpY2sgYVtkYXRhLWV2ZW50PVwiZHVwbGljYXRlLXJvd1wiXSc6ICdfZHVwbGljYXRlJ1xuXHRcdH0sXG5cdFx0cmVuZGVyOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIHJldDtcblxuXHRcdFx0cmV0ID0gb3JpZ19yZXBlYXRlci5yZW5kZXIuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXG5cdFx0XHQvLyBhZGQgZHVwbGljYXRlIGJ0blxuXHRcdFx0dGhpcy4kdGJvZHkuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKGkpe1xuXHRcdFx0XHQkKHRoaXMpLmZpbmQoJz4gdGQucmVtb3ZlJykuYXBwZW5kKCBvcHRpb25zLmR1cGxpY2F0ZV9yZXBlYXRlcl9idG4gKTtcblx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH0sXG5cdFx0X2R1cGxpY2F0ZTogZnVuY3Rpb24oIGUgKSB7XG5cblx0XHRcdHZhciAkc291cmNlLCAkZGVzdDtcblxuXHRcdFx0Ly8gZ2V0IHNvdXJjZSByb3dcblx0XHRcdGlmKCBlLiRlbC5oYXNDbGFzcygnYWNmLWljb24nKSApIHtcblx0XHRcdFx0JHNvdXJjZSA9IGUuJGVsLmNsb3Nlc3QoJy5hY2Ytcm93Jyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHQvLyBhZGQgZGVzdGluYXRpb24gcm93XG5cdFx0XHQkZGVzdCA9IHRoaXMuYWRkKCAkc291cmNlICk7IC8vIGFkZCBiZWZvcmUgc291cmNlIVxuXG5cdFx0XHQvLyBjb3B5IHZhbHVlcyBmcm9tIHNvdXJjZSByb3cgdG8gZGVzdGluYXRpb25cblx0XHRcdGNvcHlfdmFsdWVzKCAkc291cmNlLCAkZGVzdCApO1xuXG5cdFx0fSxcblx0fSk7XG5cblxufSkoalF1ZXJ5KVxuIl19
