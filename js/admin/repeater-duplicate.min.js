!function(e){function t(e,t){var a;return a=e.attr("data-type"),i[a]?i[a](e,t):i._default(e,t,a)}function a(a,n,i){var i=i||"> .acf-field, > .acf-fields > .acf-field",c=a.find(i),d=n.find(i);c.each(function(a,n){return d[a]?e(c[a]).data("type")!==e(d[a]).data("type")?(console.trace("Error: source field type does not match destination field type"),!1):void t(e(c[a]),e(d[a])):(console.trace("Error: source fields do not match destination fields"),!1)})}var n=acf_duplicate_repeater.options,i={_default:function(t,a,n){var i=t.find('[type="'+n+'"]');acf.getField(t),acf.getField(a);a.find('[type="'+n+'"]').each(function(t,a){e(this).val(e(i[t]).val())})},button_group:function(t,a){var n=a.find('[type="radio"]');t.find('[type="radio"]').each(function(t,a){if(e(a).prop("checked"))return e(n[t]).trigger("click"),!1})},checkbox:function(t,a){var n=a.find('[type="checkbox"]');t.find('[type="checkbox"]').each(function(t,a){e(n[t]).prop("checked",e(a).prop("checked"))})},color_picker:function(e,t){var a=acf.getField(e),n=acf.getField(t),i=a.$inputText().val();n.$inputText().iris("option","color",i)},date_picker:function(e,t){i._default(e,t,"text"),i._default(e,t,"hidden")},date_time_picker:function(e,t){i._default(e,t,"text"),i._default(e,t,"hidden")},file:function(e,t){var a=e.find(".acf-file-uploader"),n=t.find(".acf-file-uploader");i._default(e,t,"hidden"),a.hasClass("has-value")&&(n.find("div").first().html(a.find("div").first().html()),t.find(".acf-file-uploader").addClass("has-value"))},flexible_content:function(t,n){var i=acf.getField(t),c=acf.getField(n);i.$layouts().each(function(t,n){var i,d=e(n);c.add({layout:d.data("layout")}),i=c.$layouts().last(),a(d,i,"> .acf-table > tbody > .acf-row > .acf-field, > .acf-fields > .acf-field")})},gallery:function(t,a){var n=t.find(".acf-gallery-attachments"),i=a.find(".acf-gallery-attachments"),c=a.find('input[type="hidden"]'),d=c.attr("name")+"[]";n.children().each(function(t,a){$clone=e(a).clone(),$clone.find('[type="hidden"]').attr("name",d),i.append($clone)})},google_map:function(e,t){var a=acf.getField(e);acf.getField(t).setValue(a.getValue())},group:function(e,t){a(e,t,"> .acf-input > .acf-table > tbody > .acf-row > .acf-field, > .acf-input > .acf-fields > .acf-field")},image:function(e,t){i._default(e,t,"hidden"),t.find("img").attr("src",e.find("img").attr("src")),e.find(".acf-image-uploader").hasClass("has-value")&&t.find(".acf-image-uploader").addClass("has-value")},link:function(e,t){var a=e.find(".link-node"),n=t.find(".link-node");n.html(a.html()),n.attr("href",a.attr("href")),n.attr("target",a.attr("target")),n.trigger("change")},oembed:function(e,t){t.find('[data-name="search-input"]').val(e.find('[type="hidden"]').val()).trigger("blur")},post_object:function(e,t){i.select(e,t)},radio:function(e,t){i.button_group(e,t),i._default(e,t,"text")},range:function(e,t){i._default(e,t,"range"),i._default(e,t,"number")},relationship:function(t,a){var n=a.find(".values > .list"),i=a.find(".acf-relationship").children('input[type="hidden"]'),c=i.attr("name")+"[]";t.find(".values > .list").children().each(function(t,a){var i=e(a).clone();i.find('[type="hidden"]').attr("name",c),n.append(i)}),i.trigger("change")},repeater:function(t,n){var i=acf.getField(t),c=acf.getField(n);i.$rows().each(function(t,n){$new_row=c.add(),a(e(n),$new_row,"> .acf-field, > .acf-fields > .acf-field")})},select:function(t,a,n){n=n||" > .acf-input > select";var i=t.find(n),c=a.find(n);1*i.data("ui")&&(c.html(""),i.find("option").each(function(t,a){c.append(e(a).clone())})),$destOpts=c.find("option"),i.find("option").each(function(t,a){e($destOpts[t]).prop("selected",e(a).prop("selected"))})},taxonomy:function(e,t){i.radio(e,t),i.checkbox(e,t),i.select(e,t,"> .acf-input > .acf-taxonomy-field > select")},textarea:function(e,t){t.find("textarea").val(e.find("textarea").val())},time_picker:function(e,t){i._default(e,t,"text"),i._default(e,t,"hidden")},true_false:function(e,t){t.find('[type="checkbox"]').prop("checked",e.find('[type="checkbox"]').prop("checked")),t.find('[type="checkbox"]').trigger("change")},user:function(e,t){i.select(e,t)},wysiwyg:function(e,t){var a,n=acf.getField(e),i=acf.getField(t),c=i.$input().attr("id"),d=n.getValue();a=tinymce.get(c),a?a.setContent(d):i.$input().html(d)}},c=function(t,a){var n=e.extend({},t);return e.each(a,function(a,i){if(void 0!==t[a]){if("events"===a)return void(t.events=e.extend(t.events,i));"function"==typeof i&&(n[a]=t[a])}t[a]=i}),t.parent=n,t};c(acf.models.FlexibleContentField.prototype,{events:{'click [data-name="duplicate-layout"]':"_duplicate"},render:function(){var t;return t=this.parent.render.apply(this,arguments),this.$layouts().each(function(t,a){e(this).find('[data-name="duplicate-layout"]').length||e(this).find(".acf-fc-layout-controls").prepend(n.duplicate_flexible_btn)}),t},_duplicate:function(t){var n,i;n=e(t.target).closest(".layout"),n.closest(".acf-field"),this.add({layout:n.data("layout"),before:n}),i=n.prev(".layout"),a(n,i,"> .acf-table > tbody > .acf-row > .acf-field, > .acf-fields > .acf-field")}}),c(acf.models.RepeaterField.prototype,{events:{'click a[data-event="duplicate-row"]':"_duplicate"},render:function(){var t;return t=this.parent.render.apply(this,arguments),this.$rows().each(function(t){e(this).find("> td.remove").append(n.duplicate_repeater_btn)}),t},_duplicate:function(t){var n,i;e(t.target).hasClass("acf-icon")&&(n=e(t.target).closest(".acf-row"),i=this.add({before:n}),a(n,i))}})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcGVhdGVyLWR1cGxpY2F0ZS5qcyJdLCJuYW1lcyI6WyIkIiwiY29weV92YWx1ZSIsIiRzcmMiLCIkZGVzdCIsInR5cGUiLCJhdHRyIiwiY29weV92YWx1ZV9jYiIsIl9kZWZhdWx0IiwiY29weV92YWx1ZXMiLCJfc2VsZWN0b3IiLCIkc291cmNlcyIsImZpbmQiLCIkZGVzdHMiLCJlYWNoIiwiaSIsImVsIiwiZGF0YSIsImNvbnNvbGUiLCJ0cmFjZSIsIm9wdGlvbnMiLCJhY2ZfZHVwbGljYXRlX3JlcGVhdGVyIiwiJHNyY2VzIiwiYWNmIiwiZ2V0RmllbGQiLCJ0aGlzIiwidmFsIiwiYnV0dG9uX2dyb3VwIiwiJGRlc3RSYWRpbyIsInByb3AiLCJ0cmlnZ2VyIiwiY2hlY2tib3giLCIkZGVzdENCIiwiY29sb3JfcGlja2VyIiwic3JjRmllbGQiLCJkZXN0RmllbGQiLCIkaW5wdXRUZXh0IiwiaXJpcyIsImRhdGVfcGlja2VyIiwiZGF0ZV90aW1lX3BpY2tlciIsImZpbGUiLCIkc3JjVXBsIiwiJGRlc3RVcGwiLCJoYXNDbGFzcyIsImZpcnN0IiwiaHRtbCIsImFkZENsYXNzIiwiZmxleGlibGVfY29udGVudCIsIiRsYXlvdXRzIiwibGF5b3V0IiwiJG5ld19sYXlvdXQiLCIkbGF5b3V0IiwiYWRkIiwibGFzdCIsImdhbGxlcnkiLCIkc3JjTGlzdCIsIiRkZXN0TGlzdCIsIiRpbnB1dCIsIm5hbWUiLCJjaGlsZHJlbiIsIiRjbG9uZSIsImNsb25lIiwiYXBwZW5kIiwiZ29vZ2xlX21hcCIsInNldFZhbHVlIiwiZ2V0VmFsdWUiLCJncm91cCIsImltYWdlIiwibGluayIsIiRzcmNOb2RlIiwiJGRlc3ROb2RlIiwib2VtYmVkIiwicG9zdF9vYmplY3QiLCJyYWRpbyIsInJhbmdlIiwicmVsYXRpb25zaGlwIiwicmVwZWF0ZXIiLCIkcm93cyIsInJvdyIsIiRuZXdfcm93Iiwic2VsZWN0IiwiJHNyY1NlbGVjdCIsIiRkZXN0U2VsZWN0IiwiJGRlc3RPcHRzIiwidGF4b25vbXkiLCJ0ZXh0YXJlYSIsInRpbWVfcGlja2VyIiwidHJ1ZV9mYWxzZSIsInVzZXIiLCJ3eXNpd3lnIiwiZWRpdG9yIiwiZGVzdF9pZCIsInRpbnltY2UiLCJnZXQiLCJzZXRDb250ZW50IiwiX2V4dGVuZCIsIm9iaiIsImV4dGVuZCIsInBhcmVudCIsImsiLCJ2IiwiZXZlbnRzIiwibW9kZWxzIiwiRmxleGlibGVDb250ZW50RmllbGQiLCJwcm90b3R5cGUiLCJjbGljayBbZGF0YS1uYW1lPVwiZHVwbGljYXRlLWxheW91dFwiXSIsInJlbmRlciIsInJldCIsImFwcGx5IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwicHJlcGVuZCIsImR1cGxpY2F0ZV9mbGV4aWJsZV9idG4iLCJfZHVwbGljYXRlIiwiZSIsInRhcmdldCIsImNsb3Nlc3QiLCJiZWZvcmUiLCJwcmV2IiwiUmVwZWF0ZXJGaWVsZCIsImNsaWNrIGFbZGF0YS1ldmVudD1cImR1cGxpY2F0ZS1yb3dcIl0iLCJkdXBsaWNhdGVfcmVwZWF0ZXJfYnRuIiwiJHNvdXJjZSIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBVUEsR0FnT1QsUUFBU0MsR0FBWUMsRUFBTUMsR0FDMUIsR0FBMkJDLEVBSTNCLE9BRkFBLEdBQU9GLEVBQUtHLEtBQUssYUFFVkMsRUFBZUYsR0FLZkUsRUFBY0YsR0FBT0YsRUFBTUMsR0FIMUJHLEVBQWNDLFNBQVVMLEVBQU1DLEVBQU9DLEdBYzlDLFFBQVNJLEdBQWFOLEVBQU1DLEVBQU9NLEdBQ2xDLEdBQ0NBLEdBQVlBLEdBQWEsMkNBQ3pCQyxFQUFXUixFQUFLUyxLQUFNRixHQUN0QkcsRUFBVVQsRUFBTVEsS0FBTUYsRUFFdkJDLEdBQVNHLEtBQU0sU0FBVUMsRUFBR0MsR0FDM0IsTUFBT0gsR0FBT0UsR0FJVGQsRUFBR1UsRUFBU0ksSUFBS0UsS0FBSyxVQUFZaEIsRUFBRVksRUFBT0UsSUFBSUUsS0FBSyxTQUN4REMsUUFBUUMsTUFBTSxtRUFDUCxPQUVSakIsR0FBWUQsRUFBR1UsRUFBU0ks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QUV3QixNQUFNYixLQUFLLDJCQUEyQm1HLFFBQVMzRixFQUFRNEYsMEJBSXBETCxHQUVSTSxXQUFZLFNBQVVDLEdBQ3JCLEdBRUMvRCxHQUNBRCxDQUdEQyxHQUFVbEQsRUFBRWlILEVBQUVDLFFBQVFDLFFBQVEsV0FHckJqRSxFQUFRaUUsUUFBUSxjQU16QjNGLEtBQUsyQixLQUNKSCxPQUFRRSxFQUFRbEMsS0FBSyxVQUNyQm9HLE9BQVFsRSxJQUlURCxFQUFjQyxFQUFRbUUsS0FBTSxXQUc1QjdHLEVBQWEwQyxFQUFTRCxFQUFhLCtFQVVwQzZDLEVBQVN4RSxJQUFJK0UsT0FBT2lCLGNBQWNmLFdBQ2xDSCxRQUNDbUIsc0NBQXVDLGNBRXhDZCxPQUFRLFdBRVAsR0FBSUMsRUFTSixPQVBBQSxHQUFNbEYsS0FBS3lFLE9BQU9RLE9BQU9FLE1BQU9uRixLQUFNb0YsV0FHdENwRixLQUFLb0QsUUFBUS9ELEtBQUssU0FBU0MsR0FDMUJkLEVBQUV3QixNQUFNYixLQUFLLGVBQWVrRCxPQUFRMUMsRUFBUXFHLDBCQUd0Q2QsR0FFUk0sV0FBWSxTQUFVQyxHQUVyQixHQUFJUSxHQUFTdEgsQ0FHVEgsR0FBRWlILEVBQUVDLFFBQVF4RSxTQUFTLGNBQ3hCK0UsRUFBVXpILEVBQUVpSCxFQUFFQyxRQUFRQyxRQUFRLFlBSy9CaEgsRUFBUXFCLEtBQUsyQixLQUFPaUUsT0FBUUssSUFHNUJqSCxFQUFhaUgsRUFBU3RILFFBT3RCdUgiLCJmaWxlIjoicmVwZWF0ZXItZHVwbGljYXRlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigkKXtcblx0dmFyIG9wdGlvbnMgPSBhY2ZfZHVwbGljYXRlX3JlcGVhdGVyLm9wdGlvbnMsXG5cblxuXHRcdC8qKlxuXHRcdCAqXHR2YWx1ZSBjb3B5IGNhbGxiYWNrc1xuXHRcdCAqL1xuXHRcdGNvcHlfdmFsdWVfY2IgPSB7XG5cdFx0XHRfZGVmYXVsdDogZnVuY3Rpb24oICRzcmMsICRkZXN0LCB0eXBlICkgeyAvLyBPS0FZXG5cdFx0XHRcdHZhciAkc3JjZXMgPSAkc3JjLmZpbmQoJ1t0eXBlPVwiJyt0eXBlKydcIl0nKSxcblx0XHRcdFx0XHRzcmNGaWVsZCA9IGFjZi5nZXRGaWVsZCgkc3JjKSxcblx0XHRcdFx0XHRkZXN0RmllbGQgPSBhY2YuZ2V0RmllbGQoJGRlc3QpO1xuXHRcdFx0XHQvL2Rlc3RGaWVsZC52YWwoIHNyY0ZpZWxkLnZhbCApO1xuXG5cdFx0XHRcdCRkZXN0LmZpbmQoJ1t0eXBlPVwiJyt0eXBlKydcIl0nKS5lYWNoKGZ1bmN0aW9uKGksZWwpe1xuXHRcdFx0XHRcdC8vY29uc29sZS5sb2codHlwZSx0aGlzLCRzcmNlc1tpXSwkKCAkc3JjZXNbaV0gKS52YWwoKSlcblx0XHRcdFx0XHQkKHRoaXMpLnZhbCggJCggJHNyY2VzW2ldICkudmFsKCkgKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdH0sXG5cdFx0XHRidXR0b25fZ3JvdXA6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0XHR2YXIgJGRlc3RSYWRpbyA9ICRkZXN0LmZpbmQoJ1t0eXBlPVwicmFkaW9cIl0nKTtcblx0XHRcdFx0JHNyYy5maW5kKCdbdHlwZT1cInJhZGlvXCJdJykuZWFjaCggZnVuY3Rpb24oaSxlbCkge1xuXHRcdFx0XHRcdGlmICggJChlbCkucHJvcCgnY2hlY2tlZCcpICkge1xuXHRcdFx0XHRcdFx0JCggJGRlc3RSYWRpb1tpXSApLnRyaWdnZXIoJ2NsaWNrJyApO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9LFxuXHRcdFx0Y2hlY2tib3g6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0XHR2YXIgJGRlc3RDQiA9ICRkZXN0LmZpbmQoJ1t0eXBlPVwiY2hlY2tib3hcIl0nKTtcblx0XHRcdFx0JHNyYy5maW5kKCdbdHlwZT1cImNoZWNrYm94XCJdJykuZWFjaCggZnVuY3Rpb24oaSxlbCkge1xuXHRcdFx0XHRcdCQoICRkZXN0Q0JbaV0gKS5wcm9wKCdjaGVja2VkJywgJChlbCkucHJvcCgnY2hlY2tlZCcpICk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSxcblx0XHRcdGNvbG9yX3BpY2tlcjogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRcdHZhciBzcmNGaWVsZCA9IGFjZi5nZXRGaWVsZCgkc3JjKSxcblx0XHRcdFx0XHRkZXN0RmllbGQgPSBhY2YuZ2V0RmllbGQoJGRlc3QpLFxuXHRcdFx0XHRcdHZhbCA9IHNyY0ZpZWxkLiRpbnB1dFRleHQoKS52YWwoKTtcblxuXHRcdFx0XHRkZXN0RmllbGQuJGlucHV0VGV4dCgpLmlyaXMoICdvcHRpb24nLCAnY29sb3InLCB2YWwgKTtcblx0XHRcdH0sXG5cdFx0XHRkYXRlX3BpY2tlcjogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsICd0ZXh0JyApO1xuXHRcdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCAnaGlkZGVuJyApO1xuXHRcdFx0fSxcblx0XHRcdGRhdGVfdGltZV9waWNrZXI6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCAndGV4dCcgKTtcblx0XHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwgJ2hpZGRlbicgKTtcblx0XHRcdH0sXG5cdFx0XHRmaWxlOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdFx0dmFyICRzcmNVcGwgPSAkc3JjLmZpbmQoJy5hY2YtZmlsZS11cGxvYWRlcicpLFxuXHRcdFx0XHRcdCRkZXN0VXBsID0gJGRlc3QuZmluZCgnLmFjZi1maWxlLXVwbG9hZGVyJyk7XG5cblx0XHRcdFx0Ly8gc2V0IGhpZGRlblxuXHRcdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCAkc3JjLCAkZGVzdCwgJ2hpZGRlbicgKTtcblxuXHRcdFx0XHRpZiAoICRzcmNVcGwuaGFzQ2xhc3MoJ2hhcy12YWx1ZScpICkge1xuXHRcdFx0XHRcdCRkZXN0VXBsLmZpbmQoJ2RpdicpLmZpcnN0KCkuaHRtbCggJHNyY1VwbC5maW5kKCdkaXYnKS5maXJzdCgpLmh0bWwoKSApO1xuXHRcdFx0XHRcdCRkZXN0LmZpbmQoJy5hY2YtZmlsZS11cGxvYWRlcicpLmFkZENsYXNzKCdoYXMtdmFsdWUnKVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0ZmxleGlibGVfY29udGVudDogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkge1xuXHRcdFx0XHR2YXIgc2VsZWN0b3IgPSAnPiAuYWNmLWlucHV0ID4gLmFjZi1mbGV4aWJsZS1jb250ZW50ID4gLnZhbHVlcyA+IC5sYXlvdXQnLFxuXHRcdFx0XHRcdHNyY0ZpZWxkID0gYWNmLmdldEZpZWxkKCRzcmMpLFxuXHRcdFx0XHRcdGRlc3RGaWVsZCA9IGFjZi5nZXRGaWVsZCgkZGVzdCk7XG5cdFx0XHRcdC8vYWNmLmZpZWxkcy5mbGV4aWJsZV9jb250ZW50LnNldCggJyRmaWVsZCcsICRkZXN0ICk7XG5cblx0XHRcdFx0c3JjRmllbGQuJGxheW91dHMoKS5lYWNoKGZ1bmN0aW9uKGksbGF5b3V0KXtcblx0XHRcdFx0XHQvLyBlYWNoIHJlcGVhdGVyIGVudHJ5Li4uIGZpbmQgZmllbGRzIGluIHJlcGVhdGVyIGVudHJ5XG5cdFx0XHRcdFx0dmFyICRsYXlvdXQgPSAkKGxheW91dCksXG5cdFx0XHRcdFx0XHQkbmV3X2xheW91dDtcblxuXHRcdFx0XHRcdGRlc3RGaWVsZC5hZGQoIHsgbGF5b3V0OiAkbGF5b3V0LmRhdGEoJ2xheW91dCcpIH0gKTtcblxuXHRcdFx0XHRcdCRuZXdfbGF5b3V0ID0gZGVzdEZpZWxkLiRsYXlvdXRzKCkubGFzdCgpO1xuXG5cdFx0XHRcdFx0Ly8gdGJsICsgYmxvY2sgKyByb3dcblx0XHRcdFx0XHRjb3B5X3ZhbHVlcyggJGxheW91dCwgJG5ld19sYXlvdXQsICc+IC5hY2YtdGFibGUgPiB0Ym9keSA+IC5hY2Ytcm93ID4gLmFjZi1maWVsZCwgPiAuYWNmLWZpZWxkcyA+IC5hY2YtZmllbGQnICk7IC8vIGV4Y2x1ZGUgY2xvbmVzIVxuXG5cdFx0XHRcdH0pOyAvLyB0YWJsZVxuXHRcdFx0fSxcblx0XHRcdGdhbGxlcnk6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0XHQvLyBjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCAnaGlkZGVuJyApO1xuXHRcdFx0XHR2YXIgJHNyY0xpc3QgPSAkc3JjLmZpbmQoJy5hY2YtZ2FsbGVyeS1hdHRhY2htZW50cycpLFxuXHRcdFx0XHRcdCRkZXN0TGlzdCA9ICRkZXN0LmZpbmQoJy5hY2YtZ2FsbGVyeS1hdHRhY2htZW50cycpLFxuXHRcdFx0XHRcdCRpbnB1dCA9ICRkZXN0LmZpbmQoJ2lucHV0W3R5cGU9XCJoaWRkZW5cIl0nKSxcblx0XHRcdFx0XHRuYW1lID0gJGlucHV0LmF0dHIoJ25hbWUnKSArICdbXSc7XG5cblx0XHRcdFx0JHNyY0xpc3QuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKGksZWwpe1xuXHRcdFx0XHRcdCRjbG9uZSA9ICQoZWwpLmNsb25lKCk7XG5cdFx0XHRcdFx0JGNsb25lLmZpbmQoJ1t0eXBlPVwiaGlkZGVuXCJdJykuYXR0ciggJ25hbWUnLCBuYW1lICk7XG5cdFx0XHRcdFx0JGRlc3RMaXN0LmFwcGVuZCgkY2xvbmUpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0sXG5cdFx0XHRnb29nbGVfbWFwOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdFx0dmFyIHNyY0ZpZWxkID0gYWNmLmdldEZpZWxkKCRzcmMpLFxuXHRcdFx0XHRcdGRlc3RGaWVsZCA9IGFjZi5nZXRGaWVsZCgkZGVzdCk7XG5cdFx0XHRcdGRlc3RGaWVsZC5zZXRWYWx1ZSggc3JjRmllbGQuZ2V0VmFsdWUoKSApO1xuLy9cdFx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsICdoaWRkZW4nICk7XG5cdFx0XHR9LFxuXHRcdFx0Z3JvdXA6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHtcblx0XHRcdFx0Y29weV92YWx1ZXMoICRzcmMsICRkZXN0LCAnPiAuYWNmLWlucHV0ID4gLmFjZi10YWJsZSA+IHRib2R5ID4gLmFjZi1yb3cgPiAuYWNmLWZpZWxkLCA+IC5hY2YtaW5wdXQgPiAuYWNmLWZpZWxkcyA+IC5hY2YtZmllbGQnICk7IC8vIGV4Y2x1ZGUgY2xvbmVzIVxuXHRcdFx0fSxcblx0XHRcdGltYWdlOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdFx0Ly8gc2V0IGhpZGRlblxuXHRcdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCAkc3JjLCAkZGVzdCwgJ2hpZGRlbicgKTtcblx0XHRcdFx0JGRlc3QuZmluZCgnaW1nJykuYXR0cignc3JjJywgJHNyYy5maW5kKCdpbWcnKS5hdHRyKCdzcmMnKSApXG5cdFx0XHRcdGlmICggJHNyYy5maW5kKCcuYWNmLWltYWdlLXVwbG9hZGVyJykuaGFzQ2xhc3MoJ2hhcy12YWx1ZScpICkge1xuXHRcdFx0XHRcdCRkZXN0LmZpbmQoJy5hY2YtaW1hZ2UtdXBsb2FkZXInKS5hZGRDbGFzcygnaGFzLXZhbHVlJylcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGxpbms6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0XHR2YXIgJHNyY05vZGUgPSAkc3JjLmZpbmQoJy5saW5rLW5vZGUnKSxcblx0XHRcdFx0XHQkZGVzdE5vZGUgPSAkZGVzdC5maW5kKCcubGluay1ub2RlJyk7XG5cblx0XHRcdFx0JGRlc3ROb2RlLmh0bWwoICRzcmNOb2RlLmh0bWwoKSApO1xuXHRcdFx0XHQkZGVzdE5vZGUuYXR0ciggJ2hyZWYnLCAkc3JjTm9kZS5hdHRyKCAnaHJlZicgKSApO1xuXHRcdFx0XHQkZGVzdE5vZGUuYXR0ciggJ3RhcmdldCcsICRzcmNOb2RlLmF0dHIoICd0YXJnZXQnICkgKTtcblxuXHRcdFx0XHQkZGVzdE5vZGUudHJpZ2dlcignY2hhbmdlJyk7XG5cdFx0XHR9LFxuXHRcdFx0b2VtYmVkOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdFx0JGRlc3QuZmluZCgnW2RhdGEtbmFtZT1cInNlYXJjaC1pbnB1dFwiXScpXG5cdFx0XHRcdFx0LnZhbCggJHNyYy5maW5kKCdbdHlwZT1cImhpZGRlblwiXScpLnZhbCgpIClcblx0XHRcdFx0XHQudHJpZ2dlcignYmx1cicpO1xuXHRcdFx0fSxcblx0XHRcdHBvc3Rfb2JqZWN0OiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdFx0Y29weV92YWx1ZV9jYlsnc2VsZWN0J10oJHNyYywgJGRlc3QgKTtcblx0XHRcdH0sXG5cdFx0XHRyYWRpbzogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRcdGNvcHlfdmFsdWVfY2JbJ2J1dHRvbl9ncm91cCddKCRzcmMsICRkZXN0KTtcblx0XHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwndGV4dCcpO1xuXHRcdFx0fSxcblx0XHRcdHJhbmdlOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwncmFuZ2UnKTtcblx0XHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwnbnVtYmVyJyk7XG5cdFx0XHR9LFxuXHRcdFx0cmVsYXRpb25zaGlwOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdFx0dmFyICRkZXN0TGlzdCA9ICRkZXN0LmZpbmQoJy52YWx1ZXMgPiAubGlzdCcpLFxuXHRcdFx0XHRcdCRpbnB1dCA9ICRkZXN0LmZpbmQoJy5hY2YtcmVsYXRpb25zaGlwJykuY2hpbGRyZW4oJ2lucHV0W3R5cGU9XCJoaWRkZW5cIl0nKSxcblx0XHRcdFx0XHRuYW1lID0gJGlucHV0LmF0dHIoJ25hbWUnKSArICdbXSc7XG5cblx0XHRcdFx0JHNyYy5maW5kKCcudmFsdWVzID4gLmxpc3QnKS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oaSxlbCl7XG5cdFx0XHRcdFx0dmFyICRjbG9uZSA9ICQoZWwpLmNsb25lKCk7XG5cdFx0XHRcdFx0JGNsb25lLmZpbmQoJ1t0eXBlPVwiaGlkZGVuXCJdJykuYXR0ciggJ25hbWUnLCBuYW1lICk7XG5cdFx0XHRcdFx0JGRlc3RMaXN0LmFwcGVuZCgkY2xvbmUpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0JGlucHV0LnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdFx0fSxcblx0XHRcdHJlcGVhdGVyOmZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHtcblx0XHRcdFx0dmFyIHNyY0ZpZWxkID0gYWNmLmdldEZpZWxkKCRzcmMpLFxuXHRcdFx0XHRcdGRlc3RGaWVsZCA9IGFjZi5nZXRGaWVsZCgkZGVzdCk7XG5cdFx0XHRcdHNyY0ZpZWxkLiRyb3dzKCkuZWFjaChmdW5jdGlvbihpLHJvdyl7XG5cdFx0XHRcdFx0JG5ld19yb3cgPSBkZXN0RmllbGQuYWRkKCk7XG5cdFx0XHRcdFx0Y29weV92YWx1ZXMoICQocm93KSwgJG5ld19yb3csICc+IC5hY2YtZmllbGQsID4gLmFjZi1maWVsZHMgPiAuYWNmLWZpZWxkJyApO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQvLyAkc3JjLmZpbmQoJz4gLmFjZi1pbnB1dCA+IC5hY2YtcmVwZWF0ZXIgPiAuYWNmLXRhYmxlID4gdGJvZHkgPiAuYWNmLXJvdzpub3QoLmFjZi1jbG9uZSknKS5lYWNoKGZ1bmN0aW9uKGkscm93KXtcblx0XHRcdFx0Ly8gXHQvLyBlYWNoIHJlcGVhdGVyIGVudHJ5Li4uIGZpbmQgZmllbGRzIGluIHJlcGVhdGVyIGVudHJ5XG5cdFx0XHRcdC8vIFx0dmFyICRuZXdfcm93ID0gYWNmLmZpZWxkcy5yZXBlYXRlci5hZGQoKTtcblx0XHRcdFx0Ly9cblx0XHRcdFx0Ly8gXHRjb3B5X3ZhbHVlcyggJChyb3cpLCAkbmV3X3JvdywgJz4gLmFjZi1maWVsZCwgPiAuYWNmLWZpZWxkcyA+IC5hY2YtZmllbGQnICk7IC8vIGV4Y2x1ZGUgY2xvbmVzIVxuXHRcdFx0XHQvLyB9KTsgLy8gdGFibGVcblx0XHRcdH0sXG5cdFx0XHRzZWxlY3Q6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCwgX3NlbGVjdG9yICkgeyAvLyBPS0FZXG5cdFx0XHRcdF9zZWxlY3RvciA9IF9zZWxlY3RvciB8fCAnID4gLmFjZi1pbnB1dCA+IHNlbGVjdCc7XG5cdFx0XHRcdHZhciAkc3JjU2VsZWN0ID0gJHNyYy5maW5kKCBfc2VsZWN0b3IgKSxcblx0XHRcdFx0XHQkZGVzdFNlbGVjdCA9ICRkZXN0LmZpbmQoIF9zZWxlY3RvciApO1xuXG5cdFx0XHRcdGlmICggJHNyY1NlbGVjdC5kYXRhKCd1aScpICogMSApIHtcblx0XHRcdFx0XHQvLyBzb3J0ICRkZXN0IGxpa2UgJHNyY1xuXHRcdFx0XHRcdCRkZXN0U2VsZWN0Lmh0bWwoJycpO1xuXHRcdFx0XHRcdCRzcmNTZWxlY3QuZmluZCgnb3B0aW9uJykuZWFjaChmdW5jdGlvbihpLGVsKXtcblx0XHRcdFx0XHRcdCRkZXN0U2VsZWN0LmFwcGVuZCgkKGVsKS5jbG9uZSgpKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHQkZGVzdE9wdHMgPSAkZGVzdFNlbGVjdC5maW5kKCdvcHRpb24nKTtcblx0XHRcdFx0JHNyY1NlbGVjdC5maW5kKCdvcHRpb24nKS5lYWNoKGZ1bmN0aW9uKGksZWwpIHtcblx0XHRcdFx0XHQkKCAkZGVzdE9wdHNbaV0gKS5wcm9wKCdzZWxlY3RlZCcsICQoZWwpLnByb3AoJ3NlbGVjdGVkJykgKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9LFxuXHRcdFx0dGF4b25vbXk6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0XHRjb3B5X3ZhbHVlX2NiWydyYWRpbyddKCRzcmMsICRkZXN0KTtcblx0XHRcdFx0Y29weV92YWx1ZV9jYlsnY2hlY2tib3gnXSgkc3JjLCAkZGVzdCk7XG5cdFx0XHRcdGNvcHlfdmFsdWVfY2JbJ3NlbGVjdCddKCRzcmMsICRkZXN0LCAnPiAuYWNmLWlucHV0ID4gLmFjZi10YXhvbm9teS1maWVsZCA+IHNlbGVjdCcgKTtcblx0XHRcdH0sXG5cdFx0XHR0ZXh0YXJlYTogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRcdCRkZXN0LmZpbmQoJ3RleHRhcmVhJykudmFsKCAkc3JjLmZpbmQoJ3RleHRhcmVhJykudmFsKCkgKTtcblx0XHRcdH0sXG5cdFx0XHR0aW1lX3BpY2tlcjogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsICd0ZXh0JyApO1xuXHRcdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCAnaGlkZGVuJyApO1xuXHRcdFx0fSxcblx0XHRcdHRydWVfZmFsc2U6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0XHQkZGVzdC5maW5kKCdbdHlwZT1cImNoZWNrYm94XCJdJykucHJvcCgnY2hlY2tlZCcsICRzcmMuZmluZCgnW3R5cGU9XCJjaGVja2JveFwiXScpLnByb3AoJ2NoZWNrZWQnKSApO1xuXHRcdFx0XHQkZGVzdC5maW5kKCdbdHlwZT1cImNoZWNrYm94XCJdJykudHJpZ2dlcignY2hhbmdlJyk7XG5cdFx0XHR9LFxuXHRcdFx0dXNlcjogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRcdGNvcHlfdmFsdWVfY2JbJ3NlbGVjdCddKCAkc3JjLCAkZGVzdCApO1xuXHRcdFx0fSxcblx0XHRcdHd5c2l3eWc6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gLi4uXG5cdFx0XHRcdHZhciBzcmNGaWVsZCA9IGFjZi5nZXRGaWVsZCgkc3JjKSxcblx0XHRcdFx0XHRkZXN0RmllbGQgPSBhY2YuZ2V0RmllbGQoJGRlc3QpLFxuXHRcdFx0XHRcdGRlc3RfaWQgPSBkZXN0RmllbGQuJGlucHV0KCkuYXR0cignaWQnKSxcblx0XHRcdFx0XHR2YWwgPSBzcmNGaWVsZC5nZXRWYWx1ZSgpLCBlZGl0b3I7XG5cblx0XHRcdFx0ZWRpdG9yID0gdGlueW1jZS5nZXQoIGRlc3RfaWQgKTtcblx0XHRcdFx0aWYgKCAhISBlZGl0b3IgKSB7XG5cdFx0XHRcdFx0Ly8gZWRpdG9yIGFscmVhZHkgaW5pdGVkXG5cdFx0XHRcdFx0ZWRpdG9yLnNldENvbnRlbnQoIHZhbCApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIGRlbGF5ZWQgaW5pdFxuXHRcdFx0XHRcdGRlc3RGaWVsZC4kaW5wdXQoKS5odG1sKCB2YWwgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHR9O1xuXG5cdC8qKlxuXHQgKlx0Q29weSB2YWx1ZXMgZnJvbSBvbmUgYWNmLWZpZWxkIHRvIGFub3RoZXJcblx0ICpcblx0ICpcdEBwYXJhbSAkc3JjIGpRdWVyeSBvYmplY3QgaG9sZGluZyB0aGUgLmFjZi1maWVsZCBvYmplY3QgdG8gY29weSBmcm9tXG5cdCAqXHRAcGFyYW0gJGRlc3QgalF1ZXJ5IG9iamVjdCBob2xkaW5nIHRoZSAuYWNmLWZpZWxkIG9iamVjdCB0byBjb3B5IHRvXG5cdCAqL1xuXHRmdW5jdGlvbiBjb3B5X3ZhbHVlKCAkc3JjLCAkZGVzdCApIHtcblx0XHR2YXIgJHNyY0lucHV0LCAkZGVzdElucHV0LCB0eXBlO1xuXG5cdFx0dHlwZSA9ICRzcmMuYXR0cignZGF0YS10eXBlJyk7XG5cblx0XHRpZiAoICEgY29weV92YWx1ZV9jYlsgdHlwZSBdICkge1xuXHRcdFx0Ly8gdGV0LCByYW5nZSwgdXJsLCBudW1iZXIsXG5cdFx0XHRyZXR1cm4gY29weV92YWx1ZV9jYi5fZGVmYXVsdCggJHNyYywgJGRlc3QsIHR5cGUgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gY29weV92YWx1ZV9jYlt0eXBlXSggJHNyYywgJGRlc3QgKTtcblx0fVxuXG5cdC8qKlxuXHQgKlx0Q29weSB2YWx1ZXMgZnJvbSBvbmUgc2V0IG9mIGFjZi1maWVsZHMgdG8gYW5vdGhlci5cblx0ICpcdEl0IGlzIGFzc3VtZWQgdGhhdCBib3RoICRzcmMgYWRuICRkZXN0IGhhdmUgYW4gaWRlbnRpY2FsXG5cdCAqXG5cdCAqXHRAcGFyYW0gJHNyYyBqUXVlcnkgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIC5hY2YtZmllbGQgb2JqZWN0cyB0byBjb3B5IGZyb21cblx0ICpcdEBwYXJhbSAkZGVzdCBqUXVlcnkgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIC5hY2YtZmllbGQgb2JqZWN0IHRvIGNvcHkgdG9cblx0ICpcdEBwYXJhbSBfc2VsZWN0b3IgY3NzIHNlbGVjdG9yIHRvIHNlbGVjdCAuYWNmLWZpZWxkcyBpbiBib3RoICRzcmMgYW5kICRkZXN0XG5cdCAqL1xuXHRmdW5jdGlvbiBjb3B5X3ZhbHVlcyggJHNyYywgJGRlc3QsIF9zZWxlY3RvciApIHtcblx0XHR2YXIgZmllbGRfbWFwXHQ9IHt9LFxuXHRcdFx0X3NlbGVjdG9yID0gX3NlbGVjdG9yIHx8ICc+IC5hY2YtZmllbGQsID4gLmFjZi1maWVsZHMgPiAuYWNmLWZpZWxkJyxcblx0XHRcdCRzb3VyY2VzXHQ9ICRzcmMuZmluZCggX3NlbGVjdG9yICksXG5cdFx0XHQkZGVzdHNcdFx0PSAkZGVzdC5maW5kKCBfc2VsZWN0b3IgKTtcblxuXHRcdCRzb3VyY2VzLmVhY2goIGZ1bmN0aW9uKCBpLCBlbCApe1xuXHRcdFx0aWYgKCAhICRkZXN0c1tpXSApIHtcblx0XHRcdFx0Y29uc29sZS50cmFjZSgnRXJyb3I6IHNvdXJjZSBmaWVsZHMgZG8gbm90IG1hdGNoIGRlc3RpbmF0aW9uIGZpZWxkcycpO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRpZiAoICQoICRzb3VyY2VzW2ldICkuZGF0YSgndHlwZScpICE9PSAkKCRkZXN0c1tpXSkuZGF0YSgndHlwZScpICkge1xuXHRcdFx0XHRjb25zb2xlLnRyYWNlKCdFcnJvcjogc291cmNlIGZpZWxkIHR5cGUgZG9lcyBub3QgbWF0Y2ggZGVzdGluYXRpb24gZmllbGQgdHlwZScpO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRjb3B5X3ZhbHVlKCAkKCAkc291cmNlc1tpXSApLCAkKCRkZXN0c1tpXSkgKTtcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKlx0RXh0ZW5kIGFjZiBmbGV4aWJsZSBjb250ZW50IGZpZWxkXG5cdCAqL1xuXG5cdHZhciBfZXh0ZW5kID0gZnVuY3Rpb24ob2JqLGV4dGVuZCkge1xuXHRcdHZhciBwYXJlbnQgPSAkLmV4dGVuZCh7fSxvYmopO1xuXHRcdCQuZWFjaChleHRlbmQsZnVuY3Rpb24oayx2KSB7XG5cdFx0XHRpZiAoICd1bmRlZmluZWQnICE9PSB0eXBlb2Ygb2JqW2tdICkge1xuXHRcdFx0XHRpZiAoICdldmVudHMnID09PSBrICkge1xuXHRcdFx0XHRcdG9iai5ldmVudHMgPSAkLmV4dGVuZCggb2JqLmV2ZW50cywgdiApO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fSBlbHNlIGlmICggJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIHYgKSB7XG5cdFx0XHRcdFx0cGFyZW50W2tdID0gb2JqW2tdOyAvL1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRvYmpba10gPSB2O1xuXHRcdH0pO1xuXHRcdG9iai5wYXJlbnQgPSBwYXJlbnQ7XG5cdFx0cmV0dXJuIG9iajtcblx0fVxuXG5cdF9leHRlbmQoIGFjZi5tb2RlbHMuRmxleGlibGVDb250ZW50RmllbGQucHJvdG90eXBlLCB7XG5cdFx0ZXZlbnRzOiB7XG5cdFx0XHQnY2xpY2sgW2RhdGEtbmFtZT1cImR1cGxpY2F0ZS1sYXlvdXRcIl0nOiAnX2R1cGxpY2F0ZSdcblx0XHR9LFxuXHRcdHJlbmRlcjogZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciByZXQ7XG5cblx0XHRcdHJldCA9IHRoaXMucGFyZW50LnJlbmRlci5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cblx0XHRcdC8vIGFkZCBkdXBsaWNhdGUgYnRuXG5cdFx0XHR0aGlzLiRsYXlvdXRzKCkuZWFjaChmdW5jdGlvbiggaSwgZWwgKXtcblx0XHRcdFx0aWYgKCAhICQodGhpcykuZmluZCgnW2RhdGEtbmFtZT1cImR1cGxpY2F0ZS1sYXlvdXRcIl0nKS5sZW5ndGggKSB7XG5cdFx0XHRcdFx0JCh0aGlzKS5maW5kKCcuYWNmLWZjLWxheW91dC1jb250cm9scycpLnByZXBlbmQoIG9wdGlvbnMuZHVwbGljYXRlX2ZsZXhpYmxlX2J0biApO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIHJldDtcblx0XHR9LFxuXHRcdF9kdXBsaWNhdGU6IGZ1bmN0aW9uKCBlICkge1xuXHRcdFx0dmFyIGxheW91dCxcblx0XHRcdFx0JGZpZWxkLFxuXHRcdFx0XHQkbGF5b3V0LFxuXHRcdFx0XHQkbmV3X2xheW91dDtcblxuXHRcdFx0Ly8gZ2V0IGxheW91dCB3cmFwcGVyXG5cdFx0XHQkbGF5b3V0ID0gJChlLnRhcmdldCkuY2xvc2VzdCgnLmxheW91dCcpO1xuXG5cdFx0XHQvLyBnZXQgZmxleGlibGVfY29udGVudCBmaWVsZFxuXHRcdFx0JGZpZWxkID0gJGxheW91dC5jbG9zZXN0KCcuYWNmLWZpZWxkJyk7XG5cblx0XHRcdC8vIGFjZiBzZXQgZmllbGQgY29udGVueHRcblx0XHRcdC8vYWNmLmZpZWxkcy5mbGV4aWJsZV9jb250ZW50LnNldCggJyRmaWVsZCcsICRmaWVsZCApO1xuXG5cdFx0XHQvLyBhY2YgYWRkIHRhcmdldCBsYXlvdXQgYmVmb3JlIHNvdXJjZSBsYXlvdXRcblx0XHRcdHRoaXMuYWRkKCB7XG5cdFx0XHRcdGxheW91dDogJGxheW91dC5kYXRhKCdsYXlvdXQnKSxcblx0XHRcdFx0YmVmb3JlOiAkbGF5b3V0LFxuXHRcdFx0fSk7XG5cblx0XHRcdC8vIGdldCB0aGUgYWRkZWQgbGF5b3V0XG5cdFx0XHQkbmV3X2xheW91dCA9ICRsYXlvdXQucHJldiggJy5sYXlvdXQnICk7XG5cblx0XHRcdC8vIGNvcHkgdmFsdWVzIGZyb20gc291cmNlIGxheW91dCB0byBkZXN0aW5hdGlvblxuXHRcdFx0Y29weV92YWx1ZXMoICRsYXlvdXQsICRuZXdfbGF5b3V0LCAnPiAuYWNmLXRhYmxlID4gdGJvZHkgPiAuYWNmLXJvdyA+IC5hY2YtZmllbGQsID4gLmFjZi1maWVsZHMgPiAuYWNmLWZpZWxkJyApOyAvLyBleGNsdWRlIGNsb25lcyFcblxuXHRcdH1cblx0fSk7XG5cblx0Ly9hY2YuZmllbGRzLmZsZXhpYmxlX2NvbnRlbnQgPSBhY2YuZmllbGRzLmZsZXhpYmxlX2NvbnRlbnQuZXh0ZW5kKCk7XG5cblx0LyoqXG5cdCAqXHRFeHRlbmQgYWNmIGZsZXhpYmxlIGNvbnRlbnQgZmllbGRcblx0ICovXG5cdCBfZXh0ZW5kKCBhY2YubW9kZWxzLlJlcGVhdGVyRmllbGQucHJvdG90eXBlLCB7XG5cdFx0ZXZlbnRzOiB7XG5cdFx0XHQnY2xpY2sgYVtkYXRhLWV2ZW50PVwiZHVwbGljYXRlLXJvd1wiXSc6ICdfZHVwbGljYXRlJ1xuXHRcdH0sXG5cdFx0cmVuZGVyOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIHJldDtcblxuXHRcdFx0cmV0ID0gdGhpcy5wYXJlbnQucmVuZGVyLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblxuXHRcdFx0Ly8gYWRkIGR1cGxpY2F0ZSBidG5cblx0XHRcdHRoaXMuJHJvd3MoKS5lYWNoKGZ1bmN0aW9uKGkpe1xuXHRcdFx0XHQkKHRoaXMpLmZpbmQoJz4gdGQucmVtb3ZlJykuYXBwZW5kKCBvcHRpb25zLmR1cGxpY2F0ZV9yZXBlYXRlcl9idG4gKTtcblx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH0sXG5cdFx0X2R1cGxpY2F0ZTogZnVuY3Rpb24oIGUgKSB7XG5cblx0XHRcdHZhciAkc291cmNlLCAkZGVzdDtcblxuXHRcdFx0Ly8gZ2V0IHNvdXJjZSByb3dcblx0XHRcdGlmKCAkKGUudGFyZ2V0KS5oYXNDbGFzcygnYWNmLWljb24nKSApIHtcblx0XHRcdFx0JHNvdXJjZSA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5hY2Ytcm93Jyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHQvLyBhZGQgZGVzdGluYXRpb24gcm93XG5cdFx0XHQkZGVzdCA9IHRoaXMuYWRkKCB7IGJlZm9yZTogJHNvdXJjZSB9ICk7IC8vIGFkZCBiZWZvcmUgc291cmNlIVxuXG5cdFx0XHQvLyBjb3B5IHZhbHVlcyBmcm9tIHNvdXJjZSByb3cgdG8gZGVzdGluYXRpb25cblx0XHRcdGNvcHlfdmFsdWVzKCAkc291cmNlLCAkZGVzdCApO1xuXG4vL1x0XHRcdHRoaXMuJGlucHV0LnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdH0sXG5cdH0pO1xuXG5cbn0pKGpRdWVyeSlcbiJdfQ==
